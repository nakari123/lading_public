import{a as sS,b as ag,c as iS,d as zc,e as cg,f as xd,g as oS,h as aS,i as lg,j as Ze,k as wi,l as _r,m as Sd,n as Gc,o as cS,p as lS,q as Ss,r as yn}from"./chunk-ZTURQM3A.js";import{$ as He,$b as jx,$c as xs,A as ad,Ab as pr,Ac as ig,B as Ye,Ba as gi,Bb as Lx,Bc as yr,Ca as Do,D as ps,Da as ko,Db as Vo,Dc as Gx,Ea as yi,Ec as Kx,F as gs,Fa as vx,Fc as gn,G as cd,Ga as Po,Gc as Hx,H as zp,Ha as Tt,Hb as Kr,Hc as og,I as Vt,Ia as ht,Ib as Es,Ic as Wx,J as fx,Ja as fd,Jb as gr,Jc as jc,Ka as wx,Kc as Qx,L as ld,La as No,Lc as Yx,M as $r,Ma as xx,Mc as De,N as ur,Na as xt,Nb as Bx,Nc as Xx,O as Gp,Oa as _i,Ob as Vx,Oc as qc,P as mx,Pa as Lc,Pb as bi,Pc as Zx,Q as ud,Qa as Oo,Qb as Uo,Qc as Jx,R as Io,Ra as Mo,Rb as Ei,Rc as $c,S as px,Sa as Sx,Sb as Bn,Sc as vd,T as Mc,Ta as Ax,Tc as eS,U as dd,Ua as Cx,Ub as tg,V as dr,Va as Tx,Vb as jo,W as xe,Wa as Ix,Wb as vs,Wc as tS,X as Kp,Xa as Rx,Xb as ws,Y as ys,Ya as Dx,Yc as qo,Za as An,Zb as Ux,Zc as nS,_ as ge,_c as $o,a as ar,aa as _s,ab as kx,ad as rS,b as ux,bd as wd,c as Ae,ca as Z,d as jp,da as Ce,db as Bc,dc as vi,e as Nc,ea as gx,eb as Gr,ec as Vn,ed as ug,f as Le,fa as se,fb as de,fd as dg,g as Wt,ga as Hp,gb as Px,ha as L,hb as Xp,hd as Kc,i as sd,ia as Y,id as Hc,j as dx,ja as Ro,jb as Nx,k as cr,ka as Wp,kb as Ox,kd as hg,l as mi,la as Fc,lb as Mx,m as Co,ma as Me,n as Ve,na as Ln,nb as we,nc as Uc,o as J,oa as Te,ob as Zp,oc as qx,p as pi,pa as Qt,pb as Fo,pc as pd,q as qp,qa as yx,qb as Jp,qc as $x,r as hx,ra as hd,rb as Lo,rc as gd,s as ie,sa as _x,sb as Cn,sc as yd,t as lr,ta as bs,tb as Fx,tc as ng,u as on,ua as hr,ub as eg,uc as _d,v as $p,va as bx,vb as Vc,vc as rg,w as od,wa as zr,wb as Bo,wc as sg,x as Oc,xa as Qp,xb as fr,xc as bd,y as To,ya as Yp,yb as mr,yc as Ed,za as Ex,zb as md,zc as zx}from"./chunk-IB4NDP3U.js";import{b as So,c as Ao,d as id}from"./chunk-PAUDARKW.js";import{a as E,b as z,d as ms,e as Sn,g as Up,h as Pc,i as y,j as wt,k as pn,l as qr}from"./chunk-T7NDVU76.js";var Oh=Sn(Zr=>{"use strict";var $I=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",pU=$I+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",zI="["+$I+"]["+pU+"]*",gU=new RegExp("^"+zI+"$"),yU=function(t,e){let n=[],r=e.exec(t);for(;r;){let s=[];s.startIndex=e.lastIndex-r[0].length;let i=r.length;for(let o=0;o<i;o++)s.push(r[o]);n.push(s),r=e.exec(t)}return n},_U=function(t){let e=gU.exec(t);return!(e===null||typeof e>"u")};Zr.isExist=function(t){return typeof t<"u"};Zr.isEmptyObject=function(t){return Object.keys(t).length===0};Zr.merge=function(t,e,n){if(e){let r=Object.keys(e),s=r.length;for(let i=0;i<s;i++)n==="strict"?t[r[i]]=[e[r[i]]]:t[r[i]]=e[r[i]]}};Zr.getValue=function(t){return Zr.isExist(t)?t:""};Zr.isName=_U;Zr.getAllMatches=yU;Zr.nameRegexp=zI});var w_=Sn(QI=>{"use strict";var v_=Oh(),bU={allowBooleanAttributes:!1,unpairedTags:[]};QI.validate=function(t,e){e=Object.assign({},bU,e);let n=[],r=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=KI(t,i),i.err)return i}else if(t[i]==="<"){let o=i;if(i++,t[i]==="!"){i=HI(t,i);continue}else{let a=!1;t[i]==="/"&&(a=!0,i++);let c="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)c+=t[i];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),i--),!TU(c)){let f;return c.trim().length===0?f="Invalid space after '<'.":f="Tag '"+c+"' is an invalid name.",at("InvalidTag",f,cn(t,i))}let l=wU(t,i);if(l===!1)return at("InvalidAttr","Attributes for '"+c+"' have open quote.",cn(t,i));let d=l.value;if(i=l.index,d[d.length-1]==="/"){let f=i-d.length;d=d.substring(0,d.length-1);let m=WI(d,e);if(m===!0)r=!0;else return at(m.err.code,m.err.msg,cn(t,f+m.err.line))}else if(a)if(l.tagClosed){if(d.trim().length>0)return at("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",cn(t,o));if(n.length===0)return at("InvalidTag","Closing tag '"+c+"' has not been opened.",cn(t,o));{let f=n.pop();if(c!==f.tagName){let m=cn(t,f.tagStartPos);return at("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+m.line+", col "+m.col+") instead of closing tag '"+c+"'.",cn(t,o))}n.length==0&&(s=!0)}}else return at("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",cn(t,i));else{let f=WI(d,e);if(f!==!0)return at(f.err.code,f.err.msg,cn(t,i-d.length+f.err.line));if(s===!0)return at("InvalidXml","Multiple possible root nodes found.",cn(t,i));e.unpairedTags.indexOf(c)!==-1||n.push({tagName:c,tagStartPos:o}),r=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=HI(t,i);continue}else if(t[i+1]==="?"){if(i=KI(t,++i),i.err)return i}else break;else if(t[i]==="&"){let f=AU(t,i);if(f==-1)return at("InvalidChar","char '&' is not expected.",cn(t,i));i=f}else if(s===!0&&!GI(t[i]))return at("InvalidXml","Extra text at the end",cn(t,i));t[i]==="<"&&i--}}else{if(GI(t[i]))continue;return at("InvalidChar","char '"+t[i]+"' is not expected.",cn(t,i))}if(r){if(n.length==1)return at("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",cn(t,n[0].tagStartPos));if(n.length>0)return at("InvalidXml","Invalid '"+JSON.stringify(n.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return at("InvalidXml","Start tag expected.",1);return!0};function GI(t){return t===" "||t==="	"||t===`
`||t==="\r"}function KI(t,e){let n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let r=t.substr(n,e-n);if(e>5&&r==="xml")return at("InvalidXml","XML declaration allowed only at the start of the document.",cn(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function HI(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}var EU='"',vU="'";function wU(t,e){let n="",r="",s=!1;for(;e<t.length;e++){if(t[e]===EU||t[e]===vU)r===""?r=t[e]:r!==t[e]||(r="");else if(t[e]===">"&&r===""){s=!0;break}n+=t[e]}return r!==""?!1:{value:n,index:e,tagClosed:s}}var xU=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function WI(t,e){let n=v_.getAllMatches(t,xU),r={};for(let s=0;s<n.length;s++){if(n[s][1].length===0)return at("InvalidAttr","Attribute '"+n[s][2]+"' has no space in starting.",Sl(n[s]));if(n[s][3]!==void 0&&n[s][4]===void 0)return at("InvalidAttr","Attribute '"+n[s][2]+"' is without value.",Sl(n[s]));if(n[s][3]===void 0&&!e.allowBooleanAttributes)return at("InvalidAttr","boolean attribute '"+n[s][2]+"' is not allowed.",Sl(n[s]));let i=n[s][2];if(!CU(i))return at("InvalidAttr","Attribute '"+i+"' is an invalid name.",Sl(n[s]));if(!r.hasOwnProperty(i))r[i]=1;else return at("InvalidAttr","Attribute '"+i+"' is repeated.",Sl(n[s]))}return!0}function SU(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function AU(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,SU(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function at(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function CU(t){return v_.isName(t)}function TU(t){return v_.isName(t)}function cn(t,e){let n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function Sl(t){return t.startIndex+t[1].length}});var XI=Sn(x_=>{"use strict";var YI={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t}},IU=function(t){return Object.assign({},YI,t)};x_.buildOptions=IU;x_.defaultOptions=YI});var JI=Sn((Wle,ZI)=>{"use strict";var S_=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}};ZI.exports=S_});var tR=Sn((Qle,eR)=>{"use strict";var RU=Oh();function DU(t,e){let n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let r=1,s=!1,i=!1,o="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(s&&NU(t,e))e+=7,[entityName,val,e]=kU(t,e+1),val.indexOf("&")===-1&&(n[LU(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&OU(t,e))e+=8;else if(s&&MU(t,e))e+=8;else if(s&&FU(t,e))e+=9;else if(PU)i=!0;else throw new Error("Invalid DOCTYPE");r++,o=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,r--):r--,r===0)break}else t[e]==="["?s=!0:o+=t[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}function kU(t,e){let n="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)n+=t[e];if(n=n.trim(),n.indexOf(" ")!==-1)throw new Error("External entites are not supported");let r=t[e++],s="";for(;e<t.length&&t[e]!==r;e++)s+=t[e];return[n,s,e]}function PU(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function NU(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function OU(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function MU(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function FU(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function LU(t){if(RU.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}eR.exports=DU});var rR=Sn((Yle,nR)=>{"use strict";var BU=/^[-+]?0x[a-fA-F0-9]+$/,VU=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var UU={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function jU(t,e={}){if(e=Object.assign({},UU,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(e.hex&&BU.test(n))return Number.parseInt(n,16);{let r=VU.exec(n);if(r){let s=r[1],i=r[2],o=qU(r[3]),a=r[4]||r[6];if(!e.leadingZeros&&i.length>0&&s&&n[2]!==".")return t;if(!e.leadingZeros&&i.length>0&&!s&&n[1]!==".")return t;{let c=Number(n),l=""+c;return l.search(/[eE]/)!==-1||a?e.eNotation?c:t:n.indexOf(".")!==-1?l==="0"&&o===""||l===o||s&&l==="-"+o?c:t:i?o===l||s+o===l?c:t:n===l||n===s+l?c:t}}else return t}}function qU(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}nR.exports=jU});var oR=Sn((Xle,iR)=>{"use strict";var sR=Oh(),Al=JI(),$U=tR(),zU=rR(),A_=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=GU,this.parseXml=YU,this.parseTextData=KU,this.resolveNameSpace=HU,this.buildAttributesMap=QU,this.isItStopNode=e3,this.replaceEntitiesValue=ZU,this.readStopNodeData=n3,this.saveTextToParentTag=JU,this.addChild=XU}};function GU(t){let e=Object.keys(t);for(let n=0;n<e.length;n++){let r=e[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:t[r]}}}function KU(t,e,n,r,s,i,o){if(t!==void 0&&(this.options.trimValues&&!r&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));let a=this.options.tagValueProcessor(e,t,n,s,i);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?T_(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?T_(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function HU(t){if(this.options.removeNSPrefix){let e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}var WU=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function QU(t,e,n){if(!this.options.ignoreAttributes&&typeof t=="string"){let r=sR.getAllMatches(t,WU),s=r.length,i={};for(let o=0;o<s;o++){let a=this.resolveNameSpace(r[o][1]),c=r[o][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let d=this.options.attributeValueProcessor(a,c,e);d==null?i[l]=c:typeof d!=typeof c||d!==c?i[l]=d:i[l]=T_(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[l]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){let o={};return o[this.options.attributesGroupName]=i,o}return i}}var YU=function(t){t=t.replace(/\r\n?/g,`
`);let e=new Al("!xml"),n=e,r="",s="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){let a=Ui(t,">",i,"Closing Tag is not closed."),c=t.substring(i+2,a).trim();if(this.options.removeNSPrefix){let f=c.indexOf(":");f!==-1&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&(r=this.saveTextToParentTag(r,n,s));let l=s.substring(s.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let d=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(d=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):d=s.lastIndexOf("."),s=s.substring(0,d),n=this.tagsNodeStack.pop(),r="",i=a}else if(t[i+1]==="?"){let a=C_(t,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new Al(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(n,c,s)}i=a.closeIndex+1}else if(t.substr(i+1,3)==="!--"){let a=Ui(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){let c=t.substring(i+4,a-2);r=this.saveTextToParentTag(r,n,s),n.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}i=a}else if(t.substr(i+1,2)==="!D"){let a=$U(t,i);this.docTypeEntities=a.entities,i=a.i}else if(t.substr(i+1,2)==="!["){let a=Ui(t,"]]>",i,"CDATA is not closed.")-2,c=t.substring(i+9,a);r=this.saveTextToParentTag(r,n,s);let l=this.parseTextData(c,n.tagname,s,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]):n.add(this.options.textNodeName,l),i=a+2}else{let a=C_(t,i,this.options.removeNSPrefix),c=a.tagName,l=a.rawTagName,d=a.tagExp,f=a.attrExpPresent,m=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,s,!1));let g=n;if(g&&this.options.unpairedTags.indexOf(g.tagname)!==-1&&(n=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),c!==e.tagname&&(s+=s?"."+c:c),this.isItStopNode(this.options.stopNodes,s,c)){let b="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)c[c.length-1]==="/"?(c=c.substr(0,c.length-1),s=s.substr(0,s.length-1),d=c):d=d.substr(0,d.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)i=a.closeIndex;else{let x=this.readStopNodeData(t,l,m+1);if(!x)throw new Error(`Unexpected end of ${l}`);i=x.i,b=x.tagContent}let C=new Al(c);c!==d&&f&&(C[":@"]=this.buildAttributesMap(d,s,c)),b&&(b=this.parseTextData(b,c,s,!0,f,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),C.add(this.options.textNodeName,b),this.addChild(n,C,s)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),s=s.substr(0,s.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let b=new Al(c);c!==d&&f&&(b[":@"]=this.buildAttributesMap(d,s,c)),this.addChild(n,b,s),s=s.substr(0,s.lastIndexOf("."))}else{let b=new Al(c);this.tagsNodeStack.push(n),c!==d&&f&&(b[":@"]=this.buildAttributesMap(d,s,c)),this.addChild(n,b,s),n=b}r="",i=m}}else r+=t[i];return e.child};function XU(t,e,n){let r=this.options.updateTag(e.tagname,n,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),t.addChild(e))}var ZU=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){let n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function JU(t,e,n,r){return t&&(r===void 0&&(r=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function e3(t,e,n){let r="*."+n;for(let s in t){let i=t[s];if(r===i||e===i)return!0}return!1}function t3(t,e,n=">"){let r,s="";for(let i=e;i<t.length;i++){let o=t[i];if(r)o===r&&(r="");else if(o==='"'||o==="'")r=o;else if(o===n[0])if(n[1]){if(t[i+1]===n[1])return{data:s,index:i}}else return{data:s,index:i};else o==="	"&&(o=" ");s+=o}}function Ui(t,e,n,r){let s=t.indexOf(e,n);if(s===-1)throw new Error(r);return s+e.length-1}function C_(t,e,n,r=">"){let s=t3(t,e+1,r);if(!s)return;let i=s.data,o=s.index,a=i.search(/\s/),c=i,l=!0;a!==-1&&(c=i.substring(0,a),i=i.substring(a+1).trimStart());let d=c;if(n){let f=c.indexOf(":");f!==-1&&(c=c.substr(f+1),l=c!==s.data.substr(f+1))}return{tagName:c,tagExp:i,closeIndex:o,attrExpPresent:l,rawTagName:d}}function n3(t,e,n){let r=n,s=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){let i=Ui(t,">",n,`${e} is not closed`);if(t.substring(n+2,i).trim()===e&&(s--,s===0))return{tagContent:t.substring(r,n),i};n=i}else if(t[n+1]==="?")n=Ui(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=Ui(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=Ui(t,"]]>",n,"StopNode is not closed.")-2;else{let i=C_(t,n,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&s++,n=i.closeIndex)}}function T_(t,e,n){if(e&&typeof t=="string"){let r=t.trim();return r==="true"?!0:r==="false"?!1:zU(t,n)}else return sR.isExist(t)?t:""}iR.exports=A_});var lR=Sn(cR=>{"use strict";function r3(t,e){return aR(t,e)}function aR(t,e,n){let r,s={};for(let i=0;i<t.length;i++){let o=t[i],a=s3(o),c="";if(n===void 0?c=a:c=n+"."+a,a===e.textNodeName)r===void 0?r=o[a]:r+=""+o[a];else{if(a===void 0)continue;if(o[a]){let l=aR(o[a],e,c),d=o3(l,e);o[":@"]?i3(l,o[":@"],c,e):Object.keys(l).length===1&&l[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?l=l[e.textNodeName]:Object.keys(l).length===0&&(e.alwaysCreateTextNode?l[e.textNodeName]="":l=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(l)):e.isArray(a,c,d)?s[a]=[l]:s[a]=l}}}return typeof r=="string"?r.length>0&&(s[e.textNodeName]=r):r!==void 0&&(s[e.textNodeName]=r),s}function s3(t){let e=Object.keys(t);for(let n=0;n<e.length;n++){let r=e[n];if(r!==":@")return r}}function i3(t,e,n,r){if(e){let s=Object.keys(e),i=s.length;for(let o=0;o<i;o++){let a=s[o];r.isArray(a,n+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function o3(t,e){let{textNodeName:n}=e,r=Object.keys(t).length;return!!(r===0||r===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}cR.prettify=r3});var dR=Sn((Jle,uR)=>{"use strict";var{buildOptions:a3}=XI(),c3=oR(),{prettify:l3}=lR(),u3=w_(),I_=class{constructor(e){this.externalEntities={},this.options=a3(e)}parse(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});let i=u3.validate(e,n);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}let r=new c3(this.options);r.addExternalEntities(this.externalEntities);let s=r.parseXml(e);return this.options.preserveOrder||s===void 0?s:l3(s,this.options)}addEntity(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}};uR.exports=I_});var gR=Sn((eue,pR)=>{"use strict";var d3=`
`;function h3(t,e){let n="";return e.format&&e.indentBy.length>0&&(n=d3),fR(t,e,"",n)}function fR(t,e,n,r){let s="",i=!1;for(let o=0;o<t.length;o++){let a=t[o],c=f3(a);if(c===void 0)continue;let l="";if(n.length===0?l=c:l=`${n}.${c}`,c===e.textNodeName){let b=a[c];m3(l,e)||(b=e.tagValueProcessor(c,b),b=mR(b,e)),i&&(s+=r),s+=b,i=!1;continue}else if(c===e.cdataPropName){i&&(s+=r),s+=`<![CDATA[${a[c][0][e.textNodeName]}]]>`,i=!1;continue}else if(c===e.commentPropName){s+=r+`<!--${a[c][0][e.textNodeName]}-->`,i=!0;continue}else if(c[0]==="?"){let b=hR(a[":@"],e),C=c==="?xml"?"":r,x=a[c][0][e.textNodeName];x=x.length!==0?" "+x:"",s+=C+`<${c}${x}${b}?>`,i=!0;continue}let d=r;d!==""&&(d+=e.indentBy);let f=hR(a[":@"],e),m=r+`<${c}${f}`,g=fR(a[c],e,l,d);e.unpairedTags.indexOf(c)!==-1?e.suppressUnpairedNode?s+=m+">":s+=m+"/>":(!g||g.length===0)&&e.suppressEmptyNode?s+=m+"/>":g&&g.endsWith(">")?s+=m+`>${g}${r}</${c}>`:(s+=m+">",g&&r!==""&&(g.includes("/>")||g.includes("</"))?s+=r+e.indentBy+g+r:s+=g,s+=`</${c}>`),i=!0}return s}function f3(t){let e=Object.keys(t);for(let n=0;n<e.length;n++){let r=e[n];if(t.hasOwnProperty(r)&&r!==":@")return r}}function hR(t,e){let n="";if(t&&!e.ignoreAttributes)for(let r in t){if(!t.hasOwnProperty(r))continue;let s=e.attributeValueProcessor(r,t[r]);s=mR(s,e),s===!0&&e.suppressBooleanAttributes?n+=` ${r.substr(e.attributeNamePrefix.length)}`:n+=` ${r.substr(e.attributeNamePrefix.length)}="${s}"`}return n}function m3(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let n=t.substr(t.lastIndexOf(".")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===t||e.stopNodes[r]==="*."+n)return!0;return!1}function mR(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){let r=e.entities[n];t=t.replace(r.regex,r.val)}return t}pR.exports=h3});var _R=Sn((tue,yR)=>{"use strict";var p3=gR(),g3={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Os(t){this.options=Object.assign({},g3,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=b3),this.processTextOrObjNode=y3,this.options.format?(this.indentate=_3,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Os.prototype.build=function(t){return this.options.preserveOrder?p3(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Os.prototype.j2x=function(t,e){let n="",r="";for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s))if(typeof t[s]>"u")this.isAttribute(s)&&(r+="");else if(t[s]===null)this.isAttribute(s)?r+="":s[0]==="?"?r+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)r+=this.buildTextValNode(t[s],s,"",e);else if(typeof t[s]!="object"){let i=this.isAttribute(s);if(i)n+=this.buildAttrPairStr(i,""+t[s]);else if(s===this.options.textNodeName){let o=this.options.tagValueProcessor(s,""+t[s]);r+=this.replaceEntitiesValue(o)}else r+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){let i=t[s].length,o="",a="";for(let c=0;c<i;c++){let l=t[s][c];if(!(typeof l>"u"))if(l===null)s[0]==="?"?r+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(typeof l=="object")if(this.options.oneListGroup){let d=this.j2x(l,e+1);o+=d.val,this.options.attributesGroupName&&l.hasOwnProperty(this.options.attributesGroupName)&&(a+=d.attrStr)}else o+=this.processTextOrObjNode(l,s,e);else if(this.options.oneListGroup){let d=this.options.tagValueProcessor(s,l);d=this.replaceEntitiesValue(d),o+=d}else o+=this.buildTextValNode(l,s,"",e)}this.options.oneListGroup&&(o=this.buildObjectNode(o,s,a,e)),r+=o}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){let i=Object.keys(t[s]),o=i.length;for(let a=0;a<o;a++)n+=this.buildAttrPairStr(i[a],""+t[s][i[a]])}else r+=this.processTextOrObjNode(t[s],s,e);return{attrStr:n,val:r}};Os.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function y3(t,e,n){let r=this.j2x(t,n+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,r.attrStr,n):this.buildObjectNode(r.val,e,r.attrStr,n)}Os.prototype.buildObjectNode=function(t,e,n,r){if(t==="")return e[0]==="?"?this.indentate(r)+"<"+e+n+"?"+this.tagEndChar:this.indentate(r)+"<"+e+n+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",s=""),(n||n==="")&&t.indexOf("<")===-1?this.indentate(r)+"<"+e+n+i+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(r)+`<!--${t}-->`+this.newLine:this.indentate(r)+"<"+e+n+i+this.tagEndChar+t+this.indentate(r)+s}};Os.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Os.prototype.buildTextValNode=function(t,e,n,r){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(r)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(r)+"<"+e+n+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(r)+"<"+e+n+this.closeTag(e)+this.tagEndChar:this.indentate(r)+"<"+e+n+">"+s+"</"+e+this.tagEndChar}};Os.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t};function _3(t){return this.options.indentBy.repeat(t)}function b3(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}yR.exports=Os});var ER=Sn((nue,bR)=>{"use strict";var E3=w_(),v3=dR(),w3=_R();bR.exports={XMLParser:v3,XMLValidator:E3,XMLBuilder:w3}});var vb=Sn((Dl,Eb)=>{"use strict";(function(t,e){typeof Dl=="object"&&typeof Eb=="object"?Eb.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Dl=="object"?Dl.bowser=e():t.bowser=e()})(Dl,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(r,s,i){n.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:i})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,s){if(1&s&&(r=n(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var o in r)n.d(i,o,(function(a){return r[a]}).bind(null,o));return i},n.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(s,"a",s),s},n.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},n.p="",n(n.s=90)}({17:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r=n(18),s=function(){function i(){}return i.getFirstMatch=function(o,a){var c=a.match(o);return c&&c.length>0&&c[1]||""},i.getSecondMatch=function(o,a){var c=a.match(o);return c&&c.length>1&&c[2]||""},i.matchAndReturnConst=function(o,a,c){if(o.test(a))return c},i.getWindowsVersionName=function(o){switch(o){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},i.getMacOSVersionName=function(o){var a=o.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},i.getAndroidVersionName=function(o){var a=o.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},i.getVersionPrecision=function(o){return o.split(".").length},i.compareVersions=function(o,a,c){c===void 0&&(c=!1);var l=i.getVersionPrecision(o),d=i.getVersionPrecision(a),f=Math.max(l,d),m=0,g=i.map([o,a],function(b){var C=f-i.getVersionPrecision(b),x=b+new Array(C+1).join(".0");return i.map(x.split("."),function(N){return new Array(20-N.length).join("0")+N}).reverse()});for(c&&(m=f-Math.min(l,d)),f-=1;f>=m;){if(g[0][f]>g[1][f])return 1;if(g[0][f]===g[1][f]){if(f===m)return 0;f-=1}else if(g[0][f]<g[1][f])return-1}},i.map=function(o,a){var c,l=[];if(Array.prototype.map)return Array.prototype.map.call(o,a);for(c=0;c<o.length;c+=1)l.push(a(o[c]));return l},i.find=function(o,a){var c,l;if(Array.prototype.find)return Array.prototype.find.call(o,a);for(c=0,l=o.length;c<l;c+=1){var d=o[c];if(a(d,c))return d}},i.assign=function(o){for(var a,c,l=o,d=arguments.length,f=new Array(d>1?d-1:0),m=1;m<d;m++)f[m-1]=arguments[m];if(Object.assign)return Object.assign.apply(Object,[o].concat(f));var g=function(){var b=f[a];typeof b=="object"&&b!==null&&Object.keys(b).forEach(function(C){l[C]=b[C]})};for(a=0,c=f.length;a<c;a+=1)g();return o},i.getBrowserAlias=function(o){return r.BROWSER_ALIASES_MAP[o]},i.getBrowserTypeByAlias=function(o){return r.BROWSER_MAP[o]||""},i}();e.default=s,t.exports=e.default},18:function(t,e,n){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,s=(r=n(91))&&r.__esModule?r:{default:r},i=n(18);function o(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}var a=function(){function c(){}var l,d,f;return c.getParser=function(m,g){if(g===void 0&&(g=!1),typeof m!="string")throw new Error("UserAgent should be a string");return new s.default(m,g)},c.parse=function(m){return new s.default(m).getResult()},l=c,f=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(d=null)&&o(l.prototype,d),f&&o(l,f),c}();e.default=a,t.exports=e.default},91:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r=c(n(92)),s=c(n(93)),i=c(n(94)),o=c(n(95)),a=c(n(17));function c(d){return d&&d.__esModule?d:{default:d}}var l=function(){function d(m,g){if(g===void 0&&(g=!1),m==null||m==="")throw new Error("UserAgent parameter can't be empty");this._ua=m,this.parsedResult={},g!==!0&&this.parse()}var f=d.prototype;return f.getUA=function(){return this._ua},f.test=function(m){return m.test(this._ua)},f.parseBrowser=function(){var m=this;this.parsedResult.browser={};var g=a.default.find(r.default,function(b){if(typeof b.test=="function")return b.test(m);if(b.test instanceof Array)return b.test.some(function(C){return m.test(C)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.browser=g.describe(this.getUA())),this.parsedResult.browser},f.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},f.getBrowserName=function(m){return m?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},f.getBrowserVersion=function(){return this.getBrowser().version},f.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},f.parseOS=function(){var m=this;this.parsedResult.os={};var g=a.default.find(s.default,function(b){if(typeof b.test=="function")return b.test(m);if(b.test instanceof Array)return b.test.some(function(C){return m.test(C)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.os=g.describe(this.getUA())),this.parsedResult.os},f.getOSName=function(m){var g=this.getOS().name;return m?String(g).toLowerCase()||"":g||""},f.getOSVersion=function(){return this.getOS().version},f.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},f.getPlatformType=function(m){m===void 0&&(m=!1);var g=this.getPlatform().type;return m?String(g).toLowerCase()||"":g||""},f.parsePlatform=function(){var m=this;this.parsedResult.platform={};var g=a.default.find(i.default,function(b){if(typeof b.test=="function")return b.test(m);if(b.test instanceof Array)return b.test.some(function(C){return m.test(C)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.platform=g.describe(this.getUA())),this.parsedResult.platform},f.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},f.getEngineName=function(m){return m?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},f.parseEngine=function(){var m=this;this.parsedResult.engine={};var g=a.default.find(o.default,function(b){if(typeof b.test=="function")return b.test(m);if(b.test instanceof Array)return b.test.some(function(C){return m.test(C)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.engine=g.describe(this.getUA())),this.parsedResult.engine},f.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},f.getResult=function(){return a.default.assign({},this.parsedResult)},f.satisfies=function(m){var g=this,b={},C=0,x={},N=0;if(Object.keys(m).forEach(function(S){var I=m[S];typeof I=="string"?(x[S]=I,N+=1):typeof I=="object"&&(b[S]=I,C+=1)}),C>0){var U=Object.keys(b),j=a.default.find(U,function(S){return g.isOS(S)});if(j){var H=this.satisfies(b[j]);if(H!==void 0)return H}var ae=a.default.find(U,function(S){return g.isPlatform(S)});if(ae){var le=this.satisfies(b[ae]);if(le!==void 0)return le}}if(N>0){var T=Object.keys(x),w=a.default.find(T,function(S){return g.isBrowser(S,!0)});if(w!==void 0)return this.compareVersion(x[w])}},f.isBrowser=function(m,g){g===void 0&&(g=!1);var b=this.getBrowserName().toLowerCase(),C=m.toLowerCase(),x=a.default.getBrowserTypeByAlias(C);return g&&x&&(C=x.toLowerCase()),C===b},f.compareVersion=function(m){var g=[0],b=m,C=!1,x=this.getBrowserVersion();if(typeof x=="string")return m[0]===">"||m[0]==="<"?(b=m.substr(1),m[1]==="="?(C=!0,b=m.substr(2)):g=[],m[0]===">"?g.push(1):g.push(-1)):m[0]==="="?b=m.substr(1):m[0]==="~"&&(C=!0,b=m.substr(1)),g.indexOf(a.default.compareVersions(x,b,C))>-1},f.isOS=function(m){return this.getOSName(!0)===String(m).toLowerCase()},f.isPlatform=function(m){return this.getPlatformType(!0)===String(m).toLowerCase()},f.isEngine=function(m){return this.getEngineName(!0)===String(m).toLowerCase()},f.is=function(m,g){return g===void 0&&(g=!1),this.isBrowser(m,g)||this.isOS(m)||this.isPlatform(m)},f.some=function(m){var g=this;return m===void 0&&(m=[]),m.some(function(b){return g.is(b)})},d}();e.default=l,t.exports=e.default},92:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,s=(r=n(17))&&r.__esModule?r:{default:r},i=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(a){var c={name:"Googlebot"},l=s.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/opera/i],describe:function(a){var c={name:"Opera"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opr\/|opios/i],describe:function(a){var c={name:"Opera"},l=s.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/SamsungBrowser/i],describe:function(a){var c={name:"Samsung Internet for Android"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Whale/i],describe:function(a){var c={name:"NAVER Whale Browser"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MZBrowser/i],describe:function(a){var c={name:"MZ Browser"},l=s.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/focus/i],describe:function(a){var c={name:"Focus"},l=s.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/swing/i],describe:function(a){var c={name:"Swing"},l=s.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/coast/i],describe:function(a){var c={name:"Opera Coast"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var c={name:"Opera Touch"},l=s.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/yabrowser/i],describe:function(a){var c={name:"Yandex Browser"},l=s.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/ucbrowser/i],describe:function(a){var c={name:"UC Browser"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Maxthon|mxios/i],describe:function(a){var c={name:"Maxthon"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/epiphany/i],describe:function(a){var c={name:"Epiphany"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/puffin/i],describe:function(a){var c={name:"Puffin"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sleipnir/i],describe:function(a){var c={name:"Sleipnir"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/k-meleon/i],describe:function(a){var c={name:"K-Meleon"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/micromessenger/i],describe:function(a){var c={name:"WeChat"},l=s.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/qqbrowser/i],describe:function(a){var c={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},l=s.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/msie|trident/i],describe:function(a){var c={name:"Internet Explorer"},l=s.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/\sedg\//i],describe:function(a){var c={name:"Microsoft Edge"},l=s.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/edg([ea]|ios)/i],describe:function(a){var c={name:"Microsoft Edge"},l=s.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/vivaldi/i],describe:function(a){var c={name:"Vivaldi"},l=s.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/seamonkey/i],describe:function(a){var c={name:"SeaMonkey"},l=s.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sailfish/i],describe:function(a){var c={name:"Sailfish"},l=s.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return l&&(c.version=l),c}},{test:[/silk/i],describe:function(a){var c={name:"Amazon Silk"},l=s.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/phantom/i],describe:function(a){var c={name:"PhantomJS"},l=s.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/slimerjs/i],describe:function(a){var c={name:"SlimerJS"},l=s.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c={name:"BlackBerry"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c={name:"WebOS Browser"},l=s.default.getFirstMatch(i,a)||s.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/bada/i],describe:function(a){var c={name:"Bada"},l=s.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/tizen/i],describe:function(a){var c={name:"Tizen"},l=s.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/qupzilla/i],describe:function(a){var c={name:"QupZilla"},l=s.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var c={name:"Firefox"},l=s.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/electron/i],describe:function(a){var c={name:"Electron"},l=s.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MiuiBrowser/i],describe:function(a){var c={name:"Miui"},l=s.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/chromium/i],describe:function(a){var c={name:"Chromium"},l=s.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/chrome|crios|crmo/i],describe:function(a){var c={name:"Chrome"},l=s.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/GSA/i],describe:function(a){var c={name:"Google Search"},l=s.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c={name:"Android Browser"},l=s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/playstation 4/i],describe:function(a){var c={name:"PlayStation 4"},l=s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/safari|applewebkit/i],describe:function(a){var c={name:"Safari"},l=s.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/.*/i],describe:function(a){var c=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:s.default.getFirstMatch(c,a),version:s.default.getSecondMatch(c,a)}}}];e.default=o,t.exports=e.default},93:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,s=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),o=[{test:[/Roku\/DVP/],describe:function(a){var c=s.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:i.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(a){var c=s.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(a){var c=s.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),l=s.default.getWindowsVersionName(c);return{name:i.OS_MAP.Windows,version:c,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var c={name:i.OS_MAP.iOS},l=s.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return l&&(c.version=l),c}},{test:[/macintosh/i],describe:function(a){var c=s.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),l=s.default.getMacOSVersionName(c),d={name:i.OS_MAP.MacOS,version:c};return l&&(d.versionName=l),d}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var c=s.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:c}}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c=s.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),l=s.default.getAndroidVersionName(c),d={name:i.OS_MAP.Android,version:c};return l&&(d.versionName=l),d}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c=s.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),l={name:i.OS_MAP.WebOS};return c&&c.length&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c=s.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||s.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||s.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:i.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(a){var c=s.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(a){var c=s.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var c=s.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.PlayStation4,version:c}}}];e.default=o,t.exports=e.default},94:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,s=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var c=s.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",l={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(l.model=c),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){var c=a.test(/ipod|iphone/i),l=a.test(/like (ipod|iphone)/i);return c&&!l},describe:function(a){var c=s.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var c=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,s=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),o=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:i.ENGINE_MAP.Blink};var c=s.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:i.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(a){var c={name:i.ENGINE_MAP.Trident},l=s.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){return a.test(/presto/i)},describe:function(a){var c={name:i.ENGINE_MAP.Presto},l=s.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=a.test(/gecko/i),l=a.test(/like gecko/i);return c&&!l},describe:function(a){var c={name:i.ENGINE_MAP.Gecko},l=s.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var c={name:i.ENGINE_MAP.WebKit},l=s.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}}];e.default=o,t.exports=e.default}})})});var Qc=class{},Cd=class{},xi=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let s=n.slice(0,r),i=s.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(s,i),this.headers.has(i)?this.headers.get(i).push(o):this.headers.set(i,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let s=(e.op==="a"?this.headers.get(n):void 0)||[];s.push(...r),this.headers.set(n,s);break;case"d":let i=e.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var mg=class{encodeKey(e){return uS(e)}encodeValue(e){return uS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function uF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(s=>{let i=s.indexOf("="),[o,a]=i==-1?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,i)),e.decodeValue(s.slice(i+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var dF=/%(\d[a-f0-9])/gi,hF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function uS(t){return encodeURIComponent(t).replace(dF,(e,n)=>hF[n]??e)}function Ad(t){return`${t}`}var As=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new mg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=uF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],s=Array.isArray(r)?r.map(Ad):[Ad(r)];this.map.set(n,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let s=e[r];Array.isArray(s)?s.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:s,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Ad(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],s=r.indexOf(Ad(e.value));s!==-1&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var pg=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function fF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function dS(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function hS(t){return typeof Blob<"u"&&t instanceof Blob}function fS(t){return typeof FormData<"u"&&t instanceof FormData}function mF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Wc=class t{constructor(e,n,r,s){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let i;if(fF(this.method)||s?(this.body=r!==void 0?r:null,i=s):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new xi,this.context??=new pg,!this.params)this.params=new As,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||dS(this.body)||hS(this.body)||fS(this.body)||mF(this.body)?this.body:this.body instanceof As?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||fS(this.body)?null:hS(this.body)?this.body.type||null:dS(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof As?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,i=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,g)=>m.set(g,e.setHeaders[g]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,g)=>m.set(g,e.setParams[g]),d)),new t(n,r,o,{params:d,headers:l,context:f,reportProgress:c,responseType:s,withCredentials:a,transferCache:i})}},zo=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(zo||{}),Yc=class{constructor(e,n=Rd.Ok,r="OK"){this.headers=e.headers||new xi,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},gg=class t extends Yc{constructor(e={}){super(e),this.type=zo.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Td=class t extends Yc{constructor(e={}){super(e),this.type=zo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Id=class extends Yc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Rd=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Rd||{});function fg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var yg=(()=>{let e=class e{constructor(r){this.handler=r}request(r,s,i={}){let o;if(r instanceof Wc)o=r;else{let l;i.headers instanceof xi?l=i.headers:l=new xi(i.headers);let d;i.params&&(i.params instanceof As?d=i.params:d=new As({fromObject:i.params})),o=new Wc(r,s,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=J(o).pipe(gs(l=>this.handler.handle(l)));if(r instanceof Wc||i.observe==="events")return a;let c=a.pipe(Ye(l=>l instanceof Td));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(ie(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ie(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ie(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ie(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(r,s={}){return this.request("DELETE",r,s)}get(r,s={}){return this.request("GET",r,s)}head(r,s={}){return this.request("HEAD",r,s)}jsonp(r,s){return this.request("JSONP",r,{params:new As().append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,s={}){return this.request("OPTIONS",r,s)}patch(r,s,i={}){return this.request("PATCH",r,fg(i,s))}post(r,s,i={}){return this.request("POST",r,fg(i,s))}put(r,s,i={}){return this.request("PUT",r,fg(i,s))}};e.\u0275fac=function(s){return new(s||e)(L(Qc))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function bS(t,e){return e(t)}function pF(t,e){return(n,r)=>e.intercept(n,{handle:s=>t(s,r)})}function gF(t,e,n){return(r,s)=>hr(n,()=>e(r,i=>t(i,s)))}var yF=new se(""),_g=new se(""),_F=new se(""),bF=new se("");function EF(){let t=null;return(e,n)=>{t===null&&(t=(Y(yF,{optional:!0})??[]).reduceRight(pF,bS));let r=Y(Vc),s=r.add();return t(e,n).pipe($r(()=>r.remove(s)))}}var mS=(()=>{let e=class e extends Qc{constructor(r,s){super(),this.backend=r,this.injector=s,this.chain=null,this.pendingTasks=Y(Vc);let i=Y(bF,{optional:!0});this.backend=i??r}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(_g),...this.injector.get(_F,[])]));this.chain=i.reduceRight((o,a)=>gF(o,a,this.injector),bS)}let s=this.pendingTasks.add();return this.chain(r,i=>this.backend.handle(i)).pipe($r(()=>this.pendingTasks.remove(s)))}};e.\u0275fac=function(s){return new(s||e)(L(Cd),L(bs))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();var vF=/^\)\]\}',?\n/;function wF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var pS=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new He(-2800,!1);let s=this.xhrFactory;return(s.\u0275loadImpl?Ve(s.\u0275loadImpl()):J(null)).pipe(xe(()=>new Ae(o=>{let a=s.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((x,N)=>a.setRequestHeader(x,N.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let x=r.detectContentTypeHeader();x!==null&&a.setRequestHeader("Content-Type",x)}if(r.responseType){let x=r.responseType.toLowerCase();a.responseType=x!=="json"?x:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let x=a.statusText||"OK",N=new xi(a.getAllResponseHeaders()),U=wF(a)||r.url;return l=new gg({headers:N,status:a.status,statusText:x,url:U}),l},f=()=>{let{headers:x,status:N,statusText:U,url:j}=d(),H=null;N!==Rd.NoContent&&(H=typeof a.response>"u"?a.responseText:a.response),N===0&&(N=H?Rd.Ok:0);let ae=N>=200&&N<300;if(r.responseType==="json"&&typeof H=="string"){let le=H;H=H.replace(vF,"");try{H=H!==""?JSON.parse(H):null}catch(T){H=le,ae&&(ae=!1,H={error:T,text:H})}}ae?(o.next(new Td({body:H,headers:x,status:N,statusText:U,url:j||void 0})),o.complete()):o.error(new Id({error:H,headers:x,status:N,statusText:U,url:j||void 0}))},m=x=>{let{url:N}=d(),U=new Id({error:x,status:a.status||0,statusText:a.statusText||"Unknown Error",url:N||void 0});o.error(U)},g=!1,b=x=>{g||(o.next(d()),g=!0);let N={type:zo.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(N.total=x.total),r.responseType==="text"&&a.responseText&&(N.partialText=a.responseText),o.next(N)},C=x=>{let N={type:zo.UploadProgress,loaded:x.loaded};x.lengthComputable&&(N.total=x.total),o.next(N)};return a.addEventListener("load",f),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),r.reportProgress&&(a.addEventListener("progress",b),c!==null&&a.upload&&a.upload.addEventListener("progress",C)),a.send(c),o.next({type:zo.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",f),a.removeEventListener("timeout",m),r.reportProgress&&(a.removeEventListener("progress",b),c!==null&&a.upload&&a.upload.removeEventListener("progress",C)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(s){return new(s||e)(L(wd))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),ES=new se(""),xF="XSRF-TOKEN",SF=new se("",{providedIn:"root",factory:()=>xF}),AF="X-XSRF-TOKEN",CF=new se("",{providedIn:"root",factory:()=>AF}),Dd=class{},TF=(()=>{let e=class e{constructor(r,s,i){this.doc=r,this.platform=s,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=vd(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(s){return new(s||e)(L(De),L(xt),L(SF))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function IF(t,e){let n=t.url.toLowerCase();if(!Y(ES)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=Y(Dd).getToken(),s=Y(CF);return r!=null&&!t.headers.has(s)&&(t=t.clone({headers:t.headers.set(s,r)})),e(t)}var vS=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(vS||{});function RF(t,e){return{\u0275kind:t,\u0275providers:e}}function DF(...t){let e=[yg,pS,mS,{provide:Qc,useExisting:mS},{provide:Cd,useExisting:pS},{provide:_g,useValue:IF,multi:!0},{provide:ES,useValue:!0},{provide:Dd,useClass:TF}];for(let n of t)e.push(...n.\u0275providers);return hd(e)}var gS=new se("");function kF(){return RF(vS.LegacyInterceptors,[{provide:gS,useFactory:EF},{provide:_g,useExisting:gS,multi:!0}])}var $z=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({providers:[DF(kF())]});let t=e;return t})();var vg=class extends Yx{constructor(){super(...arguments),this.supportsDOMEvents=!0}},wg=class t extends vg{static makeCurrent(){Qx(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=OF();return n==null?null:MF(n)}resetBaseElement(){Xc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vd(document.cookie,e)}},Xc=null;function OF(){return Xc=Xc||document.querySelector("base"),Xc?Xc.getAttribute("href"):null}function MF(t){return new URL(t,document.baseURI).pathname}var xg=class{addToWindow(e){_s.getAngularTestability=(r,s=!0)=>{let i=e.findTestabilityInTree(r,s);if(i==null)throw new He(5103,!1);return i},_s.getAllAngularTestabilities=()=>e.getAllTestabilities(),_s.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let s=_s.getAllAngularTestabilities(),i=s.length,o=function(){i--,i==0&&r()};s.forEach(a=>{a.whenStable(o)})};_s.frameworkStabilizers||(_s.frameworkStabilizers=[]),_s.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let s=e.getTestability(n);return s??(r?jc().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},FF=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Sg=new se(""),AS=(()=>{let e=class e{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(i=>{i.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,s,i){return this._findPluginFor(s).addEventListener(r,s,i)}getZone(){return this._zone}_findPluginFor(r){let s=this._eventNameToPlugin.get(r);if(s)return s;if(s=this._plugins.find(o=>o.supports(r)),!s)throw new He(5101,!1);return this._eventNameToPlugin.set(r,s),s}};e.\u0275fac=function(s){return new(s||e)(L(Sg),L(we))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),kd=class{constructor(e){this._doc=e}},bg="ng-app-id",CS=(()=>{let e=class e{constructor(r,s,i,o={}){this.doc=r,this.appId=s,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xs(o),this.resetHostNodes()}addStyles(r){for(let s of r)this.changeUsageCount(s,1)===1&&this.onStyleAdded(s)}removeStyles(r){for(let s of r)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(s=>s.remove()),r.clear());for(let s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let s of this.getAllStyles())this.addStyleToHost(r,s)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let s of this.hostNodes)this.addStyleToHost(s,r)}onStyleRemoved(r){let s=this.styleRef;s.get(r)?.elements?.forEach(i=>i.remove()),s.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${bg}="${this.appId}"]`);if(r?.length){let s=new Map;return r.forEach(i=>{i.textContent!=null&&s.set(i.textContent,i)}),s}return null}changeUsageCount(r,s){let i=this.styleRef;if(i.has(r)){let o=i.get(r);return o.usage+=s,o.usage}return i.set(r,{usage:s,elements:[]}),s}getStyleElement(r,s){let i=this.styleNodesInDOM,o=i?.get(s);if(o?.parentNode===r)return i.delete(s),o.removeAttribute(bg),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=s,this.platformIsServer&&a.setAttribute(bg,this.appId),r.appendChild(a),a}}addStyleToHost(r,s){let i=this.getStyleElement(r,s),o=this.styleRef,a=o.get(s)?.elements;a?a.push(i):o.set(s,{elements:[i],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(s){return new(s||e)(L(De),L(No),L(Lc,8),L(xt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Eg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cg=/%COMP%/g,TS="%COMP%",LF=`_nghost-${TS}`,BF=`_ngcontent-${TS}`,VF=!0,UF=new se("",{providedIn:"root",factory:()=>VF});function jF(t){return BF.replace(Cg,t)}function qF(t){return LF.replace(Cg,t)}function IS(t,e){return e.map(n=>n.replace(Cg,t))}var wS=(()=>{let e=class e{constructor(r,s,i,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=s,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=xs(c),this.defaultRenderer=new Zc(r,a,l,this.platformIsServer)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===Fc.ShadowDom&&(s=z(E({},s),{encapsulation:Fc.Emulated}));let i=this.getOrCreateRenderer(r,s);return i instanceof Pd?i.applyToHost(r):i instanceof Jc&&i.applyStyles(),i}getOrCreateRenderer(r,s){let i=this.rendererByCompId,o=i.get(s.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(s.encapsulation){case Fc.Emulated:o=new Pd(l,d,s,this.appId,f,a,c,m);break;case Fc.ShadowDom:return new Ag(l,d,r,s,a,c,this.nonce,m);default:o=new Jc(l,d,s,f,a,c,m);break}i.set(s.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(s){return new(s||e)(L(AS),L(CS),L(No),L(UF),L(De),L(xt),L(we),L(Lc))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Zc=class{constructor(e,n,r,s){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Eg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(xS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(xS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new He(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,s){if(s){n=s+":"+n;let i=Eg[s];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let s=Eg[r];s?e.removeAttributeNS(s,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,s){s&(Bc.DashCase|Bc.Important)?e.style.setProperty(n,r,s&Bc.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Bc.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=jc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function xS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ag=class extends Zc{constructor(e,n,r,s,i,o,a,c){super(e,i,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=IS(s.id,s.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Jc=class extends Zc{constructor(e,n,r,s,i,o,a,c){super(e,i,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=c?IS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Pd=class extends Jc{constructor(e,n,r,s,i,o,a,c){let l=s+"-"+r.id;super(e,n,r,i,o,a,c,l),this.contentAttr=jF(l),this.hostAttr=qF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},$F=(()=>{let e=class e extends kd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,i){return r.addEventListener(s,i,!1),()=>this.removeEventListener(r,s,i)}removeEventListener(r,s,i){return r.removeEventListener(s,i)}};e.\u0275fac=function(s){return new(s||e)(L(De))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),SS=["alt","control","meta","shift"],zF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},KF=(()=>{let e=class e extends kd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,s,i){let o=e.parseEventName(s),a=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jc().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let s=r.toLowerCase().split("."),i=s.shift();if(s.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(s.pop()),a="",c=s.indexOf("code");if(c>-1&&(s.splice(c,1),a="code."),SS.forEach(d=>{let f=s.indexOf(d);f>-1&&(s.splice(f,1),a+=d+".")}),a+=o,s.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(r,s){let i=zF[r.key]||r.key,o="";return s.indexOf("code.")>-1&&(i=r.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),SS.forEach(a=>{if(a!==i){let c=GF[a];c(r)&&(o+=a+".")}}),o+=i,o===s)}static eventCallback(r,s,i){return o=>{e.matchEventFullKeyCode(o,r)&&i.runGuarded(()=>s(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(s){return new(s||e)(L(De))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function HF(){wg.makeCurrent()}function WF(){return new yi}function QF(){return wx(document),document}var YF=[{provide:xt,useValue:nS},{provide:xx,useValue:HF,multi:!0},{provide:De,useFactory:QF,deps:[]}],t9=zx(Gx,"browser",YF),XF=new se(""),ZF=[{provide:gd,useClass:xg,deps:[]},{provide:$x,useClass:yd,deps:[we,ng,gd]},{provide:yd,useClass:yd,deps:[we,ng,gd]}],JF=[{provide:_x,useValue:"root"},{provide:yi,useFactory:WF,deps:[]},{provide:Sg,useClass:$F,multi:!0,deps:[De,we,xt]},{provide:Sg,useClass:KF,multi:!0,deps:[De]},wS,CS,AS,{provide:Ox,useExisting:wS},{provide:wd,useClass:FF,deps:[]},[]],n9=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:No,useValue:r.appId}]}}};e.\u0275fac=function(s){return new(s||e)(L(XF,12))},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({providers:[...JF,...ZF],imports:[qo,Kx]});let t=e;return t})(),r9=(()=>{let e=class e{constructor(r){this._doc=r,this._dom=jc()}addTag(r,s=!1){return r?this._getOrCreateElement(r,s):null}addTags(r,s=!1){return r?r.reduce((i,o)=>(o&&i.push(this._getOrCreateElement(o,s)),i),[]):[]}getTag(r){return r&&this._doc.querySelector(`meta[${r}]`)||null}getTags(r){if(!r)return[];let s=this._doc.querySelectorAll(`meta[${r}]`);return s?[].slice.call(s):[]}updateTag(r,s){if(!r)return null;s=s||this._parseSelector(r);let i=this.getTag(s);return i?this._setMetaElementAttributes(r,i):this._getOrCreateElement(r,!0)}removeTag(r){this.removeTagElement(this.getTag(r))}removeTagElement(r){r&&this._dom.remove(r)}_getOrCreateElement(r,s=!1){if(!s){let a=this._parseSelector(r),c=this.getTags(a).filter(l=>this._containsAttributes(r,l))[0];if(c!==void 0)return c}let i=this._dom.createElement("meta");return this._setMetaElementAttributes(r,i),this._doc.getElementsByTagName("head")[0].appendChild(i),i}_setMetaElementAttributes(r,s){return Object.keys(r).forEach(i=>s.setAttribute(this._getMetaKeyMap(i),r[i])),s}_parseSelector(r){let s=r.name?"name":"property";return`${s}="${r[s]}"`}_containsAttributes(r,s){return Object.keys(r).every(i=>s.getAttribute(this._getMetaKeyMap(i))===r[i])}_getMetaKeyMap(r){return eL[r]||r}};e.\u0275fac=function(s){return new(s||e)(L(De))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eL={httpEquiv:"http-equiv"},RS=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(s){return new(s||e)(L(De))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var el=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:function(s){let i=null;return s?i=new(s||e):i=L(tL),i},providedIn:"root"});let t=e;return t})(),tL=(()=>{let e=class e extends el{constructor(r){super(),this._doc=r}sanitize(r,s){if(s==null)return null;switch(r){case An.NONE:return s;case An.HTML:return Mo(s,"HTML")?Oo(s):Dx(this._doc,String(s)).toString();case An.STYLE:return Mo(s,"Style")?Oo(s):s;case An.SCRIPT:if(Mo(s,"Script"))return Oo(s);throw new He(5200,!1);case An.URL:return Mo(s,"URL")?Oo(s):Rx(String(s));case An.RESOURCE_URL:if(Mo(s,"ResourceURL"))return Oo(s);throw new He(5201,!1);default:throw new He(5202,!1)}}bypassSecurityTrustHtml(r){return Sx(r)}bypassSecurityTrustStyle(r){return Ax(r)}bypassSecurityTrustScript(r){return Cx(r)}bypassSecurityTrustUrl(r){return Tx(r)}bypassSecurityTrustResourceUrl(r){return Ix(r)}};e.\u0275fac=function(s){return new(s||e)(L(De))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ig(t){t||(bx(Ig),t=Y(vx));let e=new Ae(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(ys(e))}var nL=["container"],DS=new se("LottieOptions");function rL(){let t=Y(we),{player:e,useWebWorker:n}=Y(DS),r=t.runOutsideAngular(()=>e());return(_d(r)?Ve(r).pipe(ie(i=>i.default||i)):J(r)).pipe(ge(i=>i.useWebWorker?.(n)),Mc({bufferSize:1,refCount:!0}))}var sL=(()=>{let e=class e{constructor(){this.player$=rL().pipe(on(r=>iL(this.ngZone).pipe(ie(()=>r)))),this.ngZone=Y(we)}loadAnimation(r){return this.player$.pipe(ie(s=>this.createAnimationItem(s,r)))}resolveOptions(r,s){return Object.assign({container:s,renderer:"svg",loop:!0,autoplay:!0},r)}createAnimationItem(r,s){return this.ngZone.runOutsideAngular(()=>r.loadAnimation(s))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iL(t){return new Ae(e=>{let n=t.runOutsideAngular(()=>requestAnimationFrame(()=>{e.next(),e.complete()}));return()=>cancelAnimationFrame(n)})}function C9(t){return[{provide:DS,useValue:t}]}var oL=(()=>{let e=class e{constructor(){this.options=Po(null),this.containerClass=Po(null),this.styles=Po(null),this.animationCreated=this.getAnimationItem(),this.complete=this.awaitAnimationItemAndStartListening("complete"),this.loopComplete=this.awaitAnimationItemAndStartListening("loopComplete"),this.enterFrame=this.awaitAnimationItemAndStartListening("enterFrame"),this.segmentStart=this.awaitAnimationItemAndStartListening("segmentStart"),this.configReady=this.awaitAnimationItemAndStartListening("config_ready"),this.dataReady=this.awaitAnimationItemAndStartListening("data_ready"),this.domLoaded=this.awaitAnimationItemAndStartListening("DOMLoaded"),this.destroy=this.awaitAnimationItemAndStartListening("destroy"),this.error=this.awaitAnimationItemAndStartListening("error"),this.ngZone=Y(we),this.isBrowser=$o(Y(xt)),this.animationLoader=Y(sL),this.loadAnimation$=new Le,this.animationItem$=new Wt(null),this.setupLoadAnimationListener()}ngOnDestroy(){this.destroyAnimation()}loadAnimation(r,s){this.ngZone.runOutsideAngular(()=>this.loadAnimation$.next([r,s]))}getAnimationItem(){return Oc(()=>this.animationItem$).pipe(Ye(r=>r!==null))}awaitAnimationItemAndStartListening(r){return this.getAnimationItem().pipe(xe(s=>new Ae(i=>{this.ngZone.runOutsideAngular(()=>{s.addEventListener(r,o=>{this.ngZone.runOutsideAngular(()=>{i.next(o)})})})})))}setupLoadAnimationListener(){this.loadAnimation$.pipe(Ye(([s])=>this.isBrowser&&s.options!==void 0)).pipe(xe(([s,i])=>(this.destroyAnimation(),this.animationLoader.loadAnimation(this.animationLoader.resolveOptions(s.options.currentValue,i)))),Ig()).subscribe(s=>{this.ngZone.run(()=>this.animationItem$.next(s))})}destroyAnimation(){let r=this.animationItem$.getValue();r!==null&&(r.destroy(),this.animationItem$.next(null))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275dir=Qt({type:e,selectors:[["","lottie",""]],inputs:{options:[Me.SignalBased,"options"],containerClass:[Me.SignalBased,"containerClass"],styles:[Me.SignalBased,"styles"]},outputs:{animationCreated:"animationCreated",complete:"complete",loopComplete:"loopComplete",enterFrame:"enterFrame",segmentStart:"segmentStart",configReady:"configReady",dataReady:"dataReady",domLoaded:"domLoaded",destroy:"destroy",error:"error"}});let t=e;return t})();var T9=(()=>{let e=class e extends oL{constructor(){super(...arguments),this.width=Po(null),this.height=Po(null),this.container=null}ngOnChanges(r){super.loadAnimation(r,this.container.nativeElement)}};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=gi(e)))(i||e)}})(),e.\u0275cmp=Ln({type:e,selectors:[["ng-lottie"]],viewQuery:function(s,i){if(s&1&&jo(nL,7),s&2){let o;vs(o=ws())&&(i.container=o.first)}},inputs:{width:[Me.SignalBased,"width"],height:[Me.SignalBased,"height"]},standalone:!0,features:[Lo,zr,Vn],decls:2,vars:6,consts:[["container",""],[3,"ngStyle","ngClass"]],template:function(s,i){s&1&&gr(0,"div",1,0),s&2&&(md("width",i.width()||"100%")("height",i.height()||"100%"),mr("ngStyle",i.styles())("ngClass",i.containerClass()))},dependencies:[tS,eS],encapsulation:2,changeDetection:0});let t=e;return t})();var Dg;try{Dg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Dg=!1}var Tn=(()=>{let e=class e{constructor(r){this._platformId=r,this.isBrowser=this._platformId?$o(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Dg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(s){return new(s||e)(L(xt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var tl;function aL(){if(tl==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>tl=!0}))}finally{tl=tl||!1}return tl}function Go(t){return aL()?t:!!t.capture}var Si;function M9(){if(Si==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Si=!1,Si;if("scrollBehavior"in document.documentElement.style)Si=!0;else{let t=Element.prototype.scrollTo;t?Si=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Si=!1}}return Si}var Rg;function cL(){if(Rg==null){let t=typeof document<"u"?document.head:null;Rg=!!(t&&(t.createShadowRoot||t.attachShadow))}return Rg}function kS(t){if(cL()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function lL(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Cs(t){return t.composedPath?t.composedPath()[0]:t.target}function PS(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ko(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function uL(t){return t!=null&&`${t}`!="false"}function dL(t,e=0){return hL(t)?Number(t):e}function hL(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Pg(t){return Array.isArray(t)?t:[t]}function B9(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Ai(t){return t instanceof Tt?t.nativeElement:t}var fL=(()=>{let e=class e{create(r){return typeof MutationObserver>"u"?null:new MutationObserver(r)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var NS=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({providers:[fL]});let t=e;return t})();var OS=new Set,Ci,mL=(()=>{let e=class e{constructor(r,s){this._platform=r,this._nonce=s,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):gL}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&pL(r,this._nonce),this._matchMedia(r)}};e.\u0275fac=function(s){return new(s||e)(L(Tn),L(Lc,8))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pL(t,e){if(!OS.has(t))try{Ci||(Ci=document.createElement("style"),e&&Ci.setAttribute("nonce",e),Ci.setAttribute("type","text/css"),document.head.appendChild(Ci)),Ci.sheet&&(Ci.sheet.insertRule(`@media ${t} {body{ }}`,0),OS.add(t))}catch(n){console.error(n)}}function gL(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var FS=(()=>{let e=class e{constructor(r,s){this._mediaMatcher=r,this._zone=s,this._queries=new Map,this._destroySubject=new Le}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return MS(Pg(r)).some(i=>this._registerQuery(i).mql.matches)}observe(r){let i=MS(Pg(r)).map(a=>this._registerQuery(a).observable),o=lr(i);return o=od(o.pipe(Vt(1)),o.pipe(dd(1),cd(0))),o.pipe(ie(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);let s=this._mediaMatcher.matchMedia(r),o={observable:new Ae(a=>{let c=l=>this._zone.run(()=>a.next(l));return s.addListener(c),()=>{s.removeListener(c)}}).pipe(dr(s),ie(({matches:a})=>({query:r,matches:a})),ys(this._destroySubject)),mql:s};return this._queries.set(r,o),o}};e.\u0275fac=function(s){return new(s||e)(L(mL),L(we))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function MS(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var qS=" ";function ML(t,e,n){let r=Fd(t,e);n=n.trim(),!r.some(s=>s.trim()===n)&&(r.push(n),t.setAttribute(e,r.join(qS)))}function FL(t,e,n){let r=Fd(t,e);n=n.trim();let s=r.filter(i=>i!==n);s.length?t.setAttribute(e,s.join(qS)):t.removeAttribute(e)}function Fd(t,e){return t.getAttribute(e)?.match(/\S+/g)??[]}var $S="cdk-describedby-message",Nd="cdk-describedby-host",Mg=0,h5=(()=>{let e=class e{constructor(r,s){this._platform=s,this._messageRegistry=new Map,this._messagesContainer=null,this._id=`${Mg++}`,this._document=r,this._id=Y(No)+"-"+Mg++}describe(r,s,i){if(!this._canBeDescribed(r,s))return;let o=Ng(s,i);typeof s!="string"?(LS(s,this._id),this._messageRegistry.set(o,{messageElement:s,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(s,i),this._isElementDescribedByMessage(r,o)||this._addMessageReference(r,o)}removeDescription(r,s,i){if(!s||!this._isElementNode(r))return;let o=Ng(s,i);if(this._isElementDescribedByMessage(r,o)&&this._removeMessageReference(r,o),typeof s=="string"){let a=this._messageRegistry.get(o);a&&a.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let r=this._document.querySelectorAll(`[${Nd}="${this._id}"]`);for(let s=0;s<r.length;s++)this._removeCdkDescribedByReferenceIds(r[s]),r[s].removeAttribute(Nd);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(r,s){let i=this._document.createElement("div");LS(i,this._id),i.textContent=r,s&&i.setAttribute("role",s),this._createMessagesContainer(),this._messagesContainer.appendChild(i),this._messageRegistry.set(Ng(r,s),{messageElement:i,referenceCount:0})}_deleteMessageElement(r){this._messageRegistry.get(r)?.messageElement?.remove(),this._messageRegistry.delete(r)}_createMessagesContainer(){if(this._messagesContainer)return;let r="cdk-describedby-message-container",s=this._document.querySelectorAll(`.${r}[platform="server"]`);for(let o=0;o<s.length;o++)s[o].remove();let i=this._document.createElement("div");i.style.visibility="hidden",i.classList.add(r),i.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&i.setAttribute("platform","server"),this._document.body.appendChild(i),this._messagesContainer=i}_removeCdkDescribedByReferenceIds(r){let s=Fd(r,"aria-describedby").filter(i=>i.indexOf($S)!=0);r.setAttribute("aria-describedby",s.join(" "))}_addMessageReference(r,s){let i=this._messageRegistry.get(s);ML(r,"aria-describedby",i.messageElement.id),r.setAttribute(Nd,this._id),i.referenceCount++}_removeMessageReference(r,s){let i=this._messageRegistry.get(s);i.referenceCount--,FL(r,"aria-describedby",i.messageElement.id),r.removeAttribute(Nd)}_isElementDescribedByMessage(r,s){let i=Fd(r,"aria-describedby"),o=this._messageRegistry.get(s),a=o&&o.messageElement.id;return!!a&&i.indexOf(a)!=-1}_canBeDescribed(r,s){if(!this._isElementNode(r))return!1;if(s&&typeof s=="object")return!0;let i=s==null?"":`${s}`.trim(),o=r.getAttribute("aria-label");return i?!o||o.trim()!==i:!1}_isElementNode(r){return r.nodeType===this._document.ELEMENT_NODE}};e.\u0275fac=function(s){return new(s||e)(L(De),L(Tn))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ng(t,e){return typeof t=="string"?`${e||""}/${t}`:t}function LS(t,e){t.id||(t.id=`${$S}-${e}-${Mg++}`)}var Fg=class{constructor(e,n){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Le,this._typeaheadSubscription=ar.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=r=>r.disabled,this._pressedLetters=[],this.tabOut=new Le,this.change=new Le,e instanceof fd?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):Jp(e)&&(this._effectRef=og(()=>this._itemsChanged(e()),{injector:n}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(ge(n=>this._pressedLetters.push(n)),cd(e),Ye(()=>this._pressedLetters.length>0),ie(()=>this._pressedLetters.join(""))).subscribe(n=>{let r=this._getItemsArray();for(let s=1;s<r.length+1;s++){let i=(this._activeItemIndex+s)%r.length,o=r[i];if(!this._skipPredicateFn(o)&&o.getLabel().toUpperCase().trim().indexOf(n)===0){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,n=10){return this._pageUpAndDown={enabled:e,delta:n},this}setActiveItem(e){let n=this._activeItem;this.updateActiveItem(e),this._activeItem!==n&&this.change.next(this._activeItemIndex)}onKeydown(e){let n=e.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(i=>!e[i]||this._allowedModifierKeys.indexOf(i)>-1);switch(n){case 9:this.tabOut.next();return;case 40:if(this._vertical&&s){this.setNextItemActive();break}else return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&s){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&s){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&s){let i=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(i>0?i:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&s){let i=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(i<o?i:o-1,-1);break}else return;default:(s||Ko(e,"shiftKey"))&&(e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n)));return}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let n=this._getItemsArray(),r=typeof e=="number"?e:n.indexOf(e),s=n[r];this._activeItem=s??null,this._activeItemIndex=r}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let n=this._getItemsArray();for(let r=1;r<=n.length;r++){let s=(this._activeItemIndex+e*r+n.length)%n.length,i=n[s];if(!this._skipPredicateFn(i)){this.setActiveItem(s);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,n){let r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(e+=n,!r[e])return;this.setActiveItem(e)}}_getItemsArray(){return Jp(this._items)?this._items():this._items instanceof fd?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){let n=e.indexOf(this._activeItem);n>-1&&n!==this._activeItemIndex&&(this._activeItemIndex=n)}}},BS=class extends Fg{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}};var LL=(()=>{let e=class e{constructor(r){this._platform=r}isDisabled(r){return r.hasAttribute("disabled")}isVisible(r){return VL(r)&&getComputedStyle(r).visibility==="visible"}isTabbable(r){if(!this._platform.isBrowser)return!1;let s=BL(HL(r));if(s&&(VS(s)===-1||!this.isVisible(s)))return!1;let i=r.nodeName.toLowerCase(),o=VS(r);return r.hasAttribute("contenteditable")?o!==-1:i==="iframe"||i==="object"||this._platform.WEBKIT&&this._platform.IOS&&!GL(r)?!1:i==="audio"?r.hasAttribute("controls")?o!==-1:!1:i==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||r.hasAttribute("controls"):r.tabIndex>=0}isFocusable(r,s){return KL(r)&&!this.isDisabled(r)&&(s?.ignoreVisibility||this.isVisible(r))}};e.\u0275fac=function(s){return new(s||e)(L(Tn))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function BL(t){try{return t.frameElement}catch{return null}}function VL(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function UL(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function jL(t){return $L(t)&&t.type=="hidden"}function qL(t){return zL(t)&&t.hasAttribute("href")}function $L(t){return t.nodeName.toLowerCase()=="input"}function zL(t){return t.nodeName.toLowerCase()=="a"}function zS(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function VS(t){if(!zS(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function GL(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function KL(t){return jL(t)?!1:UL(t)||qL(t)||t.hasAttribute("contenteditable")||zS(t)}function HL(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var Lg=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,r,s,i=!1){this._element=e,this._checker=n,this._ngZone=r,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let r=this._getFirstTabbableElement(n);return r?.focus(e),!!r}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=0;r<n.length;r++){let s=n[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[r]):null;if(s)return s}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=n.length-1;r>=0;r--){let s=n[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[r]):null;if(s)return s}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Vt(1)).subscribe(e)}},f5=(()=>{let e=class e{constructor(r,s,i){this._checker=r,this._ngZone=s,this._document=i}create(r,s=!1){return new Lg(r,this._checker,this._ngZone,this._document,s)}};e.\u0275fac=function(s){return new(s||e)(L(LL),L(we),L(De))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Bg(t){return t.buttons===0||t.detail===0}function Vg(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var WL=new se("cdk-input-modality-detector-options"),QL={ignoreKeys:[18,17,224,91,16]},GS=650,Ho=Go({passive:!0,capture:!0}),YL=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(r,s,i,o){this._platform=r,this._mostRecentTarget=null,this._modality=new Wt(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Cs(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<GS||(this._modality.next(Bg(a)?"keyboard":"mouse"),this._mostRecentTarget=Cs(a))},this._onTouchstart=a=>{if(Vg(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Cs(a)},this._options=E(E({},QL),o),this.modalityDetected=this._modality.pipe(dd(1)),this.modalityChanged=this.modalityDetected.pipe(ld()),r.isBrowser&&s.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Ho),i.addEventListener("mousedown",this._onMousedown,Ho),i.addEventListener("touchstart",this._onTouchstart,Ho)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ho),document.removeEventListener("mousedown",this._onMousedown,Ho),document.removeEventListener("touchstart",this._onTouchstart,Ho))}};e.\u0275fac=function(s){return new(s||e)(L(Tn),L(we),L(De),L(WL,8))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),XL=new se("liveAnnouncerElement",{providedIn:"root",factory:ZL});function ZL(){return null}var JL=new se("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),eB=0,m5=(()=>{let e=class e{constructor(r,s,i,o){this._ngZone=s,this._defaultOptions=o,this._document=i,this._liveElement=r||this._createLiveElement()}announce(r,...s){let i=this._defaultOptions,o,a;return s.length===1&&typeof s[0]=="number"?a=s[0]:[o,a]=s,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),a==null&&i&&(a=i.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(c=>this._currentResolve=c)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=r,typeof a=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let r="cdk-live-announcer-element",s=this._document.getElementsByClassName(r),i=this._document.createElement("div");for(let o=0;o<s.length;o++)s[o].remove();return i.classList.add(r),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id=`cdk-live-announcer-${eB++}`,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(r){let s=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<s.length;i++){let o=s[i],a=o.getAttribute("aria-owns");a?a.indexOf(r)===-1&&o.setAttribute("aria-owns",a+" "+r):o.setAttribute("aria-owns",r)}}};e.\u0275fac=function(s){return new(s||e)(L(XL,8),L(we),L(De),L(JL,8))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Md=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Md||{}),tB=new se("cdk-focus-monitor-default-options"),Od=Go({passive:!0,capture:!0}),KS=(()=>{let e=class e{constructor(r,s,i,o,a){this._ngZone=r,this._platform=s,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Le,this._rootNodeFocusAndBlurListener=c=>{let l=Cs(c);for(let d=l;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=o,this._detectionMode=a?.detectionMode||Md.IMMEDIATE}monitor(r,s=!1){let i=Ai(r);if(!this._platform.isBrowser||i.nodeType!==1)return J();let o=kS(i)||this._getDocument(),a=this._elementInfo.get(i);if(a)return s&&(a.checkChildren=!0),a.subject;let c={checkChildren:s,subject:new Le,rootNode:o};return this._elementInfo.set(i,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(r){let s=Ai(r),i=this._elementInfo.get(s);i&&(i.subject.complete(),this._setClasses(s),this._elementInfo.delete(s),this._removeGlobalListeners(i))}focusVia(r,s,i){let o=Ai(r),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,s,l)):(this._setOrigin(s),typeof o.focus=="function"&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((r,s)=>this.stopMonitoring(s))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(r){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(r)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:r&&this._isLastInteractionFromInputLabel(r)?"mouse":"program"}_shouldBeAttributedToTouch(r){return this._detectionMode===Md.EVENTUAL||!!r?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(r,s){r.classList.toggle("cdk-focused",!!s),r.classList.toggle("cdk-touch-focused",s==="touch"),r.classList.toggle("cdk-keyboard-focused",s==="keyboard"),r.classList.toggle("cdk-mouse-focused",s==="mouse"),r.classList.toggle("cdk-program-focused",s==="program")}_setOrigin(r,s=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=r,this._originFromTouchInteraction=r==="touch"&&s,this._detectionMode===Md.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?GS:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(r,s){let i=this._elementInfo.get(s),o=Cs(r);!i||!i.checkChildren&&s!==o||this._originChanged(s,this._getFocusOrigin(o),i)}_onBlur(r,s){let i=this._elementInfo.get(s);!i||i.checkChildren&&r.relatedTarget instanceof Node&&s.contains(r.relatedTarget)||(this._setClasses(s),this._emitOrigin(i,null))}_emitOrigin(r,s){r.subject.observers.length&&this._ngZone.run(()=>r.subject.next(s))}_registerGlobalListeners(r){if(!this._platform.isBrowser)return;let s=r.rootNode,i=this._rootNodeFocusListenerCount.get(s)||0;i||this._ngZone.runOutsideAngular(()=>{s.addEventListener("focus",this._rootNodeFocusAndBlurListener,Od),s.addEventListener("blur",this._rootNodeFocusAndBlurListener,Od)}),this._rootNodeFocusListenerCount.set(s,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ys(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(r){let s=r.rootNode;if(this._rootNodeFocusListenerCount.has(s)){let i=this._rootNodeFocusListenerCount.get(s);i>1?this._rootNodeFocusListenerCount.set(s,i-1):(s.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Od),s.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Od),this._rootNodeFocusListenerCount.delete(s))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(r,s,i){this._setClasses(r,s),this._emitOrigin(i,s),this._lastFocusOrigin=s}_getClosestElementsInfo(r){let s=[];return this._elementInfo.forEach((i,o)=>{(o===r||i.checkChildren&&o.contains(r))&&s.push([o,i])}),s}_isLastInteractionFromInputLabel(r){let{_mostRecentTarget:s,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!s||s===r||r.nodeName!=="INPUT"&&r.nodeName!=="TEXTAREA"||r.disabled)return!1;let o=r.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(s))return!0}return!1}};e.\u0275fac=function(s){return new(s||e)(L(we),L(Tn),L(YL),L(De,8),L(tB,8))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ti=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Ti||{}),US="cdk-high-contrast-black-on-white",jS="cdk-high-contrast-white-on-black",Og="cdk-high-contrast-active",Ug=(()=>{let e=class e{constructor(r,s){this._platform=r,this._document=s,this._breakpointSubscription=Y(FS).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ti.NONE;let r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);let s=this._document.defaultView||window,i=s&&s.getComputedStyle?s.getComputedStyle(r):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(r.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ti.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ti.BLACK_ON_WHITE}return Ti.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let r=this._document.body.classList;r.remove(Og,US,jS),this._hasCheckedHighContrastMode=!0;let s=this.getHighContrastMode();s===Ti.BLACK_ON_WHITE?r.add(Og,US):s===Ti.WHITE_ON_BLACK&&r.add(Og,jS)}}};e.\u0275fac=function(s){return new(s||e)(L(Tn),L(De))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),p5=(()=>{let e=class e{constructor(r){r._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(s){return new(s||e)(L(Ug))},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({imports:[NS]});let t=e;return t})();var nB=new se("cdk-dir-doc",{providedIn:"root",factory:rB});function rB(){return Y(De)}var sB=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function iB(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?sB.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var C5=(()=>{let e=class e{constructor(r){if(this.value="ltr",this.change=new ht,r){let s=r.body?r.body.dir:null,i=r.documentElement?r.documentElement.dir:null;this.value=iB(s||i||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(s){return new(s||e)(L(nB,8))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({});let t=e;return t})();var oB=["text"],aB=[[["mat-icon"]],"*"],cB=["mat-icon","*"];function lB(t,e){if(t&1&&gr(0,"mat-pseudo-checkbox",1),t&2){let n=Uo();mr("disabled",n.disabled)("state",n.selected?"checked":"unchecked")}}function uB(t,e){if(t&1&&gr(0,"mat-pseudo-checkbox",3),t&2){let n=Uo();mr("disabled",n.disabled)}}function dB(t,e){if(t&1&&(Kr(0,"span",4),Ux(1),Es()),t&2){let n=Uo();Gr(),jx("(",n.group.label,")")}}var W5=(()=>{let e=class e{};e.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",e.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",e.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",e.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)";let t=e;return t})(),Q5=(()=>{let e=class e{};e.COMPLEX="375ms",e.ENTERING="225ms",e.EXITING="195ms";let t=e;return t})();function hB(){return!0}var fB=new se("mat-sanity-checks",{providedIn:"root",factory:hB}),Hr=(()=>{let e=class e{constructor(r,s,i){this._sanityChecks=s,this._document=i,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return PS()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[r]}};e.\u0275fac=function(s){return new(s||e)(L(Ug),L(fB,8),L(De))},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({imports:[jg,jg]});let t=e;return t})();var WS=class{constructor(e,n,r,s,i){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=r,this._parentForm=s,this._stateChanges=i,this.errorState=!1}updateErrorState(){let e=this.errorState,n=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,s=this.ngControl?this.ngControl.control:null,i=r?.isErrorState(s,n)??!1;i!==e&&(this.errorState=i,this._stateChanges.next())}};var Y5=(()=>{let e=class e{isErrorState(r,s){return!!(r&&r.invalid&&(r.touched||s&&s.submitted))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Un=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Un||{}),zg=class{constructor(e,n,r,s=!1){this._renderer=e,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=s,this.state=Un.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},QS=Go({passive:!0,capture:!0}),Gg=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Cs(e);n&&this._events.get(e.type)?.forEach((r,s)=>{(s===n||s.contains(n))&&r.forEach(i=>i.handleEvent(e))})}}addHandler(e,n,r,s){let i=this._events.get(n);if(i){let o=i.get(r);o?o.add(s):i.set(r,new Set([s]))}else this._events.set(n,new Map([[r,new Set([s])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,QS)})}removeHandler(e,n,r){let s=this._events.get(e);if(!s)return;let i=s.get(n);i&&(i.delete(r),i.size===0&&s.delete(n),s.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,QS)))}},YS={enterDuration:225,exitDuration:150},mB=800,XS=Go({passive:!0,capture:!0}),ZS=["mousedown","touchstart"],JS=["mouseup","mouseleave","touchend","touchcancel"],nl=class nl{constructor(e,n,r,s){this._target=e,this._ngZone=n,this._platform=s,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=Ai(r))}fadeInRipple(e,n,r={}){let s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=E(E({},YS),r.animation);r.centered&&(e=s.left+s.width/2,n=s.top+s.height/2);let o=r.radius||pB(e,n,s),a=e-s.left,c=n-s.top,l=i.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-o}px`,d.style.top=`${c-o}px`,d.style.height=`${o*2}px`,d.style.width=`${o*2}px`,r.color!=null&&(d.style.backgroundColor=r.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let f=window.getComputedStyle(d),m=f.transitionProperty,g=f.transitionDuration,b=m==="none"||g==="0s"||g==="0s, 0s"||s.width===0&&s.height===0,C=new zg(this,d,r,b);d.style.transform="scale3d(1, 1, 1)",C.state=Un.FADING_IN,r.persistent||(this._mostRecentTransientRipple=C);let x=null;return!b&&(l||i.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let N=()=>this._finishRippleTransition(C),U=()=>this._destroyRipple(C);d.addEventListener("transitionend",N),d.addEventListener("transitioncancel",U),x={onTransitionEnd:N,onTransitionCancel:U}}),this._activeRipples.set(C,x),(b||!l)&&this._finishRippleTransition(C),C}fadeOutRipple(e){if(e.state===Un.FADING_OUT||e.state===Un.HIDDEN)return;let n=e.element,r=E(E({},YS),e.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",e.state=Un.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Ai(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,ZS.forEach(r=>{nl._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{JS.forEach(n=>{this._triggerElement.addEventListener(n,this,XS)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Un.FADING_IN?this._startFadeOutTransition(e):e.state===Un.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Un.VISIBLE,!r&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Un.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=Bg(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+mB;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Vg(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Un.VISIBLE||e.config.terminateOnPointerUp&&e.state===Un.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(ZS.forEach(n=>nl._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(JS.forEach(n=>e.removeEventListener(n,this,XS)),this._pointerUpEventsRegistered=!1))}};nl._eventManager=new Gg;var Kg=nl;function pB(t,e,n){let r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),s=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+s*s)}var rA=new se("mat-ripple-global-options"),sA=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(r){r&&this.fadeOutAllNonPersistent(),this._disabled=r,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(r){this._trigger=r,this._setupTriggerEventsIfEnabled()}constructor(r,s,i,o,a){this._elementRef=r,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Kg(this,s,r,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:E(E(E({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(r,s=0,i){return typeof r=="number"?this._rippleRenderer.fadeInRipple(r,s,E(E({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,E(E({},this.rippleConfig),r))}};e.\u0275fac=function(s){return new(s||e)(de(Tt),de(we),de(Tn),de(rA,8),de(_i,8))},e.\u0275dir=Qt({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(s,i){s&2&&pr("mat-ripple-unbounded",i.unbounded)},inputs:{color:[Me.None,"matRippleColor","color"],unbounded:[Me.None,"matRippleUnbounded","unbounded"],centered:[Me.None,"matRippleCentered","centered"],radius:[Me.None,"matRippleRadius","radius"],animation:[Me.None,"matRippleAnimation","animation"],disabled:[Me.None,"matRippleDisabled","disabled"],trigger:[Me.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),gB=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({imports:[Hr,Hr]});let t=e;return t})(),yB=(()=>{let e=class e{constructor(r){this._animationMode=r,this.state="unchecked",this.disabled=!1,this.appearance="full"}};e.\u0275fac=function(s){return new(s||e)(de(_i,8))},e.\u0275cmp=Ln({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(s,i){s&2&&pr("mat-pseudo-checkbox-indeterminate",i.state==="indeterminate")("mat-pseudo-checkbox-checked",i.state==="checked")("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal",i.appearance==="minimal")("mat-pseudo-checkbox-full",i.appearance==="full")("_mat-animation-noopable",i._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Vn],decls:0,vars:0,template:function(s,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0});let t=e;return t})(),_B=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({imports:[Hr]});let t=e;return t})(),bB=new se("MAT_OPTION_PARENT_COMPONENT");var EB=new se("MatOptgroup");var vB=0,Hg=class{constructor(e,n=!1){this.source=e,this.isUserInput=n}},X5=(()=>{let e=class e{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(r){this._disabled=r}get disableRipple(){return!!(this._parent&&this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}constructor(r,s,i,o){this._element=r,this._changeDetectorRef=s,this._parent=i,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${vB++}`,this.onSelectionChange=new ht,this._stateChanges=new Le}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(r=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),r&&this._emitSelectionChangeEvent())}deselect(r=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),r&&this._emitSelectionChangeEvent())}focus(r,s){let i=this._getHostElement();typeof i.focus=="function"&&i.focus(s)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(r){(r.keyCode===13||r.keyCode===32)&&!Ko(r)&&(this._selectViaInteraction(),r.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let r=this.viewValue;r!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=r)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(r=!1){this.onSelectionChange.emit(new Hg(this,r))}};e.\u0275fac=function(s){return new(s||e)(de(Tt),de(yr),de(bB,8),de(EB,8))},e.\u0275cmp=Ln({type:e,selectors:[["mat-option"]],viewQuery:function(s,i){if(s&1&&jo(oB,7),s&2){let o;vs(o=ws())&&(i._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(s,i){s&1&&bi("click",function(){return i._selectViaInteraction()})("keydown",function(a){return i._handleKeydown(a)}),s&2&&(Vx("id",i.id),fr("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),pr("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[Me.HasDecoratorInputTransform,"disabled","disabled",gn]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[Cn,Vn],ngContentSelectors:cB,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(s,i){s&1&&(Ei(aB),Bo(0,lB,1,2,"mat-pseudo-checkbox",1),Bn(1),Kr(2,"span",2,0),Bn(4,1),Es(),Bo(5,uB,1,1,"mat-pseudo-checkbox",3)(6,dB,2,1,"span",4),gr(7,"div",5)),s&2&&(Vo(0,i.multiple?0:-1),Gr(5),Vo(5,!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator?5:-1),Gr(),Vo(6,i.group&&i.group._inert?6:-1),Gr(),mr("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[yB,sA],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0});let t=e;return t})();function Z5(t,e,n){if(n.length){let r=e.toArray(),s=n.toArray(),i=0;for(let o=0;o<t+1;o++)r[o].group&&r[o].group===s[i]&&i++;return i}return 0}function J5(t,e,n,r){return t<n?t:t+e>n+r?Math.max(0,t-r+e):n}var e8=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({imports:[gB,Hr,_B]});let t=e;return t})(),eA={capture:!0},tA=["focus","click","mouseenter","touchstart"],qg="mat-ripple-loader-uninitialized",$g="mat-ripple-loader-class-name",nA="mat-ripple-loader-centered",Ld="mat-ripple-loader-disabled",t8=(()=>{let e=class e{constructor(){this._document=Y(De,{optional:!0}),this._animationMode=Y(_i,{optional:!0}),this._globalRippleOptions=Y(rA,{optional:!0}),this._platform=Y(Tn),this._ngZone=Y(we),this._hosts=new Map,this._onInteraction=r=>{if(!(r.target instanceof HTMLElement))return;let i=r.target.closest(`[${qg}]`);i&&this._createRipple(i)},this._ngZone.runOutsideAngular(()=>{for(let r of tA)this._document?.addEventListener(r,this._onInteraction,eA)})}ngOnDestroy(){let r=this._hosts.keys();for(let s of r)this.destroyRipple(s);for(let s of tA)this._document?.removeEventListener(s,this._onInteraction,eA)}configureRipple(r,s){r.setAttribute(qg,""),(s.className||!r.hasAttribute($g))&&r.setAttribute($g,s.className||""),s.centered&&r.setAttribute(nA,""),s.disabled&&r.setAttribute(Ld,"")}getRipple(r){return this._hosts.get(r)||this._createRipple(r)}setDisabled(r,s){let i=this._hosts.get(r);if(i){i.disabled=s;return}s?r.setAttribute(Ld,""):r.removeAttribute(Ld)}_createRipple(r){if(!this._document)return;let s=this._hosts.get(r);if(s)return s;r.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",r.getAttribute($g)),r.append(i);let o=new sA(new Tt(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=r,o.centered=r.hasAttribute(nA),o.disabled=r.hasAttribute(Ld),this.attachRipple(r,o),o}attachRipple(r,s){r.removeAttribute(qg),this._hosts.set(r,s)}destroyRipple(r){let s=this._hosts.get(r);s&&(s.ngOnDestroy(),this._hosts.delete(r))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wB=["*"],Bd;function xB(){if(Bd===void 0&&(Bd=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(Bd=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Bd}function rl(t){return xB()?.createHTML(t)||t}function iA(t){return Error(`Unable to find icon with the name "${t}"`)}function SB(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function oA(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function aA(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var Wr=class{constructor(e,n,r){this.url=e,this.svgText=n,this.options=r}},AB=(()=>{let e=class e{constructor(r,s,i,o){this._httpClient=r,this._sanitizer=s,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(r,s,i){return this.addSvgIconInNamespace("",r,s,i)}addSvgIconLiteral(r,s,i){return this.addSvgIconLiteralInNamespace("",r,s,i)}addSvgIconInNamespace(r,s,i,o){return this._addSvgIconConfig(r,s,new Wr(i,null,o))}addSvgIconResolver(r){return this._resolvers.push(r),this}addSvgIconLiteralInNamespace(r,s,i,o){let a=this._sanitizer.sanitize(An.HTML,i);if(!a)throw aA(i);let c=rl(a);return this._addSvgIconConfig(r,s,new Wr("",c,o))}addSvgIconSet(r,s){return this.addSvgIconSetInNamespace("",r,s)}addSvgIconSetLiteral(r,s){return this.addSvgIconSetLiteralInNamespace("",r,s)}addSvgIconSetInNamespace(r,s,i){return this._addSvgIconSetConfig(r,new Wr(s,null,i))}addSvgIconSetLiteralInNamespace(r,s,i){let o=this._sanitizer.sanitize(An.HTML,s);if(!o)throw aA(s);let a=rl(o);return this._addSvgIconSetConfig(r,new Wr("",a,i))}registerFontClassAlias(r,s=r){return this._fontCssClassesByAlias.set(r,s),this}classNameForFontAlias(r){return this._fontCssClassesByAlias.get(r)||r}setDefaultFontSetClass(...r){return this._defaultFontSetClass=r,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(r){let s=this._sanitizer.sanitize(An.RESOURCE_URL,r);if(!s)throw oA(r);let i=this._cachedIconsByUrl.get(s);return i?J(Vd(i)):this._loadSvgIconFromConfig(new Wr(r,null)).pipe(ge(o=>this._cachedIconsByUrl.set(s,o)),ie(o=>Vd(o)))}getNamedSvgIcon(r,s=""){let i=cA(s,r),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(s,r),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let a=this._iconSetConfigs.get(s);return a?this._getSvgFromIconSetConfigs(r,a):pi(iA(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(r){return r.svgText?J(Vd(this._svgElementFromConfig(r))):this._loadSvgIconFromConfig(r).pipe(ie(s=>Vd(s)))}_getSvgFromIconSetConfigs(r,s){let i=this._extractIconWithNameFromAnySet(r,s);if(i)return J(i);let o=s.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(ps(c=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(An.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),J(null)})));return To(o).pipe(ie(()=>{let a=this._extractIconWithNameFromAnySet(r,s);if(!a)throw iA(r);return a}))}_extractIconWithNameFromAnySet(r,s){for(let i=s.length-1;i>=0;i--){let o=s[i];if(o.svgText&&o.svgText.toString().indexOf(r)>-1){let a=this._svgElementFromConfig(o),c=this._extractSvgIconFromSet(a,r,o.options);if(c)return c}}return null}_loadSvgIconFromConfig(r){return this._fetchIcon(r).pipe(ge(s=>r.svgText=s),ie(()=>this._svgElementFromConfig(r)))}_loadSvgIconSetFromConfig(r){return r.svgText?J(null):this._fetchIcon(r).pipe(ge(s=>r.svgText=s))}_extractSvgIconFromSet(r,s,i){let o=r.querySelector(`[id="${s}"]`);if(!o)return null;let a=o.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,i);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),i);let c=this._svgElementFromString(rl("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,i)}_svgElementFromString(r){let s=this._document.createElement("DIV");s.innerHTML=r;let i=s.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(r){let s=this._svgElementFromString(rl("<svg></svg>")),i=r.attributes;for(let o=0;o<i.length;o++){let{name:a,value:c}=i[o];a!=="id"&&s.setAttribute(a,c)}for(let o=0;o<r.childNodes.length;o++)r.childNodes[o].nodeType===this._document.ELEMENT_NODE&&s.appendChild(r.childNodes[o].cloneNode(!0));return s}_setSvgAttributes(r,s){return r.setAttribute("fit",""),r.setAttribute("height","100%"),r.setAttribute("width","100%"),r.setAttribute("preserveAspectRatio","xMidYMid meet"),r.setAttribute("focusable","false"),s&&s.viewBox&&r.setAttribute("viewBox",s.viewBox),r}_fetchIcon(r){let{url:s,options:i}=r,o=i?.withCredentials??!1;if(!this._httpClient)throw SB();if(s==null)throw Error(`Cannot fetch icon from URL "${s}".`);let a=this._sanitizer.sanitize(An.RESOURCE_URL,s);if(!a)throw oA(s);let c=this._inProgressUrlFetches.get(a);if(c)return c;let l=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(ie(d=>rl(d)),$r(()=>this._inProgressUrlFetches.delete(a)),px());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(r,s,i){return this._svgIconConfigs.set(cA(r,s),i),this}_addSvgIconSetConfig(r,s){let i=this._iconSetConfigs.get(r);return i?i.push(s):this._iconSetConfigs.set(r,[s]),this}_svgElementFromConfig(r){if(!r.svgElement){let s=this._svgElementFromString(r.svgText);this._setSvgAttributes(s,r.options),r.svgElement=s}return r.svgElement}_getIconConfigFromResolvers(r,s){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](s,r);if(o)return CB(o)?new Wr(o.url,null,o.options):new Wr(o,null)}}};e.\u0275fac=function(s){return new(s||e)(L(yg,8),L(el),L(De,8),L(yi))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Vd(t){return t.cloneNode(!0)}function cA(t,e){return t+":"+e}function CB(t){return!!(t.url&&t.options)}var TB=new se("MAT_ICON_DEFAULT_OPTIONS"),IB=new se("mat-icon-location",{providedIn:"root",factory:RB});function RB(){let t=Y(De),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var lA=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],DB=lA.map(t=>`[${t}]`).join(", "),kB=/^url\(['"]?#(.*?)['"]?\)$/,y8=(()=>{let e=class e{get color(){return this._color||this._defaultColor}set color(r){this._color=r}get svgIcon(){return this._svgIcon}set svgIcon(r){r!==this._svgIcon&&(r?this._updateSvgIcon(r):this._svgIcon&&this._clearSvgElement(),this._svgIcon=r)}get fontSet(){return this._fontSet}set fontSet(r){let s=this._cleanupFontValue(r);s!==this._fontSet&&(this._fontSet=s,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(r){let s=this._cleanupFontValue(r);s!==this._fontIcon&&(this._fontIcon=s,this._updateFontIconClasses())}constructor(r,s,i,o,a,c){this._elementRef=r,this._iconRegistry=s,this._location=o,this._errorHandler=a,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ar.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),i||r.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(r){if(!r)return["",""];let s=r.split(":");switch(s.length){case 1:return["",s[0]];case 2:return s;default:throw Error(`Invalid icon name: "${r}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let r=this._elementsWithExternalReferences;if(r&&r.size){let s=this._location.getPathname();s!==this._previousPath&&(this._previousPath=s,this._prependPathToReferences(s))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(r){this._clearSvgElement();let s=this._location.getPathname();this._previousPath=s,this._cacheChildrenWithExternalReferences(r),this._prependPathToReferences(s),this._elementRef.nativeElement.appendChild(r)}_clearSvgElement(){let r=this._elementRef.nativeElement,s=r.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();s--;){let i=r.childNodes[s];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let r=this._elementRef.nativeElement,s=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>r.classList.remove(i)),s.forEach(i=>r.classList.add(i)),this._previousFontSetClass=s,this.fontIcon!==this._previousFontIconClass&&!s.includes("mat-ligature-font")&&(this._previousFontIconClass&&r.classList.remove(this._previousFontIconClass),this.fontIcon&&r.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(r){return typeof r=="string"?r.trim().split(" ")[0]:r}_prependPathToReferences(r){let s=this._elementsWithExternalReferences;s&&s.forEach((i,o)=>{i.forEach(a=>{o.setAttribute(a.name,`url('${r}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(r){let s=r.querySelectorAll(DB),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<s.length;o++)lA.forEach(a=>{let c=s[o],l=c.getAttribute(a),d=l?l.match(kB):null;if(d){let f=i.get(c);f||(f=[],i.set(c,f)),f.push({name:a,value:d[1]})}})}_updateSvgIcon(r){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),r){let[s,i]=this._splitIconName(r);s&&(this._svgNamespace=s),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,s).pipe(Vt(1)).subscribe(o=>this._setSvgElement(o),o=>{let a=`Error retrieving icon ${s}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(a))})}}};e.\u0275fac=function(s){return new(s||e)(de(Tt),de(AB),Do("aria-hidden"),de(IB),de(yi),de(TB,8))},e.\u0275cmp=Ln({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(s,i){s&2&&(fr("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Lx(i.color?"mat-"+i.color:""),pr("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[Me.HasDecoratorInputTransform,"inline","inline",gn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Cn,Vn],ngContentSelectors:wB,decls:1,vars:0,template:function(s,i){s&1&&(Ei(),Bn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let t=e;return t})(),_8=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({imports:[Hr,Hr]});let t=e;return t})();var E8=(()=>{let e=class e{constructor(r){this.sanitized=r}transform(r){return this.sanitized.bypassSecurityTrustHtml(r)}};e.\u0275fac=function(s){return new(s||e)(de(el,16))},e.\u0275pipe=yx({name:"sanitizedHtml",type:e,pure:!0});let t=e;return t})();var A8=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({imports:[qo]});let t=e;return t})();var uA=class{};function D8(t){return t&&typeof t.connect=="function"&&!(t instanceof Nc)}var Ud=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(Ud||{}),k8=new se("_ViewRepeater"),dA=class{applyChanges(e,n,r,s,i){e.forEachOperation((o,a,c)=>{let l,d;if(o.previousIndex==null){let f=r(o,a,c);l=n.createEmbeddedView(f.templateRef,f.context,f.index),d=Ud.INSERTED}else c==null?(n.remove(a),d=Ud.REMOVED):(l=n.get(a),n.move(l,c),d=Ud.MOVED);i&&i({context:l?.context,operation:d,record:o})})}detach(){}};var hA=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(e=!1,n,r=!0,s){this._multiple=e,this._emitChanges=r,this.compareWith=s,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Le,n&&n.length&&(e?n.forEach(i=>this._markSelected(i)):this._markSelected(n[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(r=>this._markSelected(r));let n=this._hasQueuedChanges();return this._emitChangeEvent(),n}deselect(...e){this._verifyValueAssignment(e),e.forEach(r=>this._unmarkSelected(r));let n=this._hasQueuedChanges();return this._emitChangeEvent(),n}setSelection(...e){this._verifyValueAssignment(e);let n=this.selected,r=new Set(e);e.forEach(i=>this._markSelected(i)),n.filter(i=>!r.has(this._getConcreteValue(i,r))).forEach(i=>this._unmarkSelected(i));let s=this._hasQueuedChanges();return this._emitChangeEvent(),s}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();let n=this._hasQueuedChanges();return e&&this._emitChangeEvent(),n}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){e.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(e,n){if(this.compareWith){n=n??this._selection;for(let r of n)if(this.compareWith(e,r))return r;return e}else return e}};var jd=(()=>{let e=class e{constructor(){this._listeners=[]}notify(r,s){for(let i of this._listeners)i(r,s)}listen(r){return this._listeners.push(r),()=>{this._listeners=this._listeners.filter(s=>r!==s)}}ngOnDestroy(){this._listeners=[]}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var mA=new se("CdkAccordion");var PB=0,pA=(()=>{let e=class e{get expanded(){return this._expanded}set expanded(r){if(this._expanded!==r){if(this._expanded=r,this.expandedChange.emit(r),r){this.opened.emit();let s=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,s)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(r,s,i){this.accordion=r,this._changeDetectorRef=s,this._expansionDispatcher=i,this._openCloseAllSubscription=ar.EMPTY,this.closed=new ht,this.opened=new ht,this.destroyed=new ht,this.expandedChange=new ht,this.id=`cdk-accordion-child-${PB++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((o,a)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===a&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(r=>{this.disabled||(this.expanded=r)})}};e.\u0275fac=function(s){return new(s||e)(de(mA,12),de(yr),de(jd))},e.\u0275dir=Qt({type:e,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[Me.HasDecoratorInputTransform,"expanded","expanded",gn],disabled:[Me.HasDecoratorInputTransform,"disabled","disabled",gn]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[vi([{provide:mA,useValue:void 0}]),Cn]});let t=e;return t})(),gA=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({});let t=e;return t})();var sl=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Yg=class extends sl{constructor(e,n,r,s,i){super(),this.component=e,this.viewContainerRef=n,this.injector=r,this.componentFactoryResolver=s,this.projectableNodes=i}},il=class extends sl{constructor(e,n,r,s){super(),this.templateRef=e,this.viewContainerRef=n,this.context=r,this.injector=s}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Xg=class extends sl{constructor(e){super(),this.element=e instanceof Tt?e.nativeElement:e}},qd=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Yg)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof il)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Xg)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var yA=class extends qd{constructor(e,n,r,s,i){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=r,this._defaultInjector=s,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=i}attachComponentPortal(e){let r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),s;return e.viewContainerRef?(s=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>s.destroy())):(s=r.create(e.injector||this._defaultInjector||ko.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=e,s}attachTemplatePortal(e){let n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(s=>this.outletElement.appendChild(s)),r.detectChanges(),this.setDisposeFn(()=>{let s=n.indexOf(r);s!==-1&&n.remove(s)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var _A=(()=>{let e=class e extends qd{constructor(r,s,i){super(),this._componentFactoryResolver=r,this._viewContainerRef=s,this._isInitialized=!1,this.attached=new ht,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=i}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(r){r.setAttachedHost(this);let s=r.viewContainerRef!=null?r.viewContainerRef:this._viewContainerRef,o=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),a=s.createComponent(o,s.length,r.injector||s.injector,r.projectableNodes||void 0);return s!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=r,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(r){r.setAttachedHost(this);let s=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=s,this.attached.emit(s),s}_getRootNode(){let r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}};e.\u0275fac=function(s){return new(s||e)(de(Nx),de(Fo),de(De))},e.\u0275dir=Qt({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[Me.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Lo]});let t=e;return t})();var bA=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({});let t=e;return t})();var NB=["body"],OB=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],MB=["mat-expansion-panel-header","*","mat-action-row"];function FB(t,e){}var LB=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],BB=["mat-panel-title","mat-panel-description","*"];function VB(t,e){if(t&1&&(Kr(0,"span",1),Ex(),Kr(1,"svg",2),gr(2,"path",3),Es()()),t&2){let n=Uo();mr("@indicatorRotate",n._getExpandedState())}}var EA=new se("MAT_ACCORDION"),vA="225ms cubic-bezier(0.4,0.0,0.2,1)",xA={indicatorRotate:ug("indicatorRotate",[Hc("collapsed, void",Kc({transform:"rotate(0deg)"})),Hc("expanded",Kc({transform:"rotate(180deg)"})),hg("expanded <=> collapsed, void => collapsed",dg(vA))]),bodyExpansion:ug("bodyExpansion",[Hc("collapsed, void",Kc({height:"0px",visibility:"hidden"})),Hc("expanded",Kc({height:"*",visibility:""})),hg("expanded <=> collapsed, void => collapsed",dg(vA))])},SA=new se("MAT_EXPANSION_PANEL"),UB=(()=>{let e=class e{constructor(r,s){this._template=r,this._expansionPanel=s}};e.\u0275fac=function(s){return new(s||e)(de(Xp),de(SA,8))},e.\u0275dir=Qt({type:e,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0});let t=e;return t})(),jB=0,AA=new se("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),qB=(()=>{let e=class e extends pA{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(r){this._hideToggle=r}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(r){this._togglePosition=r}constructor(r,s,i,o,a,c,l){super(r,s,i),this._viewContainerRef=o,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new ht,this.afterCollapse=new ht,this._inputChanges=new Le,this._headerId=`mat-expansion-panel-header-${jB++}`,this.accordion=r,this._document=a,this._animationsDisabled=c==="NoopAnimations",l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(dr(null),Ye(()=>this.expanded&&!this._portal),Vt(1)).subscribe(()=>{this._portal=new il(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(r){this._inputChanges.next(r)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let r=this._document.activeElement,s=this._body.nativeElement;return r===s||s.contains(r)}return!1}_animationStarted(r){!wA(r)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(r){wA(r)||(r.toState==="expanded"?this.afterExpand.emit():r.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}};e.\u0275fac=function(s){return new(s||e)(de(EA,12),de(yr),de(jd),de(Fo),de(De),de(_i,8),de(AA,8))},e.\u0275cmp=Ln({type:e,selectors:[["mat-expansion-panel"]],contentQueries:function(s,i,o){if(s&1&&tg(o,UB,5),s&2){let a;vs(a=ws())&&(i._lazyContent=a.first)}},viewQuery:function(s,i){if(s&1&&jo(NB,5),s&2){let o;vs(o=ws())&&(i._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(s,i){s&2&&pr("mat-expanded",i.expanded)("_mat-animation-noopable",i._animationsDisabled)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{hideToggle:[Me.HasDecoratorInputTransform,"hideToggle","hideToggle",gn],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[vi([{provide:EA,useValue:void 0},{provide:SA,useExisting:e}]),Cn,Lo,zr,Vn],ngContentSelectors:MB,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(s,i){if(s&1){let o=Bx();Ei(OB),Bn(0),Kr(1,"div",1,0),bi("@bodyExpansion.start",function(c){return Qp(o),Yp(i._animationStarted(c))})("@bodyExpansion.done",function(c){return Qp(o),Yp(i._animationDone(c))}),Kr(3,"div",2),Bn(4,1),Bo(5,FB,0,0,"ng-template",3),Es(),Bn(6,2),Es()}s&2&&(Gr(),mr("@bodyExpansion",i._getExpandedState())("id",i.id),fr("aria-labelledby",i._headerId),Gr(4),mr("cdkPortalOutlet",i._portal))},dependencies:[_A],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[xA.bodyExpansion]},changeDetection:0});let t=e;return t})();function wA(t){return t.fromState==="void"}var vG=(()=>{let e=class e{constructor(r,s,i,o,a,c,l){this.panel=r,this._element=s,this._focusMonitor=i,this._changeDetectorRef=o,this._animationMode=c,this._parentChangeSubscription=ar.EMPTY,this.tabIndex=0;let d=r.accordion?r.accordion._stateChanges.pipe(Ye(f=>!!(f.hideToggle||f.togglePosition))):cr;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=ad(r.opened,r.closed,d,r._inputChanges.pipe(Ye(f=>!!(f.hideToggle||f.disabled||f.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),r.closed.pipe(Ye(()=>r._containsFocus())).subscribe(()=>i.focusVia(s,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let r=this._isExpanded();return r&&this.expandedHeight?this.expandedHeight:!r&&this.collapsedHeight?this.collapsedHeight:null}_keydown(r){switch(r.keyCode){case 32:case 13:Ko(r)||(r.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(r);return}}focus(r,s){r?this._focusMonitor.focusVia(this._element,r,s):this._element.nativeElement.focus(s)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(r=>{r&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}};e.\u0275fac=function(s){return new(s||e)(de(qB,1),de(Tt),de(KS),de(yr),de(AA,8),de(_i,8),Do("tabindex"))},e.\u0275cmp=Ln({type:e,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(s,i){s&1&&bi("click",function(){return i._toggle()})("keydown",function(a){return i._keydown(a)}),s&2&&(fr("id",i.panel._headerId)("tabindex",i.disabled?-1:i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),md("height",i._getHeaderHeight()),pr("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after",i._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",i._getTogglePosition()==="before")("_mat-animation-noopable",i._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[Me.HasDecoratorInputTransform,"tabIndex","tabIndex",r=>r==null?0:Hx(r)]},standalone:!0,features:[Cn,Vn],ngContentSelectors:BB,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(s,i){s&1&&(Ei(LB),Kr(0,"span",0),Bn(1),Bn(2,1),Bn(3,2),Es(),Bo(4,VB,3,1,"span",1)),s&2&&(pr("mat-content-hide-toggle",!i._showToggle()),Gr(4),Vo(4,i._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color);display:inline-block;display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color);display:none;display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[xA.indicatorRotate]},changeDetection:0});let t=e;return t})();var wG=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({imports:[Hr,gA,bA]});let t=e;return t})();var ye="MEFO",SG={apiKey:"AIzaSyA07ukHAfjWg6kVwb1PjfU1JgF-ZJf2qaA",authDomain:"mefo-e763c.firebaseapp.com",projectId:"mefo-e763c",storageBucket:"mefo-e763c.firebasestorage.app",messagingSenderId:"662271430642",appId:"1:662271430642:web:6d6e056db97d8e463fe56b"},AG="https://files.mefodata.com",CG=1e3*60*60,TG="PZTpO10qprdYoyWSMfszxlLZDeE3",IG="admin-control",RG=[],br={cloudflareAccountId:"",cloudflareR2AccessKeyId:"",cloudflareR2SecretAccessKey:"",cloudflareR2BucketName:"",endpoint:""};var $B="firebase",zB="10.12.2";Ss($B,zB,"app");var Wo=new Uc("ANGULARFIRE2_VERSION");var GB=(t,e)=>{let n=e?[e]:lS(),r=[];return n.forEach(s=>{s.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ii=class{constructor(){return GB(KB)}},KB="app-check";function Zg(){}var $d=class{zone;delegate;constructor(e,n=dx){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let s=this.zone,i=function(o){s.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(i,n,r)}},Jg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zg,{},Zg,Zg)),n.pipe(ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},zd=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new $d(Zone.current)),this.insideAngular=n.run(()=>new $d(Zone.current,sd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(L(we))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function HB(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function _n(t){return WB(HB())(t)}function WB(t){return function(n){return n=n.lift(new Jg(t.ngZone)),n.pipe(Co(t.outsideAngular),mi(t.insideAngular))}}var QB="firebase",YB="10.12.2";yn.registerVersion(QB,YB,"app-compat");var XB=["ngOnDestroy"],IA=(t,e,n,r={})=>new Proxy(t,{get:(s,i)=>n.runOutsideAngular(()=>{if(t[i])return r?.spy?.get&&r.spy.get(i,t[i]),t[i];if(XB.indexOf(i)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[i];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(i,l,f),f})})})});var Gd=class{constructor(e){return e}},Qo=new se("angularfire2.app.options"),Yo=new se("angularfire2.app.name");function ol(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",s=typeof n=="object"&&n||{};s.name=s.name||r;let o=yn.apps.filter(a=>a&&a.name===s.name)[0]||e.runOutsideAngular(()=>yn.initializeApp(t,s));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;ZB("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Gd(o)}var ZB=(t,...e)=>{ig()&&typeof console<"u"&&console[t](...e)},JB={provide:Gd,useFactory:ol,deps:[Qo,we,[new Ro,Yo]]},HG=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Qo,useValue:n},{provide:Yo,useValue:r}]}}constructor(n){yn.registerVersion("angularfire",Wo.full,"core"),yn.registerVersion("angularfire",Wo.full,"app-compat"),yn.registerVersion("angular",qx.full,n.toString())}static \u0275fac=function(r){return new(r||t)(L(xt))};static \u0275mod=Te({type:t});static \u0275inj=Ce({providers:[JB]})}return t})();function Kd(t,e,n,r,s){let[,i,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(i)return e2(s,o)||(TA("error",`${e} was already initialized on the ${n} Firebase App with different settings.${t2?" You may need to reload as Firebase is not HMR aware.":""}`),TA("warn",{is:s,was:o})),i;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,s]),a}}function e2(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var t2=typeof module<"u"&&!!module.hot,TA=(t,...e)=>{ig()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var s2=new Map,i2={activated:!1,tokenObservers:[]},o2={initialized:!1,enabled:!1};function Xn(t){return s2.get(t)||Object.assign({},i2)}function NA(){return o2}var a2="https://content-firebaseappcheck.googleapis.com/v1";var c2="exchangeDebugToken",RA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},rK=24*60*60*1e3;var ty=class{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new ag,this.pending.promise.catch(n=>{}),yield l2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ag,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function l2(t){return new Promise(e=>{setTimeout(e,t)})}var u2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ts=new aS("appCheck","AppCheck",u2);function OA(t){if(!Xn(t).activated)throw Ts.create("use-before-activation",{appName:t.name})}function MA(r,s){return y(this,arguments,function*({url:t,body:e},n){let i={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let g=yield o.getHeartbeatsHeader();g&&(i["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:i},c;try{c=yield fetch(t,a)}catch(g){throw Ts.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw Ts.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(g){throw Ts.create("fetch-parse-error",{originalErrorMessage:g?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function FA(t,e){let{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${a2}/projects/${n}/apps/${r}:${c2}?key=${s}`,body:{debug_token:e}}}var d2="firebase-app-check-database",h2=1,ny="firebase-app-check-store";var Hd=null;function f2(){return Hd||(Hd=new Promise((t,e)=>{try{let n=indexedDB.open(d2,h2);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Ts.create("storage-open",{originalErrorMessage:(s=r.target.error)===null||s===void 0?void 0:s.message}))},n.onupgradeneeded=r=>{let s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(ny,{keyPath:"compositeKey"})}}}catch(n){e(Ts.create("storage-open",{originalErrorMessage:n?.message}))}}),Hd)}function m2(t,e){return p2(g2(t),e)}function p2(t,e){return y(this,null,function*(){let r=(yield f2()).transaction(ny,"readwrite"),i=r.objectStore(ny).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=c=>{o()},r.onerror=c=>{var l;a(Ts.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function g2(t){return`${t.options.appId}-${t.name}`}var ry=new Sd("@firebase/app-check");function ey(t,e){return xd()?m2(t,e).catch(n=>{ry.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function LA(){return NA().enabled}function BA(){return y(this,null,function*(){let t=NA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var y2={error:"UNKNOWN_ERROR"};function _2(t){return sS.encodeString(JSON.stringify(t),!1)}function sy(t,e=!1){return y(this,null,function*(){let n=t.app;OA(n);let r=Xn(n),s=r.token,i;if(s&&!al(s)&&(r.token=void 0,s=void 0),!s){let c=yield r.cachedTokenPromise;c&&(al(c)?s=c:yield ey(n,void 0))}if(!e&&s&&al(s))return{token:s.token};let o=!1;if(LA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=MA(FA(n,yield BA()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield ey(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),s=yield Xn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?ry.warn(c.message):ry.error(c),i=c}let a;return s?i?al(s)?a={token:s.token,internalError:i}:a=kA(i):(a={token:s.token},r.token=s,yield ey(n,s)):a=kA(i),o&&w2(n,a),a})}function b2(t){return y(this,null,function*(){let e=t.app;OA(e);let{provider:n}=Xn(e);if(LA()){let r=yield BA(),{token:s}=yield MA(FA(e,r),t.heartbeatServiceProvider);return{token:s}}else{let{token:r}=yield n.getToken();return{token:r}}})}function E2(t,e,n,r){let{app:s}=t,i=Xn(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&al(i.token)){let a=i.token;Promise.resolve().then(()=>{n({token:a.token}),DA(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>DA(t))}function VA(t,e){let n=Xn(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function DA(t){let{app:e}=t,n=Xn(e),r=n.tokenRefresher;r||(r=v2(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function v2(t){let{app:e}=t;return new ty(()=>y(this,null,function*(){let n=Xn(e),r;if(n.token?r=yield sy(t,!0):r=yield sy(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Xn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},RA.RETRIAL_MIN_WAIT,RA.RETRIAL_MAX_WAIT)}function w2(t,e){let n=Xn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function al(t){return t.expireTimeMillis-Date.now()>0}function kA(t){return{token:_2(y2),error:t}}var iy=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Xn(this.app);for(let n of e)VA(this.app,n.next);return Promise.resolve()}};function x2(t,e){return new iy(t,e)}function S2(t){return{getToken:e=>sy(t,e),getLimitedUseToken:()=>b2(t),addTokenListener:e=>E2(t,"INTERNAL",e),removeTokenListener:e=>VA(t.app,e)}}var A2="@firebase/app-check",C2="0.8.4";var T2="app-check",PA="app-check-internal";function I2(){Gc(new wi(T2,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return x2(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(PA).initialize()})),Gc(new wi(PA,t=>{let e=t.getProvider("app-check").getImmediate();return S2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ss(A2,C2)}I2();var R2=["localhost","0.0.0.0","127.0.0.1"],pK=typeof window<"u"&&R2.includes(window.location.hostname);var oy=new se("angularfire2.auth.use-emulator"),ay=new se("angularfire2.auth.settings"),cy=new se("angularfire2.auth.tenant-id"),ly=new se("angularfire2.auth.langugage-code"),uy=new se("angularfire2.auth.use-device-language"),dy=new se("angularfire.auth.persistence"),hy=(t,e,n,r,s,i,o,a)=>Kd(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=s,i&&c.useDeviceLanguage(),o)for(let[l,d]of Object.entries(o))c.settings[l]=d;return a&&c.setPersistence(a),c},[n,r,s,i,o,a]),fy=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,s,i,o,a,c,l,d,f,m,g){let b=new Le,C=J(void 0).pipe(mi(o.outsideAngular),xe(()=>i.runOutsideAngular(()=>import("./chunk-4T7VQTIN.js"))),ie(()=>ol(n,i,r)),ie(x=>hy(x,i,a,l,d,f,c,m)),Mc({bufferSize:1,refCount:!1}));if(xs(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{C.pipe(ur()).subscribe();let x=C.pipe(xe(j=>j.getRedirectResult().then(H=>H,()=>null)),_n,Mc({bufferSize:1,refCount:!1})),N=C.pipe(xe(j=>new Ae(H=>({unsubscribe:i.runOutsideAngular(()=>j.onAuthStateChanged(ae=>H.next(ae),ae=>H.error(ae),()=>H.complete()))})))),U=C.pipe(xe(j=>new Ae(H=>({unsubscribe:i.runOutsideAngular(()=>j.onIdTokenChanged(ae=>H.next(ae),ae=>H.error(ae),()=>H.complete()))}))));this.authState=x.pipe(Kp(N),Co(o.outsideAngular),mi(o.insideAngular)),this.user=x.pipe(Kp(U),Co(o.outsideAngular),mi(o.insideAngular)),this.idToken=this.user.pipe(xe(j=>j?Ve(j.getIdToken()):J(null))),this.idTokenResult=this.user.pipe(xe(j=>j?Ve(j.getIdTokenResult()):J(null))),this.credential=ad(x,b,this.authState.pipe(Ye(j=>!j))).pipe(ie(j=>j?.user?j:null),Co(o.outsideAngular),mi(o.insideAngular))}return IA(this,C,i,{spy:{apply:(x,N,U)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&U.then(j=>b.next(j))}}})}static \u0275fac=function(r){return new(r||t)(L(Qo),L(Yo,8),L(xt),L(we),L(zd),L(oy,8),L(ay,8),L(cy,8),L(ly,8),L(uy,8),L(dy,8),L(Ii,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),kK=(()=>{class t{constructor(){yn.registerVersion("angularfire",Wo.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Te({type:t});static \u0275inj=Ce({providers:[fy]})}return t})();var It=function(t){return t.WebSettings="webSettings",t.DigitalVisionData="DigitalVisionData",t.TrsData="trsData",t.RfidData="rfidData",t.News="news",t}(It||{}),NK={name:ye,version:1,objectStoresMeta:[{store:It.News,storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[]},{store:It.DigitalVisionData,storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[]},{store:It.TrsData,storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[]},{store:It.RfidData,storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[]},{store:It.WebSettings,storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[]}]};function it(t,e,n,r){return new Promise((s,i)=>{t||i("IndexedDB not available");let o=t.open(e,n),a;o.onsuccess=c=>{a=o.result,s(a)},o.onerror=c=>{i(`IndexedDB error: ${o.error}`)},typeof r=="function"&&(o.onupgradeneeded=c=>{r(c,a)})})}function jA(t,e,n,r,s){return y(this,null,function*(){return new Promise((i,o)=>{if(!t)return;let a=t.open(e,n);a.onupgradeneeded=c=>y(this,null,function*(){let l=c.target.result,d=r.map(m=>y(this,null,function*(){if(!l.objectStoreNames.contains(m.store)){let g=l.createObjectStore(m.store,m.storeConfig);for(let b of m.storeSchema)g.createIndex(b.name,b.keypath,b.options)}}));yield Promise.all(d);let f=s&&s();if(f){let m=Object.keys(f).map(g=>parseInt(g,10)).filter(g=>g>c.oldVersion).sort((g,b)=>g-b);for(let g of m)f[g](l,a.transaction)}l.close(),i()}),a.onsuccess=c=>{c.target.result.close(),i()},a.onerror=c=>{o(c)}})})}function k2(t,e,n){if(!t||!e||!n)throw Error('Params: "dbName", "version", "storeName" are mandatory.');return new Ae(r=>{try{let s=e+1,i=indexedDB.open(t,s);i.onupgradeneeded=o=>{let a=o.target.result;a.deleteObjectStore(n),a.close(),console.log("onupgradeneeded"),r.next(!0),r.complete()},i.onerror=o=>r.error(o)}catch(s){r.error(s)}})}function P2(t,e){return t.objectStoreNames.contains(e)}function bn(t,e,n){t||n("You need to use the openDatabase function to create a database before you query it!"),P2(t,e)||n(`objectStore does not exists: ${e}`)}function Rt(t,e){let n=t.transaction(e.storeName,e.dbMode);return n.onerror=e.error,n.onabort=e.abort,n}function Dt(t,e,n,r){return{storeName:e,dbMode:t,error:s=>{n(s)},abort:s=>{n(s)}}}var St=function(t){return t.readonly="readonly",t.readwrite="readwrite",t}(St||{}),qA=new se(null),my=(()=>{let e=class e{constructor(r,s){if(this.dbConfigs=r,this.platformId=s,this.defaultDatabaseName=null,this.isBrowser=$o(this.platformId),this.isBrowser){this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;let i=Object.values(this.dbConfigs),o=i.length===1;for(let a of i)this.instanciateConfig(a,o)}}instanciateConfig(r,s){return y(this,null,function*(){if(!r.name)throw new Error("NgxIndexedDB: Please, provide the dbName in the configuration");if(!r.version)throw new Error("NgxIndexedDB: Please, provide the db version in the configuration");if((r.isDefault??!1)&&this.defaultDatabaseName)throw new Error("NgxIndexedDB: Only one database can be set as default");((r.isDefault??!1)&&!this.defaultDatabaseName||s)&&(this.defaultDatabaseName=r.name,this.selectedDb=r.name),yield jA(this.indexedDB,r.name,r.version,r.objectStoresMeta,r.migrationFactory),it(this.indexedDB,r.name).then(i=>{i.version!==r.version&&(this.dbConfigs[r.name].version=i.version)})})}get dbConfig(){return this.dbConfigs[this.selectedDb]}getDatabaseVersion(){return new Ae(r=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{r.next(s.version),r.complete()}).catch(s=>r.error(`error during get version of database => ${s} `))})}selectDb(r){if(r=r??this.defaultDatabaseName,!r)throw new Error("No database name specified and no default database set.");if(!Object.keys(this.dbConfigs).includes(r))throw new Error(`NgxIndexedDB: Database ${r} is not initialized.`);this.selectedDb=r}createObjectStore(r,s){return y(this,null,function*(){let i=[r];yield jA(this.indexedDB,this.dbConfig.name,++this.dbConfig.version,i,s)})}add(r,s,i){return new Ae(o=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(a=>{let l=Rt(a,Dt(St.readwrite,r,f=>o.error(f))).objectStore(r),d=i?l.add(s,i):l.add(s);d.onsuccess=f=>y(this,null,function*(){let m=f.target.result,g=l.get(m);g.onsuccess=b=>{o.next(b.target.result),o.complete()},g.onerror=b=>{o.error(b)}}),d.onerror=f=>{o.error(f)}}).catch(a=>o.error(a))})}bulkAdd(r,s){let i=new Promise((o,a)=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(c=>{let d=Rt(c,Dt(St.readwrite,r,o,a)).objectStore(r),f=s.map(m=>new Promise((g,b)=>{let C=m.key;delete m.key;let x=C?d.add(m,C):d.add(m);x.onsuccess=N=>{let U=N.target.result;g(U)}}));o(Promise.all(f))}).catch(c=>a(c))});return Ve(i)}bulkDelete(r,s){let i=s.map(o=>new Promise((a,c)=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(l=>{let d=Rt(l,Dt(St.readwrite,r,c,a));d.objectStore(r).delete(o),d.oncomplete=()=>{this.getAll(r).pipe(Vt(1)).subscribe(m=>{a(m)})}}).catch(l=>c(l))}));return Ve(Promise.all(i))}getByKey(r,s){return new Ae(i=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{let l=Rt(o,Dt(St.readonly,r,i.error)).objectStore(r).get(s);l.onsuccess=d=>{i.next(d.target.result),i.complete()},l.onerror=d=>{i.error(d)}}).catch(o=>i.error(o))})}bulkGet(r,s){let i=s.map(o=>this.getByKey(r,o));return new Ae(o=>{lr(i).subscribe(a=>{o.next(a),o.complete()})})}getByID(r,s){return new Ae(i=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{bn(o,r,d=>i.error(d));let l=Rt(o,Dt(St.readonly,r,i.error,i.next)).objectStore(r).get(s);l.onsuccess=d=>{i.next(d.target.result)}}).catch(o=>i.error(o))})}getByIndex(r,s,i){return new Ae(o=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(a=>{bn(a,r,m=>o.error(m));let f=Rt(a,Dt(St.readonly,r,o.error)).objectStore(r).index(s).get(i);f.onsuccess=m=>{o.next(m.target.result),o.complete()}}).catch(a=>o.error(a))})}getAll(r){return new Ae(s=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(i=>{bn(i,r,l=>s.error(l));let c=Rt(i,Dt(St.readonly,r,s.error,s.next)).objectStore(r).getAll();c.onerror=l=>{s.error(l)},c.onsuccess=({target:{result:l}})=>{s.next(l),s.complete()}}).catch(i=>s.error(i))})}update(r,s){return new Ae(i=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{bn(o,r,d=>i.error(d));let c=Rt(o,Dt(St.readwrite,r,d=>i.error(d))).objectStore(r),l=c.put(s);l.onsuccess=d=>y(this,null,function*(){let f=d.target.result,m=c.get(f);m.onsuccess=g=>{i.next(g.target.result),i.complete()}})}).catch(o=>i.error(o))})}bulkPut(r,s){let i;return new Ae(o=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(a=>{bn(a,r,l=>o.error(l)),i=Rt(a,Dt(St.readwrite,r,l=>o.error(l)));let c=i.objectStore(r);s.forEach((l,d)=>{let f=c.put(l);d===s.length-1&&(f.onsuccess=m=>{i.commit(),o.next(m.target.result),o.complete()}),f.onerror=m=>{i.abort(),o.error(m)}})}).catch(a=>{i?.abort(),o.error(a)})})}delete(r,s){return new Ae(i=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{bn(o,r,l=>i.error(l));let a=Rt(o,Dt(St.readwrite,r,l=>i.error(l)));a.objectStore(r).delete(s),a.oncomplete=()=>{this.getAll(r).pipe(Vt(1)).subscribe(l=>{i.next(l),i.complete()})}}).catch(o=>i.error(o))})}deleteByKey(r,s){return new Ae(i=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{bn(o,r,l=>i.error(l));let a=Rt(o,Dt(St.readwrite,r,l=>i.error(l))),c=a.objectStore(r);a.oncomplete=()=>{i.next(!0),i.complete()},c.delete(s)}).catch(o=>i.error(o))})}clear(r){return new Ae(s=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(i=>{bn(i,r,c=>s.error(c));let o=Rt(i,Dt(St.readwrite,r,c=>s.error(c)));o.objectStore(r).clear(),o.oncomplete=()=>{s.next(!0),s.complete()}}).catch(i=>s.error(i))})}deleteDatabase(){return new Ae(r=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>y(this,null,function*(){yield s.close();let i=this.indexedDB.deleteDatabase(this.dbConfig.name);i.onsuccess=()=>{r.next(!0),r.complete()},i.onerror=o=>r.error(o),i.onblocked=()=>{throw new Error("Unable to delete database because it's blocked")}})).catch(s=>r.error(s))})}openCursor(r,s,i="next"){return new Ae(o=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(a=>{bn(a,r,f=>o.error(f));let l=Rt(a,Dt(St.readonly,r,o.error)).objectStore(r),d=s===void 0?l.openCursor():l.openCursor(s,i);d.onsuccess=f=>{o.next(f),o.complete()}}).catch(a=>o.error(a))})}openCursorByIndex(r,s,i,o="next",a=St.readonly){let c=new Le;return it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(l=>{bn(l,r,b=>{c.error(b)});let g=Rt(l,Dt(a,r,b=>{c.error(b)},()=>{c.next()})).objectStore(r).index(s).openCursor(i,o);g.onsuccess=b=>{c.next(b)}}).catch(l=>c.error(l)),c}getAllByIndex(r,s,i){let o=[];return new Ae(a=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(c=>{bn(c,r,g=>a.error(g));let m=Rt(c,Dt(St.readonly,r,a.error)).objectStore(r).index(s).openCursor(i);m.onsuccess=g=>{let b=g.target.result;b?(o.push(b.value),b.continue()):(a.next(o),a.complete())}}).catch(c=>a.error(c))})}getAllKeysByIndex(r,s,i){let o=[];return new Ae(a=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(c=>{bn(c,r,g=>a.error(g));let m=Rt(c,Dt(St.readonly,r,a.error)).objectStore(r).index(s).openKeyCursor(i);m.onsuccess=g=>{let b=g.target.result;b?(o.push({primaryKey:b.primaryKey,key:b.key}),b.continue()):(a.next(o),a.complete())}}).catch(c=>a.error(c))})}count(r,s){return new Ae(i=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{bn(o,r,d=>i.error(d));let l=Rt(o,Dt(St.readonly,r,i.error)).objectStore(r).count(s);l.onerror=d=>i.error(d),l.onsuccess=d=>{i.next(d.target.result),i.complete()}}).catch(o=>i.error(o))})}countByIndex(r,s,i){return new Ae(o=>{it(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(a=>{bn(a,r,m=>o.error(m));let f=Rt(a,Dt(St.readonly,r,o.error)).objectStore(r).index(s).count(i);f.onerror=m=>o.error(m),f.onsuccess=m=>{o.next(m.target.result),o.complete()}}).catch(a=>o.error(a))})}deleteObjectStore(r){return k2(this.dbConfig.name,++this.dbConfig.version,r)}};e.\u0275fac=function(s){return new(s||e)(L(qA),L(xt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),qK=(()=>{let e=class e{static forRoot(...r){let s={};for(let i of r)Object.assign(s,{[i.name]:i});return{ngModule:e,providers:[my,{provide:qA,useValue:s}]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({imports:[qo]});let t=e;return t})();var $A=t=>{let e=t.httpHandler;return{setHttpHandler(n){e=n},httpHandler(){return e},updateHttpClientConfig(n,r){e.updateHttpClientConfig(n,r)},httpHandlerConfigs(){return e.httpHandlerConfigs()}}},zA=t=>({httpHandler:t.httpHandler()});var cl=function(t){return t.HTTP="http",t.HTTPS="https",t}(cl||{});var ll=function(t){return t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256",t}(ll||{});var Xo="__smithy_context";var Ee=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let n=new t(z(E({},e),{headers:E({},e.headers)}));return n.query&&(n.query=O2(n.query)),n}static isInstance(e){if(!e)return!1;let n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return t.clone(this)}};function O2(t){return Object.keys(t).reduce((e,n)=>{let r=t[n];return z(E({},e),{[n]:Array.isArray(r)?[...r]:r})},{})}var In=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}};function M2(t){return e=>n=>y(this,null,function*(){let{request:r}=n;return Ee.isInstance(r)&&r.body&&t.runtime==="node"&&t.requestHandler?.constructor?.name!=="FetchHttpHandler"&&(r.headers=z(E({},r.headers),{Expect:"100-continue"})),e(z(E({},n),{request:r}))})}var F2={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},GA=t=>({applyToStack:e=>{e.add(M2(t),F2)}});var py={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},gy=py.WHEN_SUPPORTED;var yy=py.WHEN_SUPPORTED,ft=function(t){return t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.SHA1="SHA1",t.SHA256="SHA256",t}(ft||{});var KA=ft.MD5,HA=ft.CRC32;var ul=[ft.CRC32,ft.CRC32C,ft.SHA1,ft.SHA256],WA=[ft.SHA256,ft.SHA1,ft.CRC32,ft.CRC32C];var QA=(t,{requestChecksumRequired:e,requestAlgorithmMember:n},r)=>{let s=r?HA:KA;if(!n||!t[n])return e?s:void 0;let i=t[n];if(!ul.includes(i))throw new Error(`The checksum algorithm "${i}" is not supported by the client. Select one of ${ul}.`);return i};var Zo=t=>t===ft.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`;var YA=(t,e)=>{let n=t.toLowerCase();for(let r of Object.keys(e))if(n===r.toLowerCase())return!0;return!1};var Wd=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";var Jo=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!Wd(t);var _y=t=>new TextEncoder().encode(t);var V2=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:_y;function an(t){return t instanceof Uint8Array?t:typeof t=="string"?V2(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function Er(t){return typeof t=="string"?t.length===0:t.byteLength===0}function dl(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}function hl(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),n=0;n<t.length;)e[n]=t[n],n+=1;return e}return Uint32Array.from(t)}var by=function(){function t(){this.crc32=new Ri}return t.prototype.update=function(e){Er(e)||this.crc32.update(an(e))},t.prototype.digest=function(){return So(this,void 0,void 0,function(){return Ao(this,function(e){return[2,dl(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new Ri},t}();var Ri=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var n,r;try{for(var s=id(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^j2[(this.checksum^o)&255]}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}();var U2=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],j2=hl(U2);var vy=function(){function t(){this.crc32c=new Ey}return t.prototype.update=function(e){Er(e)||this.crc32c.update(an(e))},t.prototype.digest=function(){return So(this,void 0,void 0,function(){return Ao(this,function(e){return[2,dl(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new Ey},t}();var Ey=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var n,r;try{for(var s=id(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^$2[(this.checksum^o)&255]}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}();var q2=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],$2=hl(q2);var Qd=(t,e)=>({[ft.MD5]:e.md5,[ft.CRC32]:by,[ft.CRC32C]:vy,[ft.SHA1]:e.sha1,[ft.SHA256]:e.sha256})[t];var Rn=t=>new TextEncoder().encode(t);var vr=t=>typeof t=="string"?Rn(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t);var ea=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};var Yd=(t,e)=>{let n=new t;return n.update(vr(e||"")),n.digest()};var XA={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},ZA=(t,e)=>(n,r)=>s=>y(void 0,null,function*(){if(!Ee.isInstance(s.request))return n(s);let{request:i}=s,{body:o,headers:a}=i,{base64Encoder:c,streamHasher:l}=t,{input:d,requestChecksumRequired:f,requestAlgorithmMember:m}=e,g=QA(d,{requestChecksumRequired:f,requestAlgorithmMember:m},!!r.isS3ExpressBucket),b=o,C=a;if(g){let N=Zo(g),U=Qd(g,t);if(Jo(o)){let{getAwsChunkedEncodingStream:j,bodyLengthChecker:H}=t;b=j(o,{base64Encoder:c,bodyLengthChecker:H,checksumLocationName:N,checksumAlgorithmFn:U,streamHasher:l}),C=z(E({},a),{"content-encoding":a["content-encoding"]?`${a["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":a["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":N}),delete C["content-length"]}else if(!YA(N,a)){let j=yield Yd(U,o);C=z(E({},a),{[N]:c(j)})}}return yield n(z(E({},s),{request:z(E({},i),{headers:C,body:b})}))});var Xd=(t=[])=>{let e=[];for(let n of WA)!t.includes(n)||!ul.includes(n)||e.push(n);return e};var JA=t=>{let e=t.lastIndexOf("-");if(e!==-1){let n=t.slice(e+1);if(!n.startsWith("0")){let r=parseInt(n,10);if(!isNaN(r)&&r>=1&&r<=1e4)return!0}}return!1};function wy(t){return new Blob([t]).stream()}var eC=(s,i)=>y(void 0,[s,i],function*(t,{streamHasher:e,checksumAlgorithmFn:n,base64Encoder:r}){let o=Jo(t)?e(n,t):Yd(n,t);return r(yield o)});var tC=(r,s)=>y(void 0,[r,s],function*(t,{config:e,responseAlgorithms:n}){let i=Xd(n),{body:o,headers:a}=t;for(let c of i){let l=Zo(c),d=a[l];if(d){let f=Qd(c,e),{streamHasher:m,base64Encoder:g}=e,b=yield eC(o,{streamHasher:m,checksumAlgorithmFn:f,base64Encoder:g});if(b===d)break;throw new Error(`Checksum mismatch: expected "${b}" but received "${d}" in response header "${l}".`)}}});var nC={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},rC=(t,e)=>(n,r)=>s=>y(void 0,null,function*(){if(!Ee.isInstance(s.request))return n(s);let i=s.input,o=yield n(s),a=o.response,c,{requestValidationModeMember:l,responseAlgorithms:d}=e;if(l&&i[l]==="ENABLED"){let{clientName:f,commandName:m}=r;if(f==="S3Client"&&m==="GetObjectCommand"&&Xd(d).every(C=>{let x=Zo(C),N=a.headers[x];return!N||JA(N)}))return o;let b=Jo(a.body);b&&(c=yield t.streamCollector(a.body),a.body=wy(c)),yield tC(o.response,{config:t,responseAlgorithms:d}),b&&c&&(a.body=wy(c))}return o});var sC=(t,e)=>({applyToStack:n=>{n.add(ZA(t,e),XA),n.addRelativeTo(rC(t,e),nC)}});var Zn=t=>t[Xo]||(t[Xo]={});var Ut=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};var iC=t=>z(E({},t),{requestChecksumCalculation:Ut(t.requestChecksumCalculation??gy),responseChecksumValidation:Ut(t.responseChecksumValidation??yy)});var z2=t=>e=>n=>y(void 0,null,function*(){if(!Ee.isInstance(n.request))return e(n);let{request:r}=n,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let i=r.hostname;r.port!=null&&(i+=`:${r.port}`),r.headers.host=i}return e(n)}),G2={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},oC=t=>({applyToStack:e=>{e.add(z2(t),G2)}});var K2=()=>(t,e)=>n=>y(void 0,null,function*(){try{let s=yield t(n),{clientName:i,commandName:o,logger:a,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:d}=c,f=l??e.inputFilterSensitiveLog,m=d??e.outputFilterSensitiveLog,r=s.output,{$metadata:g}=r,b=ms(r,["$metadata"]);return a?.info?.({clientName:i,commandName:o,input:f(n.input),output:m(b),metadata:g}),s}catch(s){let{clientName:i,commandName:o,logger:a,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:l}=c,d=l??e.inputFilterSensitiveLog;throw a?.error?.({clientName:i,commandName:o,input:d(n.input),error:s,metadata:s.$metadata}),s}}),H2={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},aC=t=>({applyToStack:e=>{e.add(K2(),H2)}});var cC="X-Amzn-Trace-Id",W2="AWS_LAMBDA_FUNCTION_NAME",Q2="_X_AMZN_TRACE_ID",Y2=t=>e=>n=>y(void 0,null,function*(){let{request:r}=n;if(!Ee.isInstance(r)||t.runtime!=="node"||r.headers.hasOwnProperty(cC))return e(n);let s=process.env[W2],i=process.env[Q2],o=a=>typeof a=="string"&&a.length>0;return o(s)&&o(i)&&(r.headers[cC]=i),e(z(E({},n),{request:r}))}),X2={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},lC=t=>({applyToStack:e=>{e.add(Y2(t),X2)}});var Di=(t,e)=>{let n=[];if(t&&n.push(t),e)for(let r of e)n.push(r);return n},Is=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,ta=()=>{let t=[],e=[],n=!1,r=new Set,s=f=>f.sort((m,g)=>uC[g.step]-uC[m.step]||dC[g.priority||"normal"]-dC[m.priority||"normal"]),i=f=>{let m=!1,g=b=>{let C=Di(b.name,b.aliases);if(C.includes(f)){m=!0;for(let x of C)r.delete(x);return!1}return!0};return t=t.filter(g),e=e.filter(g),m},o=f=>{let m=!1,g=b=>{if(b.middleware===f){m=!0;for(let C of Di(b.name,b.aliases))r.delete(C);return!1}return!0};return t=t.filter(g),e=e.filter(g),m},a=f=>(t.forEach(m=>{f.add(m.middleware,E({},m))}),e.forEach(m=>{f.addRelativeTo(m.middleware,E({},m))}),f.identifyOnResolve?.(d.identifyOnResolve()),f),c=f=>{let m=[];return f.before.forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m.push(f),f.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m},l=(f=!1)=>{let m=[],g=[],b={};return t.forEach(x=>{let N=z(E({},x),{before:[],after:[]});for(let U of Di(N.name,N.aliases))b[U]=N;m.push(N)}),e.forEach(x=>{let N=z(E({},x),{before:[],after:[]});for(let U of Di(N.name,N.aliases))b[U]=N;g.push(N)}),g.forEach(x=>{if(x.toMiddleware){let N=b[x.toMiddleware];if(N===void 0){if(f)return;throw new Error(`${x.toMiddleware} is not found when adding ${Is(x.name,x.aliases)} middleware ${x.relation} ${x.toMiddleware}`)}x.relation==="after"&&N.after.push(x),x.relation==="before"&&N.before.push(x)}}),s(m).map(c).reduce((x,N)=>(x.push(...N),x),[])},d={add:(f,m={})=>{let{name:g,override:b,aliases:C}=m,x=E({step:"initialize",priority:"normal",middleware:f},m),N=Di(g,C);if(N.length>0){if(N.some(U=>r.has(U))){if(!b)throw new Error(`Duplicate middleware name '${Is(g,C)}'`);for(let U of N){let j=t.findIndex(ae=>ae.name===U||ae.aliases?.some(le=>le===U));if(j===-1)continue;let H=t[j];if(H.step!==x.step||x.priority!==H.priority)throw new Error(`"${Is(H.name,H.aliases)}" middleware with ${H.priority} priority in ${H.step} step cannot be overridden by "${Is(g,C)}" middleware with ${x.priority} priority in ${x.step} step.`);t.splice(j,1)}}for(let U of N)r.add(U)}t.push(x)},addRelativeTo:(f,m)=>{let{name:g,override:b,aliases:C}=m,x=E({middleware:f},m),N=Di(g,C);if(N.length>0){if(N.some(U=>r.has(U))){if(!b)throw new Error(`Duplicate middleware name '${Is(g,C)}'`);for(let U of N){let j=e.findIndex(ae=>ae.name===U||ae.aliases?.some(le=>le===U));if(j===-1)continue;let H=e[j];if(H.toMiddleware!==x.toMiddleware||H.relation!==x.relation)throw new Error(`"${Is(H.name,H.aliases)}" middleware ${H.relation} "${H.toMiddleware}" middleware cannot be overridden by "${Is(g,C)}" middleware ${x.relation} "${x.toMiddleware}" middleware.`);e.splice(j,1)}}for(let U of N)r.add(U)}e.push(x)},clone:()=>a(ta()),use:f=>{f.applyToStack(d)},remove:f=>typeof f=="string"?i(f):o(f),removeByTag:f=>{let m=!1,g=b=>{let{tags:C,name:x,aliases:N}=b;if(C&&C.includes(f)){let U=Di(x,N);for(let j of U)r.delete(j);return m=!0,!1}return!0};return t=t.filter(g),e=e.filter(g),m},concat:f=>{let m=a(ta());return m.use(f),m.identifyOnResolve(n||m.identifyOnResolve()||(f.identifyOnResolve?.()??!1)),m},applyToStack:a,identify:()=>l(!0).map(f=>{let m=f.step??f.relation+" "+f.toMiddleware;return Is(f.name,f.aliases)+" - "+m}),identifyOnResolve(f){return typeof f=="boolean"&&(n=f),n},resolve:(f,m)=>{for(let g of l().map(b=>b.middleware).reverse())f=g(f,m);return n&&console.log(d.identify()),f}};return d},uC={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},dC={high:3,normal:2,low:1};var Zd=class{constructor(e){this.config=e,this.middlewareStack=ta()}send(e,n,r){let s=typeof n!="function"?n:void 0,i=typeof n=="function"?n:r,o=s===void 0&&this.config.cacheMiddleware===!0,a;if(o){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}};var Qr={},ki=new Array(64);for(let t=0,e=65,n=90;t+e<=n;t++){let r=String.fromCharCode(t+e);Qr[r]=t,ki[t]=r}for(let t=0,e=97,n=122;t+e<=n;t++){let r=String.fromCharCode(t+e),s=t+26;Qr[r]=s,ki[s]=r}for(let t=0;t<10;t++){Qr[t.toString(10)]=t+52;let e=t.toString(10),n=t+52;Qr[e]=n,ki[n]=e}Qr["+"]=62;ki[62]="+";Qr["/"]=63;ki[63]="/";var Rs=6,Pi=8,hC=63;var na=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;let n=new ArrayBuffer(e),r=new DataView(n);for(let s=0;s<t.length;s+=4){let i=0,o=0;for(let l=s,d=s+3;l<=d;l++)if(t[l]!=="="){if(!(t[l]in Qr))throw new TypeError(`Invalid character ${t[l]} in base64 string.`);i|=Qr[t[l]]<<(d-l)*Rs,o+=Rs}else i>>=Rs;let a=s/4*3;i>>=o%Pi;let c=Math.floor(o/Pi);for(let l=0;l<c;l++){let d=(c-l-1)*Pi;r.setUint8(a+l,(i&255<<d)>>d)}}return new Uint8Array(n)};function ra(t){let e;typeof t=="string"?e=Rn(t):e=t;let n=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let o=0,a=0;for(let l=i,d=Math.min(i+3,e.length);l<d;l++)o|=e[l]<<(d-l-1)*Pi,a+=Pi;let c=Math.ceil(a/Rs);o<<=c*Rs-a;for(let l=1;l<=c;l++){let d=(c-l)*Rs;s+=ki[(o&hC<<d)>>d]}s+="==".slice(0,4-c)}return s}function fC(t,e="utf-8"){return e==="base64"?ra(t):ea(t)}function mC(t,e){return e==="base64"?Yr.mutate(na(t)):Yr.mutate(Rn(t))}var Yr=class t extends Uint8Array{static fromString(e,n="utf-8"){switch(typeof e){case"string":return mC(e,n);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return fC(this,e)}};var pC=(t,e)=>{let{base64Encoder:n,bodyLengthChecker:r,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=e,a=n!==void 0&&r!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,t):void 0,l=t.getReader();return new ReadableStream({pull(f){return y(this,null,function*(){let{value:m,done:g}=yield l.read();if(g){if(f.enqueue(`0\r
`),a){let b=n(yield c);f.enqueue(`${i}:${b}\r
`),f.enqueue(`\r
`)}f.close()}else f.enqueue(`${(r(m)||0).toString(16)}\r
${m}\r
`)})}})};var Jn=t=>encodeURIComponent(t).replace(/[!'()*]/g,Z2),Z2=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function gC(t){let e=[];for(let n of Object.keys(t).sort()){let r=t[n];if(n=Jn(n),Array.isArray(r))for(let s=0,i=r.length;s<i;s++)e.push(`${n}=${Jn(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${Jn(r)}`),e.push(s)}}return e.join("&")}function yC(t=0){return new Promise((e,n)=>{t&&setTimeout(()=>{let r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",n(r)},t)})}var xy={supported:void 0},Jd=class t{static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(n=>n||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),xy.supported===void 0&&(xy.supported=typeof Request<"u"&&"keepalive"in new Request("https://[::1]"))}destroy(){}handle(r){return y(this,arguments,function*(e,{abortSignal:n}={}){this.config||(this.config=yield this.configProvider);let s=this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(n?.aborted){let U=new Error("Request aborted");return U.name="AbortError",Promise.reject(U)}let a=e.path,c=gC(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let l="";if(e.username!=null||e.password!=null){let U=e.username??"",j=e.password??"";l=`${U}:${j}@`}let{port:d,method:f}=e,m=`${e.protocol}//${l}${e.hostname}${d?`:${d}`:""}${a}`,g=f==="GET"||f==="HEAD"?void 0:e.body,b={body:g,headers:new Headers(e.headers),method:f,credentials:o};this.config?.cache&&(b.cache=this.config.cache),g&&(b.duplex="half"),typeof AbortController<"u"&&(b.signal=n),xy.supported&&(b.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(b,this.config.requestInit(e));let C=()=>{},x=new Request(m,b),N=[fetch(x).then(U=>{let j=U.headers,H={};for(let le of j.entries())H[le[0]]=le[1];return U.body!=null?{response:new In({headers:H,reason:U.statusText,statusCode:U.status,body:U.body})}:U.blob().then(le=>({response:new In({headers:H,reason:U.statusText,statusCode:U.status,body:le})}))}),yC(s)];return n&&N.push(new Promise((U,j)=>{let H=()=>{let ae=new Error("Request aborted");ae.name="AbortError",j(ae)};if(typeof n.addEventListener=="function"){let ae=n;ae.addEventListener("abort",H,{once:!0}),C=()=>ae.removeEventListener("abort",H)}else n.onabort=H})),Promise.race(N).finally(C)})}updateHttpClientConfig(e,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=n,r))}httpHandlerConfigs(){return this.config??{}}};var eh=t=>typeof Blob=="function"&&t instanceof Blob?J2(t):eV(t);function J2(t){return y(this,null,function*(){let e=yield tV(t),n=na(e);return new Uint8Array(n)})}function eV(t){return y(this,null,function*(){let e=[],n=t.getReader(),r=!1,s=0;for(;!r;){let{done:a,value:c}=yield n.read();c&&(e.push(c),s+=c.length),r=a}let i=new Uint8Array(s),o=0;for(let a of e)i.set(a,o),o+=a.length;return i})}function tV(t){return new Promise((e,n)=>{let r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));let s=r.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(t)})}var _C={},Sy={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),_C[t]=e,Sy[e]=t}function th(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){let r=t.slice(n,n+2).toLowerCase();if(r in Sy)e[n/2]=Sy[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function ot(t){let e="";for(let n=0;n<t.byteLength;n++)e+=_C[t[n]];return e}var Ay=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);var bC="The stream has already been transformed.",vC=t=>{if(!EC(t)&&!Ay(t)){let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1,n=()=>y(void 0,null,function*(){if(e)throw new Error(bC);return e=!0,yield eh(t)}),r=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:n,transformToString:s=>y(void 0,null,function*(){let i=yield n();if(s==="base64")return ra(i);if(s==="hex")return ot(i);if(s===void 0||s==="utf8"||s==="utf-8")return ea(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")}),transformToWebStream:()=>{if(e)throw new Error(bC);if(e=!0,EC(t))return r(t);if(Ay(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},EC=t=>typeof Blob=="function"&&t instanceof Blob;function wC(t){return y(this,null,function*(){return typeof t.stream=="function"&&(t=t.stream()),t.tee()})}function xC(t,e){return y(this,null,function*(){let n=0,r=[],s=t.getReader(),i=!1;for(;!i;){let{done:c,value:l}=yield s.read();if(l&&(r.push(l),n+=l?.byteLength??0),n>=e)break;i=c}s.releaseLock();let o=new Uint8Array(Math.min(e,n)),a=0;for(let c of r){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o})}var nh=(...n)=>y(void 0,[...n],function*(t=new Uint8Array,e){if(t instanceof Uint8Array)return Yr.mutate(t);if(!t)return Yr.mutate(new Uint8Array);let r=e.streamCollector(t);return Yr.mutate(yield r)});var Ni=class{constructor(){this.middlewareStack=ta()}static classBuilder(){return new Cy}resolveMiddlewareWithContext(e,n,r,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:l,additionalContext:d,CommandCtor:f}){for(let x of s.bind(this)(f,e,n,r))this.middlewareStack.use(x);let m=e.concat(this.middlewareStack),{logger:g}=n,b=E({logger:g,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Xo]:E({commandInstance:this},l)},d),{requestHandler:C}=n;return m.resolve(x=>C.handle(x.request,r||{}),b)}},Cy=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,n,r={}){return this._smithyContext=E({service:e,operation:n},r),this}c(e={}){return this._additionalContext=e,this}n(e,n){return this._clientName=e,this._commandName=n,this}f(e=r=>r,n=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=n,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){let e=this,n;return n=class extends Ni{static getEndpointParameterInstructions(){return e._ep}constructor(...[r]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=r??{},e._init(this)}resolveMiddleware(r,s,i){return this.resolveMiddlewareWithContext(r,s,i,{CommandCtor:n,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}};var Dn="***SensitiveInformation***";var Ty=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}};var nV=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&NC.warn(PC(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},rV=Math.ceil(34028234663852886e22),SC=t=>{let e=nV(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>rV)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},sV=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}};var AC=t=>TC(t,16),CC=t=>TC(t,8),TC=(t,e)=>{let n=sV(t);if(n!==void 0&&iV(n,e)!==n)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return n},iV=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},Iy=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},IC=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},sa=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return NC.warn(PC(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}};var RC=t=>SC(typeof t=="string"?Ry(t):t),oV=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ry=t=>{let e=t.match(oV);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)};var DC=t=>AC(typeof t=="string"?Ry(t):t),kC=t=>CC(typeof t=="string"?Ry(t):t),PC=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),NC={warn:console.warn};var aV=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],OC=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function MC(t){let e=t.getUTCFullYear(),n=t.getUTCMonth(),r=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,l=i<10?`0${i}`:`${i}`,d=o<10?`0${o}`:`${o}`,f=a<10?`0${a}`:`${a}`;return`${aV[r]}, ${c} ${OC[n]} ${e} ${l}:${d}:${f} GMT`}var xX=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var cV=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),FC=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=cV.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[n,r,s,i,o,a,c,l,d]=e,f=DC(LC(r)),m=fl(s,"month",1,12),g=fl(i,"day",1,31),b=lV(f,m,g,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l});return d.toUpperCase()!="Z"&&b.setTime(b.getTime()-mV(d)),b},SX=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),AX=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),CX=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var lV=(t,e,n,r)=>{let s=e-1;return dV(t,s,n),new Date(Date.UTC(t,s,n,fl(r.hours,"hour",0,23),fl(r.minutes,"minute",0,59),fl(r.seconds,"seconds",0,60),fV(r.fractionalMilliseconds)))};var TX=50*365*24*60*60*1e3;var uV=[31,28,31,30,31,30,31,31,30,31,30,31],dV=(t,e,n)=>{let r=uV[e];if(e===1&&hV(t)&&(r=29),n>r)throw new TypeError(`Invalid day for ${OC[e]} in ${t}: ${n}`)},hV=t=>t%4===0&&(t%100!==0||t%400===0),fl=(t,e,n,r)=>{let s=kC(LC(t));if(s<n||s>r)throw new TypeError(`${e} must be between ${n} and ${r}, inclusive`);return s},fV=t=>t==null?0:RC("0."+t)*1e3,mV=t=>{let e=t[0],n=1;if(e=="+")n=1;else if(e=="-")n=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let r=Number(t.substring(1,3)),s=Number(t.substring(4,6));return n*(r*60+s)*60*1e3},LC=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)};var rh=class t extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,t.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}},jn=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(t[r]==null||t[r]==="")&&(t[r]=s)});let n=t.message||t.Message||"UnknownError";return t.message=n,delete t.Message,t};var pV=({output:t,parsedBody:e,exceptionCtor:n,errorCode:r})=>{let s=gV(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new n({name:e?.code||e?.Code||r||i||"UnknownError",$fault:"client",$metadata:s});throw jn(o,e)},BC=t=>({output:e,parsedBody:n,errorCode:r})=>{pV({output:e,parsedBody:n,exceptionCtor:t,errorCode:r})},gV=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]});var VC=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};function Dy(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var UC=t=>{let e=[];for(let n in ll){let r=ll[n];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{_checksumAlgorithms:e,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},jC=t=>{let e={};return t.checksumAlgorithms().forEach(n=>{e[n.algorithmId()]=n.checksumConstructor()}),e};var qC=t=>{let e=t.retryStrategy;return{setRetryStrategy(n){e=n},retryStrategy(){return e}}},$C=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e};var zC=t=>E(E({},UC(t)),qC(t));var GC=t=>E(E({},jC(t)),$C(t));var ky=t=>{let e="#text";for(let n in t)t.hasOwnProperty(n)&&t[n][e]!==void 0?t[n]=t[n][e]:typeof t[n]=="object"&&t[n]!==null&&(t[n]=ky(t[n]));return t};var Ds=t=>t!=null;var Py=function(){let t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),n=new e;return Object.setPrototypeOf(n,t.prototype),n};Py.prototype=Object.create(String.prototype,{constructor:{value:Py,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Py,String);var ks=class{trace(){}debug(){}info(){}warn(){}error(){}};function jt(t,e,n){let r,s,i;if(typeof e>"u"&&typeof n>"u")r={},i=t;else{if(r=t,typeof e=="function")return s=e,i=n,yV(r,s,i);i=e}for(let o of Object.keys(i)){if(!Array.isArray(i[o])){r[o]=i[o];continue}_V(r,null,i,o)}return r}var yV=(t,e,n)=>jt(t,Object.entries(n).reduce((r,[s,i])=>(Array.isArray(i)?r[s]=i:typeof i=="function"?r[s]=[e,i()]:r[s]=[e,i],r),{})),_V=(t,e,n,r)=>{if(e!==null){let o=n[r];typeof o=="function"&&(o=[,o]);let[a=bV,c=EV,l=r]=o;(typeof a=="function"&&a(e[l])||typeof a!="function"&&a)&&(t[r]=c(e[l]));return}let[s,i]=n[r];if(typeof i=="function"){let o,a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[r]=o:c&&(t[r]=i())}else{let o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(t[r]=i)}},bV=t=>t!=null,EV=t=>t;var KC=(t,e,n,r,s,i)=>{if(e!=null&&e[n]!==void 0){let o=r();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");t=t.replace(s,i?o.split("/").map(a=>Dy(a)).join("/"):Dy(o))}else throw new Error("No value provided for input HTTP label: "+n+".");return t};var HC=t=>t.toISOString().replace(".000Z","Z");var vV="content-length";function wV(){return(t,e)=>n=>y(this,null,function*(){let{request:r}=n;if(Ee.isInstance(r)&&!(vV in r.headers)){let s="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof e?.logger?.warn=="function"&&!(e.logger instanceof ks)?e.logger.warn(s):console.warn(s)}return t(E({},n))})}var xV={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},WC=t=>({applyToStack:e=>{e.add(wV(),xV)}});var QC=t=>(e,n)=>r=>y(void 0,null,function*(){let s=yield t.region(),i=t.region,o=()=>{};n.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:()=>y(void 0,null,function*(){return n.__s3RegionRedirect})}),o=()=>Object.defineProperty(t,"region",{writable:!0,value:i}));try{let a=yield e(r);if(n.__s3RegionRedirect){o();let c=yield t.region();if(s!==c)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}}),YC={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function SV(t){return(e,n)=>r=>y(this,null,function*(){try{return yield e(r)}catch(s){if(t.followRegionRedirects&&s?.$metadata?.httpStatusCode===301){try{let i=s.$response.headers["x-amz-bucket-region"];n.logger?.debug(`Redirecting from ${yield t.region()} to ${i}`),n.__s3RegionRedirect=i}catch(i){throw new Error("Region redirect failed: "+i)}return e(r)}else throw s}})}var AV={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},XC=t=>({applyToStack:e=>{e.add(SV(t),AV),e.addRelativeTo(QC(t),YC)}});var Ny=(()=>{class t{constructor(n={}){this.data=n,this.lastPurgeTime=Date.now()}get(n){let r=this.data[n];if(r)return r}set(n,r){return this.data[n]=r,r}delete(n){delete this.data[n]}purgeExpired(){return y(this,null,function*(){let n=Date.now();if(!(this.lastPurgeTime+t.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>n))for(let r in this.data){let s=this.data[r];if(!s.isRefreshing){let i=yield s.identity;i.expiration&&i.expiration.getTime()<n&&delete this.data[r]}}})}}return t.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4,t})();var Oi=class{constructor(e,n=!1,r=Date.now()){this._identity=e,this.isRefreshing=n,this.accessed=r}get identity(){return this.accessed=Date.now(),this._identity}};var Oy=(()=>{class t{constructor(n,r=new Ny){this.createSessionFn=n,this.cache=r}getS3ExpressIdentity(n,r){return y(this,null,function*(){let s=r.Bucket,{cache:i}=this,o=i.get(s);return o?o.identity.then(a=>(a.expiration?.getTime()??0)<Date.now()?i.set(s,new Oi(this.getIdentity(s))).identity:((a.expiration?.getTime()??0)<Date.now()+t.REFRESH_WINDOW_MS&&!o.isRefreshing&&(o.isRefreshing=!0,this.getIdentity(s).then(d=>{i.set(s,new Oi(Promise.resolve(d)))})),a)):i.set(s,new Oi(this.getIdentity(s))).identity})}getIdentity(n){return y(this,null,function*(){yield this.cache.purgeExpired().catch(i=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+i)});let r=yield this.createSessionFn(n);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}})}}return t.REFRESH_WINDOW_MS=6e4,t})();var ZC="X-Amz-Algorithm",JC="X-Amz-Credential",My="X-Amz-Date",eT="X-Amz-SignedHeaders",tT="X-Amz-Expires",Fy="X-Amz-Signature",Ly="X-Amz-Security-Token";var By="authorization",Vy=My.toLowerCase(),TV="date",nT=[By,Vy,TV],rT=Fy.toLowerCase(),ml="x-amz-content-sha256",sT=Ly.toLowerCase();var iT={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},oT=/^proxy-/,aT=/^sec-/;var sh="AWS4-HMAC-SHA256";var cT="AWS4-HMAC-SHA256-PAYLOAD",lT="UNSIGNED-PAYLOAD",uT=50,Uy="aws4_request",dT=60*60*24*7;var ih={},jy=[],oh=(t,e,n)=>`${t}/${e}/${n}/${Uy}`,fT=(t,e,n,r,s)=>y(void 0,null,function*(){let i=yield hT(t,e.secretAccessKey,e.accessKeyId),o=`${n}:${r}:${s}:${ot(i)}:${e.sessionToken}`;if(o in ih)return ih[o];for(jy.push(o);jy.length>uT;)delete ih[jy.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[n,r,s,Uy])a=yield hT(t,a,c);return ih[o]=a});var hT=(t,e,n)=>{let r=new t(e);return r.update(vr(n)),r.digest()};var ah=({headers:t},e,n)=>{let r={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let i=s.toLowerCase();(i in iT||e?.has(i)||oT.test(i)||aT.test(i))&&(!n||n&&!n.has(i))||(r[i]=t[s].trim().replace(/\s+/g," "))}return r};var qy=({query:t={}})=>{let e=[],n={};for(let r of Object.keys(t)){if(r.toLowerCase()===rT)continue;let s=Jn(r);e.push(s);let i=t[r];typeof i=="string"?n[s]=`${s}=${Jn(i)}`:Array.isArray(i)&&(n[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${Jn(a)}`]),[]).sort().join("&"))}return e.sort().map(r=>n[r]).filter(r=>r).join("&")};var pl=(r,s)=>y(void 0,[r,s],function*({headers:t,body:e},n){for(let i of Object.keys(t))if(i.toLowerCase()===ml)return t[i];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||Wd(e)){let i=new n;return i.update(vr(e)),ot(yield i.digest())}return lT});var ch=class{format(e){let n=[];for(let i of Object.keys(e)){let o=Rn(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}let r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0)),s=0;for(let i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":let a=Rn(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let l=new Uint8Array(c.buffer);return l.set(a,3),l;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set($y.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!IV.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let f=new Uint8Array(17);return f[0]=9,f.set(th(e.value.replace(/\-/g,"")),1),f}}};var IV=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,$y=class t{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&mT(n),new t(n)}valueOf(){let e=this.bytes.slice(0),n=e[0]&128;return n&&mT(e),parseInt(ot(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function mT(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var pT=(t,e)=>{t=t.toLowerCase();for(let n of Object.keys(e))if(t===n.toLowerCase())return!0;return!1};var zy=(t,e={})=>{let{headers:n,query:r={}}=Ee.clone(t);for(let s of Object.keys(n)){let i=s.toLowerCase();i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)&&(r[s]=n[s],delete n[s])}return z(E({},t),{headers:n,query:r})};var lh=t=>{t=Ee.clone(t);for(let e of Object.keys(t.headers))nT.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t};var gT=t=>RV(t).toISOString().replace(/\.\d{3}Z$/,"Z"),RV=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;var Mi=class{constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:o=!0}){this.headerFormatter=new ch,this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Ut(r),this.credentialProvider=Ut(n)}presign(r){return y(this,arguments,function*(e,n={}){let{signingDate:s=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:c,signingRegion:l,signingService:d}=n,f=yield this.credentialProvider();this.validateResolvedCredentials(f);let m=l??(yield this.regionProvider()),{longDate:g,shortDate:b}=uh(s);if(i>dT)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let C=oh(b,m,d??this.service),x=zy(lh(e),{unhoistableHeaders:a});f.sessionToken&&(x.query[Ly]=f.sessionToken),x.query[ZC]=sh,x.query[JC]=`${f.accessKeyId}/${C}`,x.query[My]=g,x.query[tT]=i.toString(10);let N=ah(x,o,c);return x.query[eT]=yT(N),x.query[Fy]=yield this.getSignature(g,C,this.getSigningKey(f,m,b,d),this.createCanonicalRequest(x,N,yield pl(e,this.sha256))),x})}sign(e,n){return y(this,null,function*(){return typeof e=="string"?this.signString(e,n):e.headers&&e.payload?this.signEvent(e,n):e.message?this.signMessage(e,n):this.signRequest(e,n)})}signEvent(a,c){return y(this,arguments,function*({headers:e,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:i,signingService:o}){let l=i??(yield this.regionProvider()),{shortDate:d,longDate:f}=uh(r),m=oh(d,l,o??this.service),g=yield pl({headers:{},body:n},this.sha256),b=new this.sha256;b.update(e);let C=ot(yield b.digest()),x=[cT,f,m,s,C,g].join(`
`);return this.signString(x,{signingDate:r,signingRegion:l,signingService:o})})}signMessage(i,o){return y(this,arguments,function*(e,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:e.priorSignature}).then(c=>({message:e.message,signature:c}))})}signString(i){return y(this,arguments,function*(e,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){let o=yield this.credentialProvider();this.validateResolvedCredentials(o);let a=r??(yield this.regionProvider()),{shortDate:c}=uh(n),l=new this.sha256(yield this.getSigningKey(o,a,c,s));return l.update(vr(e)),ot(yield l.digest())})}signRequest(a){return y(this,arguments,function*(e,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:i,signingService:o}={}){let c=yield this.credentialProvider();this.validateResolvedCredentials(c);let l=i??(yield this.regionProvider()),d=lh(e),{longDate:f,shortDate:m}=uh(n),g=oh(m,l,o??this.service);d.headers[Vy]=f,c.sessionToken&&(d.headers[sT]=c.sessionToken);let b=yield pl(d,this.sha256);!pT(ml,d.headers)&&this.applyChecksum&&(d.headers[ml]=b);let C=ah(d,s,r),x=yield this.getSignature(f,g,this.getSigningKey(c,l,m,o),this.createCanonicalRequest(d,C,b));return d.headers[By]=`${sh} Credential=${c.accessKeyId}/${g}, SignedHeaders=${yT(C)}, Signature=${x}`,d})}createCanonicalRequest(e,n,r){let s=Object.keys(n).sort();return`${e.method}
${this.getCanonicalPath(e)}
${qy(e)}
${s.map(i=>`${i}:${n[i]}`).join(`
`)}

${s.join(";")}
${r}`}createStringToSign(e,n,r){return y(this,null,function*(){let s=new this.sha256;s.update(vr(r));let i=yield s.digest();return`${sh}
${e}
${n}
${ot(i)}`})}getCanonicalPath({path:e}){if(this.uriEscapePath){let n=[];for(let i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?n.pop():n.push(i));let r=`${e?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&e?.endsWith("/")?"/":""}`;return Jn(r).replace(/%2F/g,"/")}return e}getSignature(e,n,r,s){return y(this,null,function*(){let i=yield this.createStringToSign(e,n,s),o=new this.sha256(yield r);return o.update(vr(i)),ot(yield o.digest())})}getSigningKey(e,n,r,s){return fT(this.sha256,e,r,n,s||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},uh=t=>{let e=gT(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},yT=t=>Object.keys(t).sort().join(";");var ET="Directory",vT="S3Express",wT="sigv4-s3express",dh="X-Amz-S3session-Token",gl=dh.toLowerCase();var yl=class extends Mi{signWithCredentials(e,n,r){return y(this,null,function*(){let s=xT(n);e.headers[gl]=n.sessionToken;let i=this;return ST(i,s),i.signRequest(e,r??{})})}presignWithCredentials(e,n,r){return y(this,null,function*(){let s=xT(n);return delete e.headers[gl],e.headers[dh]=n.sessionToken,e.query=e.query??{},e.query[dh]=n.sessionToken,ST(this,s),this.presign(e,r)})}};function xT(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function ST(t,e){let n=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),r=t.credentialProvider,s=()=>(clearTimeout(n),t.credentialProvider=r,Promise.resolve(e));t.credentialProvider=s}var AT=t=>(e,n)=>r=>y(void 0,null,function*(){if(n.endpointV2){let s=n.endpointV2,i=s.properties?.authSchemes?.[0]?.name===wT;if((s.properties?.backend===vT||s.properties?.bucketType===ET)&&(n.isS3ExpressBucket=!0),i){let a=r.input.Bucket;if(a){let c=yield t.s3ExpressIdentityProvider.getS3ExpressIdentity(yield t.credentials(),{Bucket:a});n.s3ExpressIdentity=c,Ee.isInstance(r.request)&&c.sessionToken&&(r.request.headers[gl]=c.sessionToken)}}}return e(r)}),CT={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Gy=t=>({applyToStack:e=>{e.add(AT(t),CT)}});function DV(t){let e=new Map;for(let n of t)e.set(n.schemeId,n);return e}var Ky=(t,e)=>(n,r)=>s=>y(void 0,null,function*(){let i=t.httpAuthSchemeProvider(yield e.httpAuthSchemeParametersProvider(t,r,s.input)),o=DV(t.httpAuthSchemes),a=Zn(r),c=[];for(let l of i){let d=o.get(l.schemeId);if(!d){c.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}let f=d.identityProvider(yield e.identityProviderConfigProvider(t));if(!f){c.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:m={},signingProperties:g={}}=l.propertiesExtractor?.(t,r)||{};l.identityProperties=Object.assign(l.identityProperties||{},m),l.signingProperties=Object.assign(l.signingProperties||{},g),a.selectedHttpAuthScheme={httpAuthOption:l,identity:yield f(l.identityProperties),signer:d.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(c.join(`
`));return n(s)});var TT=t=>y(void 0,null,function*(){let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),MV(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!OV(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t}),kV=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,PV=/(\d+\.){3}\d+/,NV=/\.\./;var OV=t=>kV.test(t)&&!PV.test(t)&&!NV.test(t),MV=t=>{let[e,n,r,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&n&&r&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o};var IT=(t,e,n)=>{let r=()=>y(void 0,null,function*(){let s=n[t]??n[e];return typeof s=="function"?s():s});return t==="credentialScope"||e==="CredentialScope"?()=>y(void 0,null,function*(){let s=typeof n.credentials=="function"?yield n.credentials():n.credentials;return s?.credentialScope??s?.CredentialScope}):t==="accountId"||e==="AccountId"?()=>y(void 0,null,function*(){let s=typeof n.credentials=="function"?yield n.credentials():n.credentials;return s?.accountId??s?.AccountId}):t==="endpoint"||e==="endpoint"?()=>y(void 0,null,function*(){let s=yield r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}):r};var hh=t=>y(void 0,null,function*(){});function RT(t){let e={};if(t=t.replace(/^\?/,""),t)for(let n of t.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in e?Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]:e[r]=s}return e}var ia=t=>{if(typeof t=="string")return ia(new URL(t));let{hostname:e,pathname:n,port:r,protocol:s,search:i}=t,o;return i&&(o=RT(i)),{hostname:e,port:r?parseInt(r):void 0,protocol:s,path:n,query:o}};var fh=t=>typeof t=="object"?"url"in t?ia(t.url):t:ia(t);var DT=(t,e,n,r)=>y(void 0,null,function*(){if(!n.endpoint){let o;n.serviceConfiguredEndpoint?o=yield n.serviceConfiguredEndpoint():o=yield hh(n.serviceId),o&&(n.endpoint=()=>Promise.resolve(fh(o)))}let s=yield Hy(t,e,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)}),Hy=(t,e,n)=>y(void 0,null,function*(){let r={},s=e?.getEndpointParameterInstructions?.()||{};for(let[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":r[i]=o.value;break;case"contextParams":r[i]=t[o.name];break;case"clientContextParams":case"builtInParams":r[i]=yield IT(o.name,i,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&(yield TT(r)),r});var kT=({config:t,instructions:e})=>(n,r)=>s=>y(void 0,null,function*(){let i=yield DT(s.input,{getEndpointParameterInstructions(){return e}},E({},t),r);r.endpointV2=i,r.authSchemes=i.properties?.authSchemes;let o=r.authSchemes?.[0];if(o){r.signing_region=o.signingRegion,r.signing_service=o.signingName;let c=Zn(r)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return n(E({},s))});var PT=(t,e)=>n=>r=>y(void 0,null,function*(){let{response:s}=yield n(r);try{let i=yield e(s,t);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let o="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+o,typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}});var NT=(t,e)=>(n,r)=>s=>y(void 0,null,function*(){let i=r.endpointV2?.url&&t.urlParser?()=>y(void 0,null,function*(){return t.urlParser(r.endpointV2.url)}):t.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let o=yield e(s.input,z(E({},t),{endpoint:i}));return n(z(E({},s),{request:o}))});var FV={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},_l={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function mh(t,e,n){return{applyToStack:r=>{r.add(PT(t,n),FV),r.add(NT(t,e),_l)}}}var Wy={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:_l.name},ph=(t,e)=>({applyToStack:n=>{n.addRelativeTo(kT({config:t,instructions:e}),Wy)}});var OT=t=>{let e=t.tls??!0,{endpoint:n}=t,r=n!=null?()=>y(void 0,null,function*(){return fh(yield Ut(n)())}):void 0,s=!!n,i=z(E({},t),{endpoint:r,tls:e,isCustomEndpoint:s,useDualstackEndpoint:Ut(t.useDualstackEndpoint??!1),useFipsEndpoint:Ut(t.useFipsEndpoint??!1)}),o;return i.serviceConfiguredEndpoint=()=>y(void 0,null,function*(){return t.serviceId&&!o&&(o=hh(t.serviceId)),o}),i};var LV={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Wy.name},MT=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(Ky(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n}),LV)}});var fte={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:_l.name};var BV=t=>e=>{throw e},VV=(t,e)=>{},FT=t=>(e,n)=>r=>y(void 0,null,function*(){if(!Ee.isInstance(r.request))return e(r);let i=Zn(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,l=yield e(z(E({},r),{request:yield c.sign(r.request,a,o)})).catch((c.errorHandler||BV)(o));return(c.successHandler||VV)(l.response,o),l});var wr=function(t){return t.STANDARD="standard",t.ADAPTIVE="adaptive",t}(wr||{}),Ps=3,Qy=wr.STANDARD;var LT=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],BT=["TimeoutError","RequestTimeout","RequestTimeoutException"],VT=[500,502,503,504],UT=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var UV=t=>t.$metadata?.clockSkewCorrected,oa=t=>t.$metadata?.httpStatusCode===429||LT.includes(t.name)||t.$retryable?.throttling==!0,gh=t=>UV(t)||BT.includes(t.name)||UT.includes(t?.code||"")||VT.includes(t.$metadata?.httpStatusCode||0),jT=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!gh(t)}return!1};var bl=class{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}getSendToken(){return y(this,null,function*(){return this.acquireTokenBucket(1)})}acquireTokenBucket(e){return y(this,null,function*(){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let n=(e-this.currentCapacity)/this.fillRate*1e3;yield new Promise(r=>setTimeout(r,n))}this.currentCapacity=this.currentCapacity-e}})}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let n=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),oa(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());let r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),n=Math.floor(e*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){let r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(e){return parseFloat(e.toFixed(8))}};var yh="amz-sdk-invocation-id",_h="amz-sdk-request";var qT=()=>{let t=100;return{computeNextBackoffDelay:r=>Math.floor(Math.min(2e4,Math.random()*2**r*t)),setDelayBase:r=>{t=r}}};var Yy=({retryDelay:t,retryCount:e,retryCost:n})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(2e4,t),getRetryCost:()=>n});var Fi=class{constructor(e){this.maxAttempts=e,this.mode=wr.STANDARD,this.capacity=500,this.retryBackoffStrategy=qT(),this.maxAttemptsProvider=typeof e=="function"?e:()=>y(this,null,function*(){return e})}acquireInitialRetryToken(e){return y(this,null,function*(){return Yy({retryDelay:100,retryCount:0})})}refreshRetryTokenForRetry(e,n){return y(this,null,function*(){let r=yield this.getMaxAttempts();if(this.shouldRetry(e,n,r)){let s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?500:100);let i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,Yy({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")})}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}getMaxAttempts(){return y(this,null,function*(){try{return yield this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ps}`),Ps}})}shouldRetry(e,n,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(e){return e==="TRANSIENT"?10:5}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};var Eh=class{constructor(e,n){this.maxAttemptsProvider=e,this.mode=wr.ADAPTIVE;let{rateLimiter:r}=n??{};this.rateLimiter=r??new bl,this.standardRetryStrategy=new Fi(e)}acquireInitialRetryToken(e){return y(this,null,function*(){return yield this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)})}refreshRetryTokenForRetry(e,n){return y(this,null,function*(){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(e,n)})}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};var vh,jV=new Uint8Array(16);function Zy(){if(!vh&&(vh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vh(jV)}var qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function HT(t,e=0){return qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]}var qV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jy={randomUUID:qV};function $V(t,e,n){if(Jy.randomUUID&&!e&&!t)return Jy.randomUUID();t=t||{};let r=t.random||(t.rng||Zy)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=r[s];return e}return HT(r)}var e_=$V;var t_=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`);var WT=t=>{let{retryStrategy:e}=t,n=Ut(t.maxAttempts??Ps);return z(E({},t),{maxAttempts:n,retryStrategy:()=>y(void 0,null,function*(){return e||((yield Ut(t.retryMode)())===wr.ADAPTIVE?new Eh(n):new Fi(n))})})};var QT=t=>t?.body instanceof ReadableStream;var zV=t=>(e,n)=>r=>y(void 0,null,function*(){let s=yield t.retryStrategy(),i=yield t.maxAttempts();if(GV(s)){s=s;let o=yield s.acquireInitialRetryToken(n.partition_id),a=new Error,c=0,l=0,{request:d}=r,f=Ee.isInstance(d);for(f&&(d.headers[yh]=e_());;)try{f&&(d.headers[_h]=`attempt=${c+1}; max=${i}`);let{response:m,output:g}=yield e(r);return s.recordSuccess(o),g.$metadata.attempts=c+1,g.$metadata.totalRetryDelay=l,{response:m,output:g}}catch(m){let g=KV(m);if(a=t_(m),f&&QT(d))throw(n.logger instanceof ks?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=yield s.refreshRetryTokenForRetry(o,g)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=l,a}c=o.getRetryCount();let b=o.getRetryDelay();l+=b,yield new Promise(C=>setTimeout(C,b))}}else return s=s,s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,r)}),GV=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",KV=t=>{let e={error:t,errorType:HV(t)},n=WV(t.$response);return n&&(e.retryAfterHint=n),e},HV=t=>oa(t)?"THROTTLING":gh(t)?"TRANSIENT":jT(t)?"SERVER_ERROR":"CLIENT_ERROR",n_={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},YT=t=>({applyToStack:e=>{e.add(zV(t),n_)}}),WV=t=>{if(!In.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let n=t.headers[e],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)};var r_={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:n_.name},XT=t=>({applyToStack:e=>{e.addRelativeTo(FT(t),r_)}});var wh=class{constructor(e){this.authSchemes=new Map;for(let[n,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(e){return this.authSchemes.get(e)}};var QV=t=>e=>s_(e)&&e.expiration.getTime()-Date.now()<t;var ZT=QV(3e5),s_=t=>t.expiration!==void 0,JT=(t,e,n)=>{if(t===void 0)return;let r=typeof t!="function"?()=>y(void 0,null,function*(){return Promise.resolve(t)}):t,s,i,o,a=!1,c=l=>y(void 0,null,function*(){i||(i=r(l));try{s=yield i,o=!0,a=!1}finally{i=void 0}return s});return e===void 0?l=>y(void 0,null,function*(){return(!o||l?.forceRefresh)&&(s=yield c(l)),s}):l=>y(void 0,null,function*(){return(!o||l?.forceRefresh)&&(s=yield c(l)),a?s:n(s)?(e(s)&&(yield c(l)),s):(a=!0,s)})};var Li=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};function o_(t,e){return new i_(t,e)}var i_=class{constructor(e,n){this.input=e,this.context=n,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}build(){return y(this,null,function*(){let{hostname:e,protocol:n="https",port:r,path:s}=yield this.context.endpoint();this.path=s;for(let i of this.resolvePathStack)i(this.path);return new Ee({protocol:n,hostname:this.hostname||e,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(n=>{this.path=`${n?.endsWith("/")?n.slice(0,-1):n||""}`+e}),this}p(e,n,r,s){return this.resolvePathStack.push(i=>{this.path=KC(i,this.input,e,n,r,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}};var eI=(t,e,n,r)=>y(void 0,null,function*(){let s=yield r.signWithCredentials(n,t,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s});var YV=t=>e=>{throw e},XV=(t,e)=>{};var tI=t=>(e,n)=>r=>y(void 0,null,function*(){if(!Ee.isInstance(r.request))return e(r);let i=Zn(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,l;n.s3ExpressIdentity?l=yield eI(n.s3ExpressIdentity,o,r.request,yield t.signer()):l=yield c.sign(r.request,a,o);let d=yield e(z(E({},r),{request:l})).catch((c.errorHandler||YV)(o));return(c.successHandler||XV)(d.response,o),d}),a_=t=>({applyToStack:e=>{e.addRelativeTo(tI(t),r_)}});var nI=(t,{session:e})=>{let[n,r]=e;return z(E({},t),{forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,followRegionRedirects:t.followRegionRedirects??!1,s3ExpressIdentityProvider:t.s3ExpressIdentityProvider??new Oy(s=>y(void 0,null,function*(){return n().send(new r({Bucket:s,SessionMode:"ReadWrite"}))})),bucketEndpoint:t.bucketEndpoint??!1})};var ZV={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},JV=3e3,eU=t=>(e,n)=>r=>y(void 0,null,function*(){let s=yield e(r),{response:i}=s;if(!In.isInstance(i))return s;let{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return s;let l=a,d=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([l,d]=yield wC(a)),i.body=d;let f=yield tU(l,{streamCollector:g=>y(void 0,null,function*(){return xC(g,JV)})});typeof l?.destroy=="function"&&l.destroy();let m=t.utf8Encoder(f.subarray(f.length-16));if(f.length===0&&ZV[n.commandName]){let g=new Error("S3 aborted request");throw g.name="InternalError",g}return m&&m.endsWith("</Error>")&&(i.statusCode=400),s}),tU=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),nU={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},xh=t=>({applyToStack:e=>{e.addRelativeTo(eU(t),nU)}});var rI=t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function sI(t){return(e,n)=>r=>y(this,null,function*(){if(t.bucketEndpoint){let s=n.endpointV2;if(s){let i=r.input.Bucket;if(typeof i=="string")try{let o=new URL(i);n.endpointV2=z(E({},s),{url:o})}catch(o){let a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a),o}}}return e(r)})}var iI={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function rU({bucketEndpoint:t}){return e=>n=>y(this,null,function*(){let{input:{Bucket:r}}=n;if(!t&&typeof r=="string"&&!rI(r)&&r.indexOf("/")>=0){let s=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw s.name="InvalidBucketName",s}return e(E({},n))})}var sU={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},oI=t=>({applyToStack:e=>{e.add(rU(t),sU),e.addRelativeTo(sI(t),iI)}});function aI(t){return z(E({},t),{customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent})}var Sh=class{constructor({size:e,params:n}){this.data=new Map,this.parameters=[],this.capacity=e??50,n&&(this.parameters=n)}get(e,n){let r=this.hash(e);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){let s=this.data.keys(),i=0;for(;;){let{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(e){let n="",{parameters:r}=this;if(r.length===0)return!1;for(let s of r){let i=String(e[s]??"");if(i.includes("|;"))return!1;n+=i+"|;"}return n}};var iU=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),El=t=>iU.test(t)||t.startsWith("[")&&t.endsWith("]");var oU=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),vl=(t,e=!1)=>{if(!e)return oU.test(t);let n=t.split(".");for(let r of n)if(!vl(r))return!1;return!0};var Bi={};var Xr="endpoints";function qn(t){return typeof t!="object"||t==null?t:"ref"in t?`$${qn(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(qn).join(", ")})`:JSON.stringify(t,null,2)}var qe=class extends Error{constructor(e){super(e),this.name="EndpointError"}};var cI=(t,e)=>t===e;var lI=t=>{let e=t.split("."),n=[];for(let r of e){let s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new qe(`Path: '${t}' does not end with ']'`);let i=r.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new qe(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&n.push(r.slice(0,s)),n.push(i)}else n.push(r)}return n};var Ah=(t,e)=>lI(e).reduce((n,r)=>{if(typeof n!="object")throw new qe(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},t);var uI=t=>t!=null;var dI=t=>!t;var c_={[cl.HTTP]:80,[cl.HTTPS]:443},hI=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:m,port:g,protocol:b="",path:C="",query:x={}}=t,N=new URL(`${b}//${m}${g?`:${g}`:""}${C}`);return N.search=Object.entries(x).map(([U,j])=>`${U}=${j}`).join("&"),N}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let n=e.href,{host:r,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;let c=o.slice(0,-1);if(!Object.values(cl).includes(c))return null;let l=El(s),d=n.includes(`${r}:${c_[c]}`)||typeof t=="string"&&t.includes(`${r}:${c_[c]}`),f=`${r}${d?`:${c_[c]}`:""}`;return{scheme:c,authority:f,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:l}};var fI=(t,e)=>t===e;var mI=(t,e,n,r)=>e>=n||t.length<n?null:r?t.substring(t.length-n,t.length-e):t.substring(e,n);var pI=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`);var gI={booleanEquals:cI,getAttr:Ah,isSet:uI,isValidHostLabel:vl,not:dI,parseURL:hI,stringEquals:fI,substring:mI,uriEncode:pI};var Ch=(t,e)=>{let n=[],r=E(E({},e.endpointParams),e.referenceRecord),s=0;for(;s<t.length;){let i=t.indexOf("{",s);if(i===-1){n.push(t.slice(s));break}n.push(t.slice(s,i));let o=t.indexOf("}",i);if(o===-1){n.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(n.push(t.slice(i+1,o)),s=o+2);let a=t.substring(i+1,o);if(a.includes("#")){let[c,l]=a.split("#");n.push(Ah(r[c],l))}else n.push(r[a]);s=o+1}return n.join("")};var yI=({ref:t},e)=>E(E({},e.endpointParams),e.referenceRecord)[t];var Ns=(t,e,n)=>{if(typeof t=="string")return Ch(t,n);if(t.fn)return Th(t,n);if(t.ref)return yI(t,n);throw new qe(`'${e}': ${String(t)} is not a string, function or reference.`)};var Th=({fn:t,argv:e},n)=>{let r=e.map(i=>["boolean","number"].includes(typeof i)?i:Ns(i,"arg",n)),s=t.split(".");return s[0]in Bi&&s[1]!=null?Bi[s[0]][s[1]](...r):gI[t](...r)};var _I=(r,n)=>{var s=r,{assign:t}=s,e=ms(s,["assign"]);if(t&&t in n.referenceRecord)throw new qe(`'${t}' is already defined in Reference Record.`);let i=Th(e,n);return n.logger?.debug?.(`${Xr} evaluateCondition: ${qn(e)} = ${qn(i)}`),E({result:i===""?!0:!!i},t!=null&&{toAssign:{name:t,value:i}})};var ca=(t=[],e)=>{let n={};for(let r of t){let{result:s,toAssign:i}=_I(r,z(E({},e),{referenceRecord:E(E({},e.referenceRecord),n)}));if(!s)return{result:s};i&&(n[i.name]=i.value,e.logger?.debug?.(`${Xr} assign: ${i.name} := ${qn(i.value)}`))}return{result:!0,referenceRecord:n}};var bI=(t,e)=>Object.entries(t).reduce((n,[r,s])=>z(E({},n),{[r]:s.map(i=>{let o=Ns(i,"Header value entry",e);if(typeof o!="string")throw new qe(`Header '${r}' value '${o}' is not a string`);return o})}),{});var l_=(t,e)=>{if(Array.isArray(t))return t.map(n=>l_(n,e));switch(typeof t){case"string":return Ch(t,e);case"object":if(t===null)throw new qe(`Unexpected endpoint property: ${t}`);return Ih(t,e);case"boolean":return t;default:throw new qe(`Unexpected endpoint property type: ${typeof t}`)}};var Ih=(t,e)=>Object.entries(t).reduce((n,[r,s])=>z(E({},n),{[r]:l_(s,e)}),{});var EI=(t,e)=>{let n=Ns(t,"Endpoint URL",e);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new qe(`Endpoint URL must be a string, got ${typeof n}`)};var vI=(t,e)=>{let{conditions:n,endpoint:r}=t,{result:s,referenceRecord:i}=ca(n,e);if(!s)return;let o=z(E({},e),{referenceRecord:E(E({},e.referenceRecord),i)}),{url:a,properties:c,headers:l}=r;return e.logger?.debug?.(`${Xr} Resolving endpoint from template: ${qn(r)}`),z(E(E({},l!=null&&{headers:bI(l,o)}),c!=null&&{properties:Ih(c,o)}),{url:EI(a,o)})};var wI=(t,e)=>{let{conditions:n,error:r}=t,{result:s,referenceRecord:i}=ca(n,e);if(s)throw new qe(Ns(r,"Error",z(E({},e),{referenceRecord:E(E({},e.referenceRecord),i)})))};var xI=(t,e)=>{let{conditions:n,rules:r}=t,{result:s,referenceRecord:i}=ca(n,e);if(s)return Rh(r,z(E({},e),{referenceRecord:E(E({},e.referenceRecord),i)}))};var Rh=(t,e)=>{for(let n of t)if(n.type==="endpoint"){let r=vI(n,e);if(r)return r}else if(n.type==="error")wI(n,e);else if(n.type==="tree"){let r=xI(n,e);if(r)return r}else throw new qe(`Unknown endpoint rule: ${n}`);throw new qe("Rules evaluation failed")};var u_=(t,e)=>{let{endpointParams:n,logger:r}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${Xr} Initial EndpointParams: ${qn(n)}`);let o=Object.entries(s).filter(([,l])=>l.default!=null).map(([l,d])=>[l,d.default]);if(o.length>0)for(let[l,d]of o)n[l]=n[l]??d;let a=Object.entries(s).filter(([,l])=>l.required).map(([l])=>l);for(let l of a)if(n[l]==null)throw new qe(`Missing required parameter: '${l}'`);let c=Rh(i,{endpointParams:n,logger:r,referenceRecord:{}});return e.logger?.debug?.(`${Xr} Resolved endpoint: ${qn(c)}`),c};var d_=(t,e=!1)=>{if(e){for(let n of t.split("."))if(!d_(n))return!1;return!0}return!(!vl(t)||t.length<3||t.length>63||t!==t.toLowerCase()||El(t))};var SI=":",aU="/",AI=t=>{let e=t.split(SI);if(e.length<6)return null;let[n,r,s,i,o,...a]=e;if(n!=="arn"||r===""||s===""||a.join(SI)==="")return null;let c=a.map(l=>l.split(aU)).flat();return{partition:r,service:s,region:i,accountId:o,resourceId:c}};var CI={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var lU=CI,uU="",TI=t=>{let{partitions:e}=lU;for(let r of e){let{regions:s,outputs:i}=r;for(let[o,a]of Object.entries(s))if(o===t)return E(E({},i),a)}for(let r of e){let{regionRegex:s,outputs:i}=r;if(new RegExp(s).test(t))return E({},i)}let n=e.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return E({},n.outputs)};var II=()=>uU;var h_={isVirtualHostableS3Bucket:d_,parseArn:AI,partition:TI};Bi.aws=h_;var f_="user-agent",Dh="x-amz-user-agent",m_=" ",kh="/",RI=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,DI=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,p_="-";var dU=t=>(e,n)=>r=>y(void 0,null,function*(){let{request:s}=r;if(!Ee.isInstance(s))return e(r);let{headers:i}=s,o=n?.userAgent?.map(g_)||[],a=(yield t.defaultUserAgentProvider()).map(g_),c=t?.customUserAgent?.map(g_)||[],l=II(),d=(l?[l]:[]).concat([...a,...o,...c]).join(m_),f=[...a.filter(m=>m.startsWith("aws-sdk-")),...c].join(m_);return t.runtime!=="browser"?(f&&(i[Dh]=i[Dh]?`${i[f_]} ${f}`:f),i[f_]=d):i[Dh]=d,e(z(E({},r),{request:s}))}),g_=t=>{let e=t[0].split(kh).map(o=>o.replace(RI,p_)).join(kh),n=t[1]?.replace(DI,p_),r=e.indexOf(kh),s=e.substring(0,r),i=e.substring(r+1);return s==="api"&&(i=i.toLowerCase()),[s,i,n].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},hU={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},kI=t=>({applyToStack:e=>{e.add(dU(t),hU)}});var PI=!1;var NI=!1;var Ph=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips"));var y_=t=>Ph(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t;var OI=t=>{let{region:e,useFipsEndpoint:n}=t;if(!e)throw new Error("Region is missing");return z(E({},t),{region:()=>y(void 0,null,function*(){if(typeof e=="string")return y_(e);let r=yield e();return y_(r)}),useFipsEndpoint:()=>y(void 0,null,function*(){let r=typeof e=="string"?e:yield e();return Ph(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()})})};var MI=t=>z(E({},t),{eventStreamMarshaller:t.eventStreamSerdeProvider(t)});var FI="content-length";function fU(t){return e=>n=>y(this,null,function*(){let r=n.request;if(Ee.isInstance(r)){let{body:s,headers:i}=r;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(FI)===-1)try{let o=t(s);r.headers=z(E({},r.headers),{[FI]:String(o)})}catch{}}return e(z(E({},n),{request:r}))})}var mU={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},LI=t=>({applyToStack:e=>{e.add(fU(t.bodyLengthChecker),mU)}});var __=t=>In.isInstance(t)?t.headers?.date??t.headers?.Date:void 0;var la=t=>new Date(Date.now()+t);var BI=(t,e)=>Math.abs(la(e).getTime()-t)>=3e5;var b_=(t,e)=>{let n=Date.parse(t);return BI(n,e)?n-Date.now():e};var wl=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Nh=t=>y(void 0,null,function*(){let e=wl("context",t.context),n=wl("config",t.config),r=e.endpointV2?.properties?.authSchemes?.[0],i=yield wl("signer",n.signer)(r),o=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:n,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}}),Vi=class{sign(e,n,r){return y(this,null,function*(){if(!Ee.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=yield Nh(r),{config:i,signer:o}=s,{signingRegion:a,signingName:c}=s,l=r.context;if(l?.authSchemes?.length??!1){let[f,m]=l.authSchemes;f?.name==="sigv4a"&&m?.name==="sigv4"&&(a=m?.signingRegion??a,c=m?.signingName??c)}return yield o.sign(e,{signingDate:la(i.systemClockOffset),signingRegion:a,signingService:c})})}errorHandler(e){return n=>{let r=n.ServerTime??__(n.$response);if(r){let s=wl("config",e.config),i=s.systemClockOffset;s.systemClockOffset=b_(r,s.systemClockOffset),s.systemClockOffset!==i&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(e,n){let r=__(e);if(r){let s=wl("config",n.config);s.systemClockOffset=b_(r,s.systemClockOffset)}}};var xl=class extends Vi{sign(e,n,r){return y(this,null,function*(){if(!Ee.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}=yield Nh(r),d=((yield s.sigv4aSigningRegionSet?.())??a??[o]).join(",");return yield i.sign(e,{signingDate:la(s.systemClockOffset),signingRegion:d,signingService:c})})}};var VI=(t,e,n)=>{let r,s,i,o=!1,a=()=>y(void 0,null,function*(){s||(s=t());try{r=yield s,i=!0,o=!1}finally{s=void 0}return r});return e===void 0?c=>y(void 0,null,function*(){return(!i||c?.forceRefresh)&&(r=yield a()),r}):c=>y(void 0,null,function*(){return(!i||c?.forceRefresh)&&(r=yield a()),o?r:n&&!n(r)?(o=!0,r):(e(r)&&(yield a()),r)})};var UI=t=>(t.sigv4aSigningRegionSet=Li(t.sigv4aSigningRegionSet),t);var jI=t=>{let e;t.credentials&&(e=JT(t.credentials,ZT,s_)),e||(t.credentialDefaultProvider?e=Li(t.credentialDefaultProvider(Object.assign({},t,{parentClientConfig:t}))):e=()=>y(void 0,null,function*(){throw new Error("`credentials` is missing")}));let{signingEscapePath:n=!0,systemClockOffset:r=t.systemClockOffset||0,sha256:s}=t,i;return t.signer?i=Li(t.signer):t.regionInfoProvider?i=()=>Li(t.region)().then(o=>y(void 0,null,function*(){return[(yield t.regionInfoProvider(o,{useFipsEndpoint:yield t.useFipsEndpoint(),useDualstackEndpoint:yield t.useDualstackEndpoint()}))||{},o]})).then(([o,a])=>{let{signingRegion:c,signingService:l}=o;t.signingRegion=t.signingRegion||c||a,t.signingName=t.signingName||l||t.serviceId;let d=z(E({},t),{credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:n}),f=t.signerConstructor||Mi;return new f(d)}):i=o=>y(void 0,null,function*(){o=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:yield Li(t.region)(),properties:{}},o);let a=o.signingRegion,c=o.signingName;t.signingRegion=t.signingRegion||a,t.signingName=t.signingName||c||t.serviceId;let l=z(E({},t),{credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:n}),d=t.signerConstructor||Mi;return new d(l)}),z(E({},t),{systemClockOffset:r,signingEscapePath:n,credentials:e,signer:i})};var qI=(t,e)=>nh(t,e).then(n=>e.utf8Encoder(n));var vR=Up(ER());var R_=(t,e)=>qI(t,e).then(n=>{if(n.length){let r=new vR.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,l)=>l.trim()===""&&l.includes(`
`)?"":void 0});r.addEntity("#xD","\r"),r.addEntity("#10",`
`);let s;try{s=r.parse(n,!0)}catch(c){throw c&&typeof c=="object"&&Object.defineProperty(c,"$responseBodyText",{value:n}),c}let i="#text",o=Object.keys(s)[0],a=s[o];return a[i]&&(a[o]=a[i],delete a[i]),ky(a)}return{}}),wR=(t,e)=>y(void 0,null,function*(){let n=yield R_(t,e);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n}),xR=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"};var Mh={CrtSignerV4:null};var Fh=class{constructor(e){this.sigv4Signer=new yl(e),this.signerOptions=e}sign(r){return y(this,arguments,function*(e,n={}){if(n.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(e,n)}return this.sigv4Signer.sign(e,n)})}signWithCredentials(s,i){return y(this,arguments,function*(e,n,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(e,n,r)}return this.sigv4Signer.signWithCredentials(e,n,r)})}presign(r){return y(this,arguments,function*(e,n={}){if(n.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(e,n)}return this.sigv4Signer.presign(e,n)})}presignWithCredentials(s,i){return y(this,arguments,function*(e,n,r={}){if(r.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,n,r)})}getSigv4aSigner(){if(!this.sigv4aSigner){let e=null;try{if(e=Mh.CrtSignerV4,typeof e!="function")throw new Error}catch(n){throw n.message=`${n.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,n}this.sigv4aSigner=new e(z(E({},this.signerOptions),{signingAlgorithm:1}))}return this.sigv4aSigner}};var tb="required",v="type",R="conditions",B="fn",V="argv",he="ref",nt="assign",ee="url",te="properties",SD="backend",tr="authSchemes",kn="disableDoubleEncoding",Pn="signingName",Ar="signingRegion",ne="headers",nb="signingRegionSet";var $n="isSet",Ot="booleanEquals",oe="error",$h="aws.partition",We="stringEquals",ct="getAttr",Yt="name",xr="substring",SR="bucketSuffix",AD="parseURL",AR="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",K="endpoint",G="tree",CD="aws.isVirtualHostableS3Bucket",Uh="{url#scheme}://{Bucket}.{url#authority}{url#path}",Sr="not",jh="{url#scheme}://{url#authority}{url#path}",TD="hardwareType",ID="regionPrefix",CR="bucketAliasSuffix",J_="outpostId",qi="isValidHostLabel",rb="sigv4a",Il="s3-outposts",fa="s3",RD="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",DD="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",TR="https://{Bucket}.s3.{partitionResult#dnsSuffix}",kD="aws.parseArn",PD="bucketArn",ND="arnType",zh="",sb="s3-object-lambda",OD="accesspoint",ib="accessPointName",IR="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",RR="mrapPartition",DR="outpostType",kR="arnPrefix",MD="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",PR="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",NR="https://s3.{partitionResult#dnsSuffix}",ua={[tb]:!1,[v]:"String"},da={[tb]:!0,default:!1,[v]:"Boolean"},Cl={[tb]:!1,[v]:"Boolean"},er={[B]:Ot,[V]:[{[he]:"Accelerate"},!0]},ze={[B]:Ot,[V]:[{[he]:"UseFIPS"},!0]},$e={[B]:Ot,[V]:[{[he]:"UseDualStack"},!0]},pt={[B]:$n,[V]:[{[he]:"Endpoint"}]},FD={[B]:$h,[V]:[{[he]:"Region"}],[nt]:"partitionResult"},OR={[B]:We,[V]:[{[B]:ct,[V]:[{[he]:"partitionResult"},Yt]},"aws-cn"]},Gh={[B]:$n,[V]:[{[he]:"Bucket"}]},un={[he]:"Bucket"},ln={[B]:AD,[V]:[{[he]:"Endpoint"}],[nt]:"url"},qh={[B]:Ot,[V]:[{[B]:ct,[V]:[{[he]:"url"},"isIp"]},!0]},LD={[he]:"url"},BD={[B]:"uriEncode",[V]:[un],[nt]:"uri_encoded_bucket"},Jr={[SD]:"S3Express",[tr]:[{[kn]:!0,[Yt]:"sigv4",[Pn]:"s3express",[Ar]:"{Region}"}]},fe={},VD={[B]:CD,[V]:[un,!1]},D_={[oe]:"S3Express bucket name is not a valid virtual hostable name.",[v]:oe},Kh={[SD]:"S3Express",[tr]:[{[kn]:!0,[Yt]:"sigv4-s3express",[Pn]:"s3express",[Ar]:"{Region}"}]},MR={[B]:$n,[V]:[{[he]:"UseS3ExpressControlEndpoint"}]},FR={[B]:Ot,[V]:[{[he]:"UseS3ExpressControlEndpoint"},!0]},me={[B]:Sr,[V]:[pt]},LR={[oe]:"Unrecognized S3Express bucket name format.",[v]:oe},BR={[B]:Sr,[V]:[Gh]},VR={[he]:TD},UR={[R]:[me],[oe]:"Expected a endpoint to be specified but no endpoint was found",[v]:oe},Lh={[tr]:[{[kn]:!0,[Yt]:rb,[Pn]:Il,[nb]:["*"]},{[kn]:!0,[Yt]:"sigv4",[Pn]:Il,[Ar]:"{Region}"}]},k_={[B]:Ot,[V]:[{[he]:"ForcePathStyle"},!1]},x3={[he]:"ForcePathStyle"},mt={[B]:Ot,[V]:[{[he]:"Accelerate"},!1]},At={[B]:We,[V]:[{[he]:"Region"},"aws-global"]},kt={[tr]:[{[kn]:!0,[Yt]:"sigv4",[Pn]:fa,[Ar]:"us-east-1"}]},Ie={[B]:Sr,[V]:[At]},Pt={[B]:Ot,[V]:[{[he]:"UseGlobalEndpoint"},!0]},jR={[ee]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[te]:{[tr]:[{[kn]:!0,[Yt]:"sigv4",[Pn]:fa,[Ar]:"{Region}"}]},[ne]:{}},gt={[tr]:[{[kn]:!0,[Yt]:"sigv4",[Pn]:fa,[Ar]:"{Region}"}]},Nt={[B]:Ot,[V]:[{[he]:"UseGlobalEndpoint"},!1]},Se={[B]:Ot,[V]:[{[he]:"UseDualStack"},!1]},qR={[ee]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[te]:gt,[ne]:{}},ve={[B]:Ot,[V]:[{[he]:"UseFIPS"},!1]},$R={[ee]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[te]:gt,[ne]:{}},zR={[ee]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[te]:gt,[ne]:{}},P_={[B]:Ot,[V]:[{[B]:ct,[V]:[LD,"isIp"]},!1]},N_={[ee]:RD,[te]:gt,[ne]:{}},eb={[ee]:Uh,[te]:gt,[ne]:{}},GR={[K]:eb,[v]:K},O_={[ee]:DD,[te]:gt,[ne]:{}},KR={[ee]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[te]:gt,[ne]:{}},Bh={[oe]:"Invalid region: region was not a valid DNS name.",[v]:oe},En={[he]:PD},UD={[he]:ND},M_={[B]:ct,[V]:[En,"service"]},ob={[he]:ib},HR={[R]:[$e],[oe]:"S3 Object Lambda does not support Dual-stack",[v]:oe},WR={[R]:[er],[oe]:"S3 Object Lambda does not support S3 Accelerate",[v]:oe},QR={[R]:[{[B]:$n,[V]:[{[he]:"DisableAccessPoints"}]},{[B]:Ot,[V]:[{[he]:"DisableAccessPoints"},!0]}],[oe]:"Access points are not supported for this operation",[v]:oe},F_={[R]:[{[B]:$n,[V]:[{[he]:"UseArnRegion"}]},{[B]:Ot,[V]:[{[he]:"UseArnRegion"},!1]},{[B]:Sr,[V]:[{[B]:We,[V]:[{[B]:ct,[V]:[En,"region"]},"{Region}"]}]}],[oe]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[v]:oe},jD={[B]:ct,[V]:[{[he]:"bucketPartition"},Yt]},qD={[B]:ct,[V]:[En,"accountId"]},L_={[tr]:[{[kn]:!0,[Yt]:"sigv4",[Pn]:sb,[Ar]:"{bucketArn#region}"}]},YR={[oe]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[v]:oe},B_={[oe]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[v]:oe},V_={[oe]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[v]:oe},U_={[oe]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[v]:oe},XR={[oe]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[v]:oe},ZR={[oe]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[v]:oe},Tl={[tr]:[{[kn]:!0,[Yt]:"sigv4",[Pn]:fa,[Ar]:"{bucketArn#region}"}]},JR={[tr]:[{[kn]:!0,[Yt]:rb,[Pn]:Il,[nb]:["*"]},{[kn]:!0,[Yt]:"sigv4",[Pn]:Il,[Ar]:"{bucketArn#region}"}]},eD={[B]:kD,[V]:[un]},tD={[ee]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[te]:gt,[ne]:{}},nD={[ee]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[te]:gt,[ne]:{}},rD={[ee]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[te]:gt,[ne]:{}},j_={[ee]:MD,[te]:gt,[ne]:{}},sD={[ee]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[te]:gt,[ne]:{}},iD={[he]:"UseObjectLambdaEndpoint"},q_={[tr]:[{[kn]:!0,[Yt]:"sigv4",[Pn]:sb,[Ar]:"{Region}"}]},oD={[ee]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[te]:gt,[ne]:{}},aD={[ee]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[te]:gt,[ne]:{}},cD={[ee]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[te]:gt,[ne]:{}},$_={[ee]:jh,[te]:gt,[ne]:{}},lD={[ee]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[te]:gt,[ne]:{}},z_=[{[he]:"Region"}],S3=[{[he]:"Endpoint"}],A3=[un],G_=[$e],Vh=[er],ji=[pt,ln],uD=[{[B]:$n,[V]:[{[he]:"DisableS3ExpressSessionAuth"}]},{[B]:Ot,[V]:[{[he]:"DisableS3ExpressSessionAuth"},!0]}],dD=[qh],K_=[BD],H_=[VD],ha=[ze],hD=[{[B]:xr,[V]:[un,6,14,!0],[nt]:"s3expressAvailabilityZoneId"},{[B]:xr,[V]:[un,14,16,!0],[nt]:"s3expressAvailabilityZoneDelim"},{[B]:We,[V]:[{[he]:"s3expressAvailabilityZoneDelim"},"--"]}],fD=[{[R]:[ze],[K]:{[ee]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[te]:Jr,[ne]:{}},[v]:K},{[K]:{[ee]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[te]:Jr,[ne]:{}},[v]:K}],mD=[{[B]:xr,[V]:[un,6,15,!0],[nt]:"s3expressAvailabilityZoneId"},{[B]:xr,[V]:[un,15,17,!0],[nt]:"s3expressAvailabilityZoneDelim"},{[B]:We,[V]:[{[he]:"s3expressAvailabilityZoneDelim"},"--"]}],pD=[{[R]:[ze],[K]:{[ee]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[te]:Kh,[ne]:{}},[v]:K},{[K]:{[ee]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[te]:Kh,[ne]:{}},[v]:K}],C3=[Gh],gD=[{[B]:qi,[V]:[{[he]:J_},!1]}],yD=[{[B]:We,[V]:[{[he]:ID},"beta"]}],T3=["*"],Ms=[FD],_D=[{[B]:qi,[V]:[{[he]:"Region"},!1]}],Fs=[{[B]:We,[V]:[{[he]:"Region"},"us-east-1"]}],W_=[{[B]:We,[V]:[UD,OD]}],bD=[{[B]:ct,[V]:[En,"resourceId[1]"],[nt]:ib},{[B]:Sr,[V]:[{[B]:We,[V]:[ob,zh]}]}],I3=[En,"resourceId[1]"],Q_=[{[B]:Sr,[V]:[{[B]:We,[V]:[{[B]:ct,[V]:[En,"region"]},zh]}]}],ED=[{[B]:Sr,[V]:[{[B]:$n,[V]:[{[B]:ct,[V]:[En,"resourceId[2]"]}]}]}],R3=[En,"resourceId[2]"],Y_=[{[B]:$h,[V]:[{[B]:ct,[V]:[En,"region"]}],[nt]:"bucketPartition"}],vD=[{[B]:We,[V]:[jD,{[B]:ct,[V]:[{[he]:"partitionResult"},Yt]}]}],X_=[{[B]:qi,[V]:[{[B]:ct,[V]:[En,"region"]},!0]}],Z_=[{[B]:qi,[V]:[qD,!1]}],wD=[{[B]:qi,[V]:[ob,!1]}],xD=[{[B]:qi,[V]:[{[he]:"Region"},!0]}],D3={version:"1.0",parameters:{Bucket:ua,Region:ua,UseFIPS:da,UseDualStack:da,Endpoint:ua,ForcePathStyle:da,Accelerate:da,UseGlobalEndpoint:da,UseObjectLambdaEndpoint:Cl,Key:ua,Prefix:ua,CopySource:ua,DisableAccessPoints:Cl,DisableMultiRegionAccessPoints:da,UseArnRegion:Cl,UseS3ExpressControlEndpoint:Cl,DisableS3ExpressSessionAuth:Cl},rules:[{[R]:[{[B]:$n,[V]:z_}],rules:[{[R]:[er,ze],error:"Accelerate cannot be used with FIPS",[v]:oe},{[R]:[$e,pt],error:"Cannot set dual-stack in combination with a custom endpoint.",[v]:oe},{[R]:[pt,ze],error:"A custom endpoint cannot be combined with FIPS",[v]:oe},{[R]:[pt,er],error:"A custom endpoint cannot be combined with S3 Accelerate",[v]:oe},{[R]:[ze,FD,OR],error:"Partition does not support FIPS",[v]:oe},{[R]:[Gh,{[B]:xr,[V]:[un,0,6,!0],[nt]:SR},{[B]:We,[V]:[{[he]:SR},"--x-s3"]}],rules:[{[R]:G_,error:"S3Express does not support Dual-stack.",[v]:oe},{[R]:Vh,error:"S3Express does not support S3 Accelerate.",[v]:oe},{[R]:ji,rules:[{[R]:uD,rules:[{[R]:dD,rules:[{[R]:K_,rules:[{endpoint:{[ee]:AR,[te]:Jr,[ne]:fe},[v]:K}],[v]:G}],[v]:G},{[R]:H_,rules:[{endpoint:{[ee]:Uh,[te]:Jr,[ne]:fe},[v]:K}],[v]:G},D_],[v]:G},{[R]:dD,rules:[{[R]:K_,rules:[{endpoint:{[ee]:AR,[te]:Kh,[ne]:fe},[v]:K}],[v]:G}],[v]:G},{[R]:H_,rules:[{endpoint:{[ee]:Uh,[te]:Kh,[ne]:fe},[v]:K}],[v]:G},D_],[v]:G},{[R]:[MR,FR],rules:[{[R]:[BD,me],rules:[{[R]:ha,endpoint:{[ee]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[te]:Jr,[ne]:fe},[v]:K},{endpoint:{[ee]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[te]:Jr,[ne]:fe},[v]:K}],[v]:G}],[v]:G},{[R]:H_,rules:[{[R]:uD,rules:[{[R]:hD,rules:fD,[v]:G},{[R]:mD,rules:fD,[v]:G},LR],[v]:G},{[R]:hD,rules:pD,[v]:G},{[R]:mD,rules:pD,[v]:G},LR],[v]:G},D_],[v]:G},{[R]:[BR,MR,FR],rules:[{[R]:ji,endpoint:{[ee]:jh,[te]:Jr,[ne]:fe},[v]:K},{[R]:ha,endpoint:{[ee]:"https://s3express-control-fips.{Region}.amazonaws.com",[te]:Jr,[ne]:fe},[v]:K},{endpoint:{[ee]:"https://s3express-control.{Region}.amazonaws.com",[te]:Jr,[ne]:fe},[v]:K}],[v]:G},{[R]:[Gh,{[B]:xr,[V]:[un,49,50,!0],[nt]:TD},{[B]:xr,[V]:[un,8,12,!0],[nt]:ID},{[B]:xr,[V]:[un,0,7,!0],[nt]:CR},{[B]:xr,[V]:[un,32,49,!0],[nt]:J_},{[B]:$h,[V]:z_,[nt]:"regionPartition"},{[B]:We,[V]:[{[he]:CR},"--op-s3"]}],rules:[{[R]:gD,rules:[{[R]:[{[B]:We,[V]:[VR,"e"]}],rules:[{[R]:yD,rules:[UR,{[R]:ji,endpoint:{[ee]:"https://{Bucket}.ec2.{url#authority}",[te]:Lh,[ne]:fe},[v]:K}],[v]:G},{endpoint:{[ee]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[te]:Lh,[ne]:fe},[v]:K}],[v]:G},{[R]:[{[B]:We,[V]:[VR,"o"]}],rules:[{[R]:yD,rules:[UR,{[R]:ji,endpoint:{[ee]:"https://{Bucket}.op-{outpostId}.{url#authority}",[te]:Lh,[ne]:fe},[v]:K}],[v]:G},{endpoint:{[ee]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[te]:Lh,[ne]:fe},[v]:K}],[v]:G},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[v]:oe}],[v]:G},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[v]:oe}],[v]:G},{[R]:C3,rules:[{[R]:[pt,{[B]:Sr,[V]:[{[B]:$n,[V]:[{[B]:AD,[V]:S3}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[v]:oe},{[R]:[k_,VD],rules:[{[R]:Ms,rules:[{[R]:_D,rules:[{[R]:[er,OR],error:"S3 Accelerate cannot be used in this region",[v]:oe},{[R]:[$e,ze,mt,me,At],endpoint:{[ee]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[te]:kt,[ne]:fe},[v]:K},{[R]:[$e,ze,mt,me,Ie,Pt],rules:[{endpoint:jR,[v]:K}],[v]:G},{[R]:[$e,ze,mt,me,Ie,Nt],endpoint:jR,[v]:K},{[R]:[Se,ze,mt,me,At],endpoint:{[ee]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[te]:kt,[ne]:fe},[v]:K},{[R]:[Se,ze,mt,me,Ie,Pt],rules:[{endpoint:qR,[v]:K}],[v]:G},{[R]:[Se,ze,mt,me,Ie,Nt],endpoint:qR,[v]:K},{[R]:[$e,ve,er,me,At],endpoint:{[ee]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[te]:kt,[ne]:fe},[v]:K},{[R]:[$e,ve,er,me,Ie,Pt],rules:[{endpoint:$R,[v]:K}],[v]:G},{[R]:[$e,ve,er,me,Ie,Nt],endpoint:$R,[v]:K},{[R]:[$e,ve,mt,me,At],endpoint:{[ee]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[te]:kt,[ne]:fe},[v]:K},{[R]:[$e,ve,mt,me,Ie,Pt],rules:[{endpoint:zR,[v]:K}],[v]:G},{[R]:[$e,ve,mt,me,Ie,Nt],endpoint:zR,[v]:K},{[R]:[Se,ve,mt,pt,ln,qh,At],endpoint:{[ee]:RD,[te]:kt,[ne]:fe},[v]:K},{[R]:[Se,ve,mt,pt,ln,P_,At],endpoint:{[ee]:Uh,[te]:kt,[ne]:fe},[v]:K},{[R]:[Se,ve,mt,pt,ln,qh,Ie,Pt],rules:[{[R]:Fs,endpoint:N_,[v]:K},{endpoint:N_,[v]:K}],[v]:G},{[R]:[Se,ve,mt,pt,ln,P_,Ie,Pt],rules:[{[R]:Fs,endpoint:eb,[v]:K},GR],[v]:G},{[R]:[Se,ve,mt,pt,ln,qh,Ie,Nt],endpoint:N_,[v]:K},{[R]:[Se,ve,mt,pt,ln,P_,Ie,Nt],endpoint:eb,[v]:K},{[R]:[Se,ve,er,me,At],endpoint:{[ee]:DD,[te]:kt,[ne]:fe},[v]:K},{[R]:[Se,ve,er,me,Ie,Pt],rules:[{[R]:Fs,endpoint:O_,[v]:K},{endpoint:O_,[v]:K}],[v]:G},{[R]:[Se,ve,er,me,Ie,Nt],endpoint:O_,[v]:K},{[R]:[Se,ve,mt,me,At],endpoint:{[ee]:TR,[te]:kt,[ne]:fe},[v]:K},{[R]:[Se,ve,mt,me,Ie,Pt],rules:[{[R]:Fs,endpoint:{[ee]:TR,[te]:gt,[ne]:fe},[v]:K},{endpoint:KR,[v]:K}],[v]:G},{[R]:[Se,ve,mt,me,Ie,Nt],endpoint:KR,[v]:K}],[v]:G},Bh],[v]:G}],[v]:G},{[R]:[pt,ln,{[B]:We,[V]:[{[B]:ct,[V]:[LD,"scheme"]},"http"]},{[B]:CD,[V]:[un,!0]},k_,ve,Se,mt],rules:[{[R]:Ms,rules:[{[R]:_D,rules:[GR],[v]:G},Bh],[v]:G}],[v]:G},{[R]:[k_,{[B]:kD,[V]:A3,[nt]:PD}],rules:[{[R]:[{[B]:ct,[V]:[En,"resourceId[0]"],[nt]:ND},{[B]:Sr,[V]:[{[B]:We,[V]:[UD,zh]}]}],rules:[{[R]:[{[B]:We,[V]:[M_,sb]}],rules:[{[R]:W_,rules:[{[R]:bD,rules:[HR,WR,{[R]:Q_,rules:[QR,{[R]:ED,rules:[F_,{[R]:Y_,rules:[{[R]:Ms,rules:[{[R]:vD,rules:[{[R]:X_,rules:[{[R]:[{[B]:We,[V]:[qD,zh]}],error:"Invalid ARN: Missing account id",[v]:oe},{[R]:Z_,rules:[{[R]:wD,rules:[{[R]:ji,endpoint:{[ee]:IR,[te]:L_,[ne]:fe},[v]:K},{[R]:ha,endpoint:{[ee]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[te]:L_,[ne]:fe},[v]:K},{endpoint:{[ee]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[te]:L_,[ne]:fe},[v]:K}],[v]:G},YR],[v]:G},B_],[v]:G},V_],[v]:G},U_],[v]:G}],[v]:G}],[v]:G},XR],[v]:G},{error:"Invalid ARN: bucket ARN is missing a region",[v]:oe}],[v]:G},ZR],[v]:G},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[v]:oe}],[v]:G},{[R]:W_,rules:[{[R]:bD,rules:[{[R]:Q_,rules:[{[R]:W_,rules:[{[R]:Q_,rules:[QR,{[R]:ED,rules:[F_,{[R]:Y_,rules:[{[R]:Ms,rules:[{[R]:[{[B]:We,[V]:[jD,"{partitionResult#name}"]}],rules:[{[R]:X_,rules:[{[R]:[{[B]:We,[V]:[M_,fa]}],rules:[{[R]:Z_,rules:[{[R]:wD,rules:[{[R]:Vh,error:"Access Points do not support S3 Accelerate",[v]:oe},{[R]:[ze,$e],endpoint:{[ee]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[te]:Tl,[ne]:fe},[v]:K},{[R]:[ze,Se],endpoint:{[ee]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[te]:Tl,[ne]:fe},[v]:K},{[R]:[ve,$e],endpoint:{[ee]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[te]:Tl,[ne]:fe},[v]:K},{[R]:[ve,Se,pt,ln],endpoint:{[ee]:IR,[te]:Tl,[ne]:fe},[v]:K},{[R]:[ve,Se],endpoint:{[ee]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[te]:Tl,[ne]:fe},[v]:K}],[v]:G},YR],[v]:G},B_],[v]:G},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[v]:oe}],[v]:G},V_],[v]:G},U_],[v]:G}],[v]:G}],[v]:G},XR],[v]:G}],[v]:G}],[v]:G},{[R]:[{[B]:qi,[V]:[ob,!0]}],rules:[{[R]:G_,error:"S3 MRAP does not support dual-stack",[v]:oe},{[R]:ha,error:"S3 MRAP does not support FIPS",[v]:oe},{[R]:Vh,error:"S3 MRAP does not support S3 Accelerate",[v]:oe},{[R]:[{[B]:Ot,[V]:[{[he]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[v]:oe},{[R]:[{[B]:$h,[V]:z_,[nt]:RR}],rules:[{[R]:[{[B]:We,[V]:[{[B]:ct,[V]:[{[he]:RR},Yt]},{[B]:ct,[V]:[En,"partition"]}]}],rules:[{endpoint:{[ee]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[te]:{[tr]:[{[kn]:!0,name:rb,[Pn]:fa,[nb]:T3}]},[ne]:fe},[v]:K}],[v]:G},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[v]:oe}],[v]:G}],[v]:G},{error:"Invalid Access Point Name",[v]:oe}],[v]:G},ZR],[v]:G},{[R]:[{[B]:We,[V]:[M_,Il]}],rules:[{[R]:G_,error:"S3 Outposts does not support Dual-stack",[v]:oe},{[R]:ha,error:"S3 Outposts does not support FIPS",[v]:oe},{[R]:Vh,error:"S3 Outposts does not support S3 Accelerate",[v]:oe},{[R]:[{[B]:$n,[V]:[{[B]:ct,[V]:[En,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[v]:oe},{[R]:[{[B]:ct,[V]:I3,[nt]:J_}],rules:[{[R]:gD,rules:[F_,{[R]:Y_,rules:[{[R]:Ms,rules:[{[R]:vD,rules:[{[R]:X_,rules:[{[R]:Z_,rules:[{[R]:[{[B]:ct,[V]:R3,[nt]:DR}],rules:[{[R]:[{[B]:ct,[V]:[En,"resourceId[3]"],[nt]:ib}],rules:[{[R]:[{[B]:We,[V]:[{[he]:DR},OD]}],rules:[{[R]:ji,endpoint:{[ee]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[te]:JR,[ne]:fe},[v]:K},{endpoint:{[ee]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[te]:JR,[ne]:fe},[v]:K}],[v]:G},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[v]:oe}],[v]:G},{error:"Invalid ARN: expected an access point name",[v]:oe}],[v]:G},{error:"Invalid ARN: Expected a 4-component resource",[v]:oe}],[v]:G},B_],[v]:G},V_],[v]:G},U_],[v]:G}],[v]:G}],[v]:G},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[v]:oe}],[v]:G},{error:"Invalid ARN: The Outpost Id was not set",[v]:oe}],[v]:G},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[v]:oe}],[v]:G},{error:"Invalid ARN: No ARN type specified",[v]:oe}],[v]:G},{[R]:[{[B]:xr,[V]:[un,0,4,!1],[nt]:kR},{[B]:We,[V]:[{[he]:kR},"arn:"]},{[B]:Sr,[V]:[{[B]:$n,[V]:[eD]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[v]:oe},{[R]:[{[B]:Ot,[V]:[x3,!0]},eD],error:"Path-style addressing cannot be used with ARN buckets",[v]:oe},{[R]:K_,rules:[{[R]:Ms,rules:[{[R]:[mt],rules:[{[R]:[$e,me,ze,At],endpoint:{[ee]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[te]:kt,[ne]:fe},[v]:K},{[R]:[$e,me,ze,Ie,Pt],rules:[{endpoint:tD,[v]:K}],[v]:G},{[R]:[$e,me,ze,Ie,Nt],endpoint:tD,[v]:K},{[R]:[Se,me,ze,At],endpoint:{[ee]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[te]:kt,[ne]:fe},[v]:K},{[R]:[Se,me,ze,Ie,Pt],rules:[{endpoint:nD,[v]:K}],[v]:G},{[R]:[Se,me,ze,Ie,Nt],endpoint:nD,[v]:K},{[R]:[$e,me,ve,At],endpoint:{[ee]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[te]:kt,[ne]:fe},[v]:K},{[R]:[$e,me,ve,Ie,Pt],rules:[{endpoint:rD,[v]:K}],[v]:G},{[R]:[$e,me,ve,Ie,Nt],endpoint:rD,[v]:K},{[R]:[Se,pt,ln,ve,At],endpoint:{[ee]:MD,[te]:kt,[ne]:fe},[v]:K},{[R]:[Se,pt,ln,ve,Ie,Pt],rules:[{[R]:Fs,endpoint:j_,[v]:K},{endpoint:j_,[v]:K}],[v]:G},{[R]:[Se,pt,ln,ve,Ie,Nt],endpoint:j_,[v]:K},{[R]:[Se,me,ve,At],endpoint:{[ee]:PR,[te]:kt,[ne]:fe},[v]:K},{[R]:[Se,me,ve,Ie,Pt],rules:[{[R]:Fs,endpoint:{[ee]:PR,[te]:gt,[ne]:fe},[v]:K},{endpoint:sD,[v]:K}],[v]:G},{[R]:[Se,me,ve,Ie,Nt],endpoint:sD,[v]:K}],[v]:G},{error:"Path-style addressing cannot be used with S3 Accelerate",[v]:oe}],[v]:G}],[v]:G}],[v]:G},{[R]:[{[B]:$n,[V]:[iD]},{[B]:Ot,[V]:[iD,!0]}],rules:[{[R]:Ms,rules:[{[R]:xD,rules:[HR,WR,{[R]:ji,endpoint:{[ee]:jh,[te]:q_,[ne]:fe},[v]:K},{[R]:ha,endpoint:{[ee]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[te]:q_,[ne]:fe},[v]:K},{endpoint:{[ee]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[te]:q_,[ne]:fe},[v]:K}],[v]:G},Bh],[v]:G}],[v]:G},{[R]:[BR],rules:[{[R]:Ms,rules:[{[R]:xD,rules:[{[R]:[ze,$e,me,At],endpoint:{[ee]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[te]:kt,[ne]:fe},[v]:K},{[R]:[ze,$e,me,Ie,Pt],rules:[{endpoint:oD,[v]:K}],[v]:G},{[R]:[ze,$e,me,Ie,Nt],endpoint:oD,[v]:K},{[R]:[ze,Se,me,At],endpoint:{[ee]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[te]:kt,[ne]:fe},[v]:K},{[R]:[ze,Se,me,Ie,Pt],rules:[{endpoint:aD,[v]:K}],[v]:G},{[R]:[ze,Se,me,Ie,Nt],endpoint:aD,[v]:K},{[R]:[ve,$e,me,At],endpoint:{[ee]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[te]:kt,[ne]:fe},[v]:K},{[R]:[ve,$e,me,Ie,Pt],rules:[{endpoint:cD,[v]:K}],[v]:G},{[R]:[ve,$e,me,Ie,Nt],endpoint:cD,[v]:K},{[R]:[ve,Se,pt,ln,At],endpoint:{[ee]:jh,[te]:kt,[ne]:fe},[v]:K},{[R]:[ve,Se,pt,ln,Ie,Pt],rules:[{[R]:Fs,endpoint:$_,[v]:K},{endpoint:$_,[v]:K}],[v]:G},{[R]:[ve,Se,pt,ln,Ie,Nt],endpoint:$_,[v]:K},{[R]:[ve,Se,me,At],endpoint:{[ee]:NR,[te]:kt,[ne]:fe},[v]:K},{[R]:[ve,Se,me,Ie,Pt],rules:[{[R]:Fs,endpoint:{[ee]:NR,[te]:gt,[ne]:fe},[v]:K},{endpoint:lD,[v]:K}],[v]:G},{[R]:[ve,Se,me,Ie,Nt],endpoint:lD,[v]:K}],[v]:G},Bh],[v]:G}],[v]:G}],[v]:G},{error:"A region must be set when sending requests to S3.",[v]:oe}]},$D=D3;var k3=new Sh({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),Hh=(t,e={})=>k3.get(t,()=>u_($D,{endpointParams:t,logger:e.logger}));Bi.aws=h_;var P3=t=>(e,n,r)=>y(void 0,null,function*(){if(!r)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let s=yield t(e,n,r),i=Zn(n)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${n.commandName}\``);let o=yield Hy(r,{getEndpointParameterInstructions:i},e);return Object.assign(s,o)}),N3=(t,e,n)=>y(void 0,null,function*(){return{operation:Zn(e).operation,region:(yield Ut(t.region)())||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}}),zD=P3(N3);function GD(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}function KD(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}var O3=(t,e,n)=>s=>{let o=t(s).properties?.authSchemes;if(!o)return e(s);let a=[];for(let l of o){let c=l,{name:d,properties:f={}}=c,m=ms(c,["name","properties"]),g=d.toLowerCase();d!==g&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${d}\` to \`${g}\``);let b;if(g==="sigv4a"){b="aws.auth#sigv4a";let N=o.find(U=>{let j=U.name.toLowerCase();return j!=="sigv4a"&&j.startsWith("sigv4")});if(!Mh.CrtSignerV4&&N)continue}else if(g.startsWith("sigv4"))b="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${g}\``);let C=n[b];if(!C)throw new Error(`Could not find HttpAuthOption create function for \`${b}\``);let x=C(s);x.schemeId=b,x.signingProperties=E(E(E({},x.signingProperties||{}),m),f),a.push(x)}return a},M3=t=>{let e=[];switch(t.operation){default:e.push(GD(t)),e.push(KD(t))}return e},HD=O3(Hh,M3,{"aws.auth#sigv4":GD,"aws.auth#sigv4a":KD}),WD=t=>{let e=jI(t),n=UI(e);return E({},n)};var QD=t=>z(E({},t),{useFipsEndpoint:t.useFipsEndpoint??!1,useDualstackEndpoint:t.useDualstackEndpoint??!1,forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),Wh={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var dn=class t extends rh{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};var Qh=class t extends dn{constructor(e){super(E({name:"NoSuchUpload",$fault:"client"},e)),this.name="NoSuchUpload",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};var Yh=class t extends dn{constructor(e){super(E({name:"ObjectNotInActiveTierError",$fault:"client"},e)),this.name="ObjectNotInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},Xh=class t extends dn{constructor(e){super(E({name:"BucketAlreadyExists",$fault:"client"},e)),this.name="BucketAlreadyExists",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},Zh=class t extends dn{constructor(e){super(E({name:"BucketAlreadyOwnedByYou",$fault:"client"},e)),this.name="BucketAlreadyOwnedByYou",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};var Jh=class t extends dn{constructor(e){super(E({name:"NoSuchBucket",$fault:"client"},e)),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};var ef=class t extends dn{constructor(e){super(E({name:"InvalidObjectState",$fault:"client"},e)),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,t.prototype),this.StorageClass=e.StorageClass,this.AccessTier=e.AccessTier}},tf=class t extends dn{constructor(e){super(E({name:"NoSuchKey",$fault:"client"},e)),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};var nf=class t extends dn{constructor(e){super(E({name:"NotFound",$fault:"client"},e)),this.name="NotFound",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};var F3=t=>E(E(E({},t),t.SecretAccessKey&&{SecretAccessKey:Dn}),t.SessionToken&&{SessionToken:Dn}),YD=t=>E(E(E(E({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:Dn}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Dn}),t.Credentials&&{Credentials:F3(t.Credentials)}),XD=t=>E(E(E({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:Dn}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Dn});var rf=class t extends dn{constructor(e){super(E({name:"ObjectAlreadyInActiveTierError",$fault:"client"},e)),this.name="ObjectAlreadyInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};var ZD=t=>E(E(E({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:Dn}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Dn}),JD=t=>E(E(E(E({},t),t.SSECustomerKey&&{SSECustomerKey:Dn}),t.SSEKMSKeyId&&{SSEKMSKeyId:Dn}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Dn});var rk=(t,e)=>y(void 0,null,function*(){let n=o_(t,e),r=jt({},Ds,{[kj]:t[mj],[uf]:t[af],[df]:t[lf],[hf]:t[cf],[pa]:[()=>Ds(t[ma]),()=>t[ma].toString()]});n.bp("/"),n.p("Bucket",()=>t.Bucket,"{Bucket}",!1);let s=jt({[Rj]:[,""]});return n.m("GET").h(r).q(s).b(void 0),n.build()});var sk=(t,e)=>y(void 0,null,function*(){let n=o_(t,e),r=jt({},Ds,E({[Aj]:t[nj]||"application/octet-stream",[Dj]:t[Q3],[bj]:t[X3],[Ej]:t[Z3],[vj]:t[J3],[wj]:t[ej],[xj]:[()=>Ds(t[ek]),()=>t[ek].toString()],[Sj]:t[tj],[zj]:t[Y3],[mk]:t[ck],[pk]:t[lk],[gk]:t[uk],[yk]:t[dk],[Cj]:[()=>Ds(t[tk]),()=>MC(t[tk]).toString()],[Ij]:t[lj],[Oj]:t[ij],[Mj]:t[oj],[Fj]:t[aj],[Lj]:t[cj],[uf]:t[af],[$j]:t[of],[Wj]:t[_j],[_k]:t[hk],[Gj]:t[pj],[bk]:t[fk],[df]:t[lf],[hf]:t[cf],[pa]:[()=>Ds(t[ma]),()=>t[ma].toString()],[qj]:t[fj],[Kj]:t[gj],[Vj]:t[dj],[Uj]:[()=>Ds(t[nk]),()=>HC(t[nk]).toString()],[Bj]:t[uj],[Nj]:t[rj]},t.Metadata!==void 0&&Object.keys(t.Metadata).reduce((a,c)=>(a[`x-amz-meta-${c.toLowerCase()}`]=t.Metadata[c],a),{})));n.bp("/{Key+}"),n.p("Bucket",()=>t.Bucket,"{Bucket}",!1),n.p("Key",()=>t.Key,"{Key+}",!0);let s=jt({[Qj]:[,"PutObject"]}),i,o;return t.Body!==void 0&&(o=t.Body,i=o),n.m("PUT").h(r).q(s).b(i),n.build()});var ik=(t,e)=>y(void 0,null,function*(){if(t.statusCode!==200&&t.statusCode>=300)return ak(t,e);let n=jt({$metadata:nr(t),[af]:[,t.headers[uf]],[lf]:[,t.headers[df]],[cf]:[,t.headers[hf]],[ma]:[()=>t.headers[pa]!==void 0,()=>Ty(t.headers[pa])]}),r=Iy(IC(yield R_(t.body,e)),"body");return r[lb]!=null&&(n[lb]=W3(r[lb],e)),n});var ok=(t,e)=>y(void 0,null,function*(){if(t.statusCode!==200&&t.statusCode>=300)return ak(t,e);let n=jt({$metadata:nr(t),[sf]:[,t.headers[Pj]],[sj]:[,t.headers[Tj]],[ck]:[,t.headers[mk]],[lk]:[,t.headers[pk]],[uk]:[,t.headers[gk]],[dk]:[,t.headers[yk]],[af]:[,t.headers[uf]],[yj]:[,t.headers[Hj]],[hk]:[,t.headers[_k]],[fk]:[,t.headers[bk]],[lf]:[,t.headers[df]],[cf]:[,t.headers[hf]],[ma]:[()=>t.headers[pa]!==void 0,()=>Ty(t.headers[pa])],[hj]:[,t.headers[jj]]});return yield nh(t.body,e),n});var ak=(t,e)=>y(void 0,null,function*(){let n=z(E({},t),{body:yield wR(t.body,e)}),r=xR(t,n.body);switch(r){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw yield z3(n,e);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw yield H3(n,e);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw yield V3(n,e);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw yield U3(n,e);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw yield q3(n,e);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw yield j3(n,e);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw yield $3(n,e);case"NotFound":case"com.amazonaws.s3#NotFound":throw yield G3(n,e);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw yield K3(n,e);default:let s=n.body;return B3({output:t,parsedBody:s,errorCode:r})}}),B3=BC(dn),V3=(t,e)=>y(void 0,null,function*(){let n=jt({}),r=t.body,s=new Xh(E({$metadata:nr(t)},n));return jn(s,t.body)}),U3=(t,e)=>y(void 0,null,function*(){let n=jt({}),r=t.body,s=new Zh(E({$metadata:nr(t)},n));return jn(s,t.body)}),j3=(t,e)=>y(void 0,null,function*(){let n=jt({}),r=t.body;r[cb]!=null&&(n[cb]=sa(r[cb])),r[of]!=null&&(n[of]=sa(r[of]));let s=new ef(E({$metadata:nr(t)},n));return jn(s,t.body)}),q3=(t,e)=>y(void 0,null,function*(){let n=jt({}),r=t.body,s=new Jh(E({$metadata:nr(t)},n));return jn(s,t.body)}),$3=(t,e)=>y(void 0,null,function*(){let n=jt({}),r=t.body,s=new tf(E({$metadata:nr(t)},n));return jn(s,t.body)}),z3=(t,e)=>y(void 0,null,function*(){let n=jt({}),r=t.body,s=new Qh(E({$metadata:nr(t)},n));return jn(s,t.body)}),G3=(t,e)=>y(void 0,null,function*(){let n=jt({}),r=t.body,s=new nf(E({$metadata:nr(t)},n));return jn(s,t.body)}),K3=(t,e)=>y(void 0,null,function*(){let n=jt({}),r=t.body,s=new rf(E({$metadata:nr(t)},n));return jn(s,t.body)}),H3=(t,e)=>y(void 0,null,function*(){let n=jt({}),r=t.body,s=new Yh(E({$metadata:nr(t)},n));return jn(s,t.body)});var W3=(t,e)=>{let n={};return t[ab]!=null&&(n[ab]=sa(t[ab])),t[ub]!=null&&(n[ub]=sa(t[ub])),t[db]!=null&&(n[db]=sa(t[db])),t[sf]!=null&&(n[sf]=Iy(FC(t[sf]))),n};var nr=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]});var Q3="ACL";var ab="AccessKeyId";var cb="AccessTier";var ma="BucketKeyEnabled";var lb="Credentials",Y3="ChecksumAlgorithm";var X3="CacheControl",ck="ChecksumCRC32",lk="ChecksumCRC32C",Z3="ContentDisposition";var J3="ContentEncoding";var ej="ContentLanguage",ek="ContentLength";var tj="ContentMD5";var uk="ChecksumSHA1",dk="ChecksumSHA256";var nj="ContentType";var tk="Expires";var rj="ExpectedBucketOwner";var sj="ETag";var sf="Expiration";var ij="GrantFullControl";var oj="GrantRead",aj="GrantReadACP";var cj="GrantWriteACP";var lj="IfNoneMatch";var uj="ObjectLockLegalHoldStatus",dj="ObjectLockMode";var nk="ObjectLockRetainUntilDate";var hj="RequestCharged";var fj="RequestPayer";var ub="SecretAccessKey";var of="StorageClass";var mj="SessionMode";var af="ServerSideEncryption";var hk="SSECustomerAlgorithm",pj="SSECustomerKey",fk="SSECustomerKeyMD5";var cf="SSEKMSEncryptionContext",lf="SSEKMSKeyId";var db="SessionToken";var gj="Tagging";var yj="VersionId";var _j="WebsiteRedirectLocation";var bj="cache-control",Ej="content-disposition",vj="content-encoding",wj="content-language",xj="content-length",Sj="content-md5";var Aj="content-type";var Cj="expires";var Tj="etag";var Ij="if-none-match";var Rj="session";var Dj="x-amz-acl";var mk="x-amz-checksum-crc32",pk="x-amz-checksum-crc32c";var gk="x-amz-checksum-sha1",yk="x-amz-checksum-sha256";var kj="x-amz-create-session-mode";var Pj="x-amz-expiration",Nj="x-amz-expected-bucket-owner";var Oj="x-amz-grant-full-control",Mj="x-amz-grant-read",Fj="x-amz-grant-read-acp";var Lj="x-amz-grant-write-acp";var Bj="x-amz-object-lock-legal-hold",Vj="x-amz-object-lock-mode",Uj="x-amz-object-lock-retain-until-date";var jj="x-amz-request-charged";var qj="x-amz-request-payer";var $j="x-amz-storage-class",zj="x-amz-sdk-checksum-algorithm";var uf="x-amz-server-side-encryption",df="x-amz-server-side-encryption-aws-kms-key-id",pa="x-amz-server-side-encryption-bucket-key-enabled",hf="x-amz-server-side-encryption-context",_k="x-amz-server-side-encryption-customer-algorithm",Gj="x-amz-server-side-encryption-customer-key",bk="x-amz-server-side-encryption-customer-key-md5",Kj="x-amz-tagging";var Hj="x-amz-version-id",Wj="x-amz-website-redirect-location",Qj="x-id";var ff=class extends Ni.classBuilder().ep(z(E({},Wh),{DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}})).m(function(e,n,r,s){return[mh(r,this.serialize,this.deserialize),ph(r,e.getEndpointParameterInstructions()),xh(r)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(XD,YD).ser(rk).de(ik).build(){};var Ek={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.658.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"yarn test:e2e:node && yarn test:e2e:browser","test:e2e:browser":"ts-mocha test/**/*.browser.ispec.ts && karma start karma.conf.js","test:e2e:node":"jest --c jest.config.e2e.js","test:unit":"ts-mocha test/unit/**/*.spec.ts"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.658.1","@aws-sdk/client-sts":"3.658.1","@aws-sdk/core":"3.658.1","@aws-sdk/credential-provider-node":"3.658.1","@aws-sdk/middleware-bucket-endpoint":"3.654.0","@aws-sdk/middleware-expect-continue":"3.654.0","@aws-sdk/middleware-flexible-checksums":"3.658.1","@aws-sdk/middleware-host-header":"3.654.0","@aws-sdk/middleware-location-constraint":"3.654.0","@aws-sdk/middleware-logger":"3.654.0","@aws-sdk/middleware-recursion-detection":"3.654.0","@aws-sdk/middleware-sdk-s3":"3.658.1","@aws-sdk/middleware-ssec":"3.654.0","@aws-sdk/middleware-user-agent":"3.654.0","@aws-sdk/region-config-resolver":"3.654.0","@aws-sdk/signature-v4-multi-region":"3.658.1","@aws-sdk/types":"3.654.0","@aws-sdk/util-endpoints":"3.654.0","@aws-sdk/util-user-agent-browser":"3.654.0","@aws-sdk/util-user-agent-node":"3.654.0","@aws-sdk/xml-builder":"3.654.0","@smithy/config-resolver":"^3.0.8","@smithy/core":"^2.4.6","@smithy/eventstream-serde-browser":"^3.0.9","@smithy/eventstream-serde-config-resolver":"^3.0.6","@smithy/eventstream-serde-node":"^3.0.8","@smithy/fetch-http-handler":"^3.2.8","@smithy/hash-blob-browser":"^3.1.5","@smithy/hash-node":"^3.0.6","@smithy/hash-stream-node":"^3.1.5","@smithy/invalid-dependency":"^3.0.6","@smithy/md5-js":"^3.0.6","@smithy/middleware-content-length":"^3.0.8","@smithy/middleware-endpoint":"^3.1.3","@smithy/middleware-retry":"^3.0.21","@smithy/middleware-serde":"^3.0.6","@smithy/middleware-stack":"^3.0.6","@smithy/node-config-provider":"^3.1.7","@smithy/node-http-handler":"^3.2.3","@smithy/protocol-http":"^4.1.3","@smithy/smithy-client":"^3.3.5","@smithy/types":"^3.4.2","@smithy/url-parser":"^3.0.6","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.21","@smithy/util-defaults-mode-node":"^3.0.21","@smithy/util-endpoints":"^2.1.2","@smithy/util-middleware":"^3.0.6","@smithy/util-retry":"^3.0.6","@smithy/util-stream":"^3.1.8","@smithy/util-utf8":"^3.0.0","@smithy/util-waiter":"^3.1.5",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.658.1","@tsconfig/node16":"16.1.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var hb=t=>new TextEncoder().encode(t);function fb(t){return typeof t=="string"?t.length===0:t.byteLength===0}var mb={name:"SHA-1"},pb={name:"HMAC",hash:mb},vk=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);var Xj={};function zn(){return typeof window<"u"?window:typeof self<"u"?self:Xj}var gb=function(){function t(e){this.toHash=new Uint8Array(0),e!==void 0&&(this.key=new Promise(function(n,r){zn().crypto.subtle.importKey("raw",wk(e),pb,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))}return t.prototype.update=function(e){if(!fb(e)){var n=wk(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return zn().crypto.subtle.sign(pb,n,e.toHash).then(function(r){return new Uint8Array(r)})}):fb(this.toHash)?Promise.resolve(vk):Promise.resolve().then(function(){return zn().crypto.subtle.digest(mb,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){this.toHash=new Uint8Array(0)},t}();function wk(t){return typeof t=="string"?hb(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}var Zj=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function mf(t){if(Jj(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return e4(e)}return!1}function Jj(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function e4(t){return t&&Zj.every(function(e){return typeof t[e]=="function"})}var xk=function(){function t(e){if(mf(zn()))this.hash=new gb(e);else throw new Error("SHA1 not supported")}return t.prototype.update=function(e,n){this.hash.update(an(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();var yb={name:"SHA-256"},_b={name:"HMAC",hash:yb},Sk=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);var bb=function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!Er(e)){var n=an(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return zn().crypto.subtle.sign(_b,n,e.toHash).then(function(r){return new Uint8Array(r)})}):Er(this.toHash)?Promise.resolve(Sk):Promise.resolve().then(function(){return zn().crypto.subtle.digest(yb,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,r){zn().crypto.subtle.importKey("raw",an(e.secret),_b,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))},t}();var vn=64,Ak=32,Ck=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tk=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Ik=Math.pow(2,53)-1;var Rl=function(){function t(){this.state=Int32Array.from(Tk),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>Ik)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[n++],r--,this.bufferLength===vn&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%vn>=vn-8){for(var s=this.bufferLength;s<vn;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<vn-8;s++)n.setUint8(s,0);n.setUint32(vn-8,Math.floor(e/4294967296),!0),n.setUint32(vn-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(Ak),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,n=e.buffer,r=e.state,s=r[0],i=r[1],o=r[2],a=r[3],c=r[4],l=r[5],d=r[6],f=r[7],m=0;m<vn;m++){if(m<16)this.temp[m]=(n[m*4]&255)<<24|(n[m*4+1]&255)<<16|(n[m*4+2]&255)<<8|n[m*4+3]&255;else{var g=this.temp[m-2],b=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10;g=this.temp[m-15];var C=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;this.temp[m]=(b+this.temp[m-7]|0)+(C+this.temp[m-16]|0)}var x=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&l^~c&d)|0)+(f+(Ck[m]+this.temp[m]|0)|0)|0,N=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;f=d,d=l,l=c,c=a+x|0,a=o,o=i,i=s,s=x+N|0}r[0]+=s,r[1]+=i,r[2]+=o,r[3]+=a,r[4]+=c,r[5]+=l,r[6]+=d,r[7]+=f},t}();var Rk=function(){function t(e){this.secret=e,this.hash=new Rl,this.reset()}return t.prototype.update=function(e){if(!(Er(e)||this.error))try{this.hash.update(an(e))}catch(n){this.error=n}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return So(this,void 0,void 0,function(){return Ao(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new Rl,this.secret){this.outer=new Rl;var e=t4(this.secret),n=new Uint8Array(vn);n.set(e);for(var r=0;r<vn;r++)e[r]^=54,n[r]^=92;this.hash.update(e),this.outer.update(n);for(var r=0;r<e.byteLength;r++)e[r]=0}},t}();function t4(t){var e=an(t);if(e.byteLength>vn){var n=new Rl;n.update(e),e=n.digest()}var r=new Uint8Array(vn);return r.set(e),r}var Dk=function(){function t(e){mf(zn())?this.hash=new bb(e):this.hash=new Rk(e)}return t.prototype.update=function(e,n){this.hash.update(an(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();var kk=Up(vb());var Pk=({serviceId:t,clientVersion:e})=>()=>y(void 0,null,function*(){let n=typeof window<"u"&&window?.navigator?.userAgent?kk.default.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",e],["ua","2.0"],[`os/${n?.os?.name||"other"}`,n?.os?.version],["lang/js"],["md/browser",`${n?.browser?.name??"unknown"}_${n?.browser?.version??"unknown"}`]];return t&&r.push([`api/${t}`,e]),r});var ga=class t{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&Nk(n),new t(n)}valueOf(){let e=this.bytes.slice(0),n=e[0]&128;return n&&Nk(e),parseInt(ot(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function Nk(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var pf=class{constructor(e,n){this.toUtf8=e,this.fromUtf8=n}format(e){let n=[];for(let i of Object.keys(e)){let o=this.fromUtf8(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}let r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0)),s=0;for(let i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":let a=this.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let l=new Uint8Array(c.buffer);return l.set(a,3),l;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(ga.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!u4.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let f=new Uint8Array(17);return f[0]=9,f.set(th(e.value.replace(/\-/g,"")),1),f}}parse(e){let n={},r=0;for(;r<e.byteLength;){let s=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,s));switch(r+=s,e.getUint8(r++)){case 0:n[i]={type:Ok,value:!0};break;case 1:n[i]={type:Ok,value:!1};break;case 2:n[i]={type:n4,value:e.getInt8(r++)};break;case 3:n[i]={type:r4,value:e.getInt16(r,!1)},r+=2;break;case 4:n[i]={type:s4,value:e.getInt32(r,!1)},r+=4;break;case 5:n[i]={type:i4,value:new ga(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:let o=e.getUint16(r,!1);r+=2,n[i]={type:o4,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:let a=e.getUint16(r,!1);r+=2,n[i]={type:a4,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a))},r+=a;break;case 8:n[i]={type:c4,value:new Date(new ga(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:let c=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,n[i]={type:l4,value:`${ot(c.subarray(0,4))}-${ot(c.subarray(4,6))}-${ot(c.subarray(6,8))}-${ot(c.subarray(8,10))}-${ot(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return n}};var Ok="boolean",n4="byte",r4="short",s4="integer",i4="long",o4="binary",a4="string",c4="timestamp",l4="uuid",u4=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Mk=4,Ls=Mk*2,$i=4,d4=Ls+$i*2;function Fk({byteLength:t,byteOffset:e,buffer:n}){if(t<d4)throw new Error("Provided message too short to accommodate event stream message overhead");let r=new DataView(n,e,t),s=r.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");let i=r.getUint32(Mk,!1),o=r.getUint32(Ls,!1),a=r.getUint32(t-$i,!1),c=new Ri().update(new Uint8Array(n,e,Ls));if(o!==c.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(n,e+Ls,t-(Ls+$i))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(n,e+Ls+$i,i),body:new Uint8Array(n,e+Ls+$i+i,s-i-(Ls+$i+$i))}}var gf=class{constructor(e,n){this.headerMarshaller=new pf(e,n),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){let e=this.messageBuffer.pop(),n=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return n}}}getAvailableMessages(){let e=this.messageBuffer;this.messageBuffer=[];let n=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return n}}}encode({headers:e,body:n}){let r=this.headerMarshaller.format(e),s=r.byteLength+n.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new Ri;return o.setUint32(0,s,!1),o.setUint32(4,r.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(n,r.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(e){let{headers:n,body:r}=Fk(e);return{headers:this.headerMarshaller.parse(n),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}};var yf=class{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}asyncIterator(){return pn(this,null,function*(){try{for(var e=qr(this.options.inputStream),n,r,s;n=!(r=yield new wt(e.next())).done;n=!1){let i=r.value;yield this.options.decoder.decode(i)}}catch{s=[r]}finally{try{n&&(r=e.return)&&(yield new wt(r.call(e)))}finally{if(s)throw s[0]}}})}};var _f=class{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}asyncIterator(){return pn(this,null,function*(){try{for(var e=qr(this.options.messageStream),n,r,s;n=!(r=yield new wt(e.next())).done;n=!1){let i=r.value;yield this.options.encoder.encode(i)}}catch{s=[r]}finally{try{n&&(r=e.return)&&(yield new wt(r.call(e)))}finally{if(s)throw s[0]}}this.options.includeEndFrame&&(yield new Uint8Array(0))})}};var bf=class{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}asyncIterator(){return pn(this,null,function*(){try{for(var e=qr(this.options.messageStream),n,r,s;n=!(r=yield new wt(e.next())).done;n=!1){let i=r.value;let o=yield new wt(this.options.deserializer(i));o!==void 0&&(yield o)}}catch{s=[r]}finally{try{n&&(r=e.return)&&(yield new wt(r.call(e)))}finally{if(s)throw s[0]}}})}};var Ef=class{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}asyncIterator(){return pn(this,null,function*(){try{for(var e=qr(this.options.inputStream),n,r,s;n=!(r=yield new wt(e.next())).done;n=!1){let i=r.value;yield this.options.serializer(i)}}catch{s=[r]}finally{try{n&&(r=e.return)&&(yield new wt(r.call(e)))}finally{if(s)throw s[0]}}})}};function Lk(t){let e=0,n=0,r=null,s=null,i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,n=4,r=new Uint8Array(a),new DataView(r.buffer).setUint32(0,a,!1)},o=function(){return pn(this,null,function*(){let a=t[Symbol.asyncIterator]();for(;;){let{value:c,done:l}=yield new wt(a.next());if(l){if(e)if(e===n)yield r;else throw new Error("Truncated event message received.");else return;return}let d=c.length,f=0;for(;f<d;){if(!r){let g=d-f;s||(s=new Uint8Array(4));let b=Math.min(4-n,g);if(s.set(c.slice(f,f+b),n),n+=b,f+=b,n<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}let m=Math.min(e-n,d-f);r.set(c.slice(f,f+m),n),n+=m,f+=m,e&&e===n&&(yield r,r=null,e=0,n=0)}}})};return{[Symbol.asyncIterator]:o}}function Bk(t,e){return function(n){return y(this,null,function*(){let{value:r}=n.headers[":message-type"];if(r==="error"){let s=new Error(n.headers[":error-message"].value||"UnknownError");throw s.name=n.headers[":error-code"].value,s}else if(r==="exception"){let s=n.headers[":exception-type"].value,i={[s]:n},o=yield t(i);if(o.$unknown){let a=new Error(e(n.body));throw a.name=s,a}throw o[s]}else if(r==="event"){let s={[n.headers[":event-type"].value]:n},i=yield t(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)})}}var kl=class{constructor({utf8Encoder:e,utf8Decoder:n}){this.eventStreamCodec=new gf(e,n),this.utfEncoder=e}deserialize(e,n){let r=Lk(e);return new bf({messageStream:new yf({inputStream:r,decoder:this.eventStreamCodec}),deserializer:Bk(n,this.utfEncoder)})}serialize(e,n){return new _f({messageStream:new Ef({inputStream:e,serializer:n}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};var Vk=t=>({[Symbol.asyncIterator]:function(){return pn(this,null,function*(){let e=t.getReader();try{for(;;){let{done:n,value:r}=yield new wt(e.read());if(n)return;yield r}}finally{e.releaseLock()}})}}),Uk=t=>{let e=t[Symbol.asyncIterator]();return new ReadableStream({pull(r){return y(this,null,function*(){let{done:s,value:i}=yield e.next();if(s)return r.close();r.enqueue(i)})}})};var vf=class{constructor({utf8Encoder:e,utf8Decoder:n}){this.universalMarshaller=new kl({utf8Decoder:n,utf8Encoder:e})}deserialize(e,n){let r=h4(e)?Vk(e):e;return this.universalMarshaller.deserialize(r,n)}serialize(e,n){let r=this.universalMarshaller.serialize(e,n);return typeof ReadableStream=="function"?Uk(r):r}},h4=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;var jk=t=>new vf(t);function qk(t,e,n=1024*1024){return new Promise((r,s)=>{let i=new FileReader;i.addEventListener("error",s),i.addEventListener("abort",s);let o=t.size,a=0;function c(){if(a>=o){r();return}i.readAsArrayBuffer(t.slice(a,Math.min(o,a+n)))}i.addEventListener("load",l=>{let d=l.target.result;e(new Uint8Array(d)),a+=d.byteLength,c()}),c()})}var $k=function(e,n){return y(this,null,function*(){let r=new e;return yield qk(n,s=>{r.update(s)}),r.digest()})};var zk=t=>()=>Promise.reject(t);var Gk=[1732584193,4023233417,2562383102,271733878];var wf=class{constructor(){this.reset()}update(e){if(m4(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");let n=p4(e),r=0,{byteLength:s}=n;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,n[r++]),s--,this.bufferLength===64&&(this.hashBuffer(),this.bufferLength=0)}digest(){return y(this,null,function*(){if(!this.finished){let{buffer:n,bufferLength:r,bytesHashed:s}=this,i=s*8;if(n.setUint8(this.bufferLength++,128),r%64>=56){for(let o=this.bufferLength;o<64;o++)n.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<56;o++)n.setUint8(o,0);n.setUint32(56,i>>>0,!0),n.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}let e=new DataView(new ArrayBuffer(16));for(let n=0;n<4;n++)e.setUint32(n*4,this.state[n],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)})}hashBuffer(){let{buffer:e,state:n}=this,r=n[0],s=n[1],i=n[2],o=n[3];r=Xt(r,s,i,o,e.getUint32(0,!0),7,3614090360),o=Xt(o,r,s,i,e.getUint32(4,!0),12,3905402710),i=Xt(i,o,r,s,e.getUint32(8,!0),17,606105819),s=Xt(s,i,o,r,e.getUint32(12,!0),22,3250441966),r=Xt(r,s,i,o,e.getUint32(16,!0),7,4118548399),o=Xt(o,r,s,i,e.getUint32(20,!0),12,1200080426),i=Xt(i,o,r,s,e.getUint32(24,!0),17,2821735955),s=Xt(s,i,o,r,e.getUint32(28,!0),22,4249261313),r=Xt(r,s,i,o,e.getUint32(32,!0),7,1770035416),o=Xt(o,r,s,i,e.getUint32(36,!0),12,2336552879),i=Xt(i,o,r,s,e.getUint32(40,!0),17,4294925233),s=Xt(s,i,o,r,e.getUint32(44,!0),22,2304563134),r=Xt(r,s,i,o,e.getUint32(48,!0),7,1804603682),o=Xt(o,r,s,i,e.getUint32(52,!0),12,4254626195),i=Xt(i,o,r,s,e.getUint32(56,!0),17,2792965006),s=Xt(s,i,o,r,e.getUint32(60,!0),22,1236535329),r=Zt(r,s,i,o,e.getUint32(4,!0),5,4129170786),o=Zt(o,r,s,i,e.getUint32(24,!0),9,3225465664),i=Zt(i,o,r,s,e.getUint32(44,!0),14,643717713),s=Zt(s,i,o,r,e.getUint32(0,!0),20,3921069994),r=Zt(r,s,i,o,e.getUint32(20,!0),5,3593408605),o=Zt(o,r,s,i,e.getUint32(40,!0),9,38016083),i=Zt(i,o,r,s,e.getUint32(60,!0),14,3634488961),s=Zt(s,i,o,r,e.getUint32(16,!0),20,3889429448),r=Zt(r,s,i,o,e.getUint32(36,!0),5,568446438),o=Zt(o,r,s,i,e.getUint32(56,!0),9,3275163606),i=Zt(i,o,r,s,e.getUint32(12,!0),14,4107603335),s=Zt(s,i,o,r,e.getUint32(32,!0),20,1163531501),r=Zt(r,s,i,o,e.getUint32(52,!0),5,2850285829),o=Zt(o,r,s,i,e.getUint32(8,!0),9,4243563512),i=Zt(i,o,r,s,e.getUint32(28,!0),14,1735328473),s=Zt(s,i,o,r,e.getUint32(48,!0),20,2368359562),r=Jt(r,s,i,o,e.getUint32(20,!0),4,4294588738),o=Jt(o,r,s,i,e.getUint32(32,!0),11,2272392833),i=Jt(i,o,r,s,e.getUint32(44,!0),16,1839030562),s=Jt(s,i,o,r,e.getUint32(56,!0),23,4259657740),r=Jt(r,s,i,o,e.getUint32(4,!0),4,2763975236),o=Jt(o,r,s,i,e.getUint32(16,!0),11,1272893353),i=Jt(i,o,r,s,e.getUint32(28,!0),16,4139469664),s=Jt(s,i,o,r,e.getUint32(40,!0),23,3200236656),r=Jt(r,s,i,o,e.getUint32(52,!0),4,681279174),o=Jt(o,r,s,i,e.getUint32(0,!0),11,3936430074),i=Jt(i,o,r,s,e.getUint32(12,!0),16,3572445317),s=Jt(s,i,o,r,e.getUint32(24,!0),23,76029189),r=Jt(r,s,i,o,e.getUint32(36,!0),4,3654602809),o=Jt(o,r,s,i,e.getUint32(48,!0),11,3873151461),i=Jt(i,o,r,s,e.getUint32(60,!0),16,530742520),s=Jt(s,i,o,r,e.getUint32(8,!0),23,3299628645),r=en(r,s,i,o,e.getUint32(0,!0),6,4096336452),o=en(o,r,s,i,e.getUint32(28,!0),10,1126891415),i=en(i,o,r,s,e.getUint32(56,!0),15,2878612391),s=en(s,i,o,r,e.getUint32(20,!0),21,4237533241),r=en(r,s,i,o,e.getUint32(48,!0),6,1700485571),o=en(o,r,s,i,e.getUint32(12,!0),10,2399980690),i=en(i,o,r,s,e.getUint32(40,!0),15,4293915773),s=en(s,i,o,r,e.getUint32(4,!0),21,2240044497),r=en(r,s,i,o,e.getUint32(32,!0),6,1873313359),o=en(o,r,s,i,e.getUint32(60,!0),10,4264355552),i=en(i,o,r,s,e.getUint32(24,!0),15,2734768916),s=en(s,i,o,r,e.getUint32(52,!0),21,1309151649),r=en(r,s,i,o,e.getUint32(16,!0),6,4149444226),o=en(o,r,s,i,e.getUint32(44,!0),10,3174756917),i=en(i,o,r,s,e.getUint32(8,!0),15,718787259),s=en(s,i,o,r,e.getUint32(36,!0),21,3951481745),n[0]=r+n[0]&4294967295,n[1]=s+n[1]&4294967295,n[2]=i+n[2]&4294967295,n[3]=o+n[3]&4294967295}reset(){this.state=Uint32Array.from(Gk),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}};function xf(t,e,n,r,s,i){return e=(e+t&4294967295)+(r+i&4294967295)&4294967295,(e<<s|e>>>32-s)+n&4294967295}function Xt(t,e,n,r,s,i,o){return xf(e&n|~e&r,t,e,s,i,o)}function Zt(t,e,n,r,s,i,o){return xf(e&r|n&~r,t,e,s,i,o)}function Jt(t,e,n,r,s,i,o){return xf(e^n^r,t,e,s,i,o)}function en(t,e,n,r,s,i,o){return xf(n^(e|~r),t,e,s,i,o)}function m4(t){return typeof t=="string"?t.length===0:t.byteLength===0}function p4(t){return typeof t=="string"?Rn(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}var Kk=typeof TextEncoder=="function"?new TextEncoder:null,Hk=t=>{if(typeof t=="string"){if(Kk)return Kk.encode(t).byteLength;let e=t.length;for(let n=e-1;n>=0;n--){let r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)};var Wk=t=>({apiVersion:"2006-03-01",base64Decoder:t?.base64Decoder??na,base64Encoder:t?.base64Encoder??ra,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Hh,extensions:t?.extensions??[],getAwsChunkedEncodingStream:t?.getAwsChunkedEncodingStream??pC,httpAuthSchemeProvider:t?.httpAuthSchemeProvider??HD,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Vi},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new xl}],logger:t?.logger??new ks,sdkStreamMixin:t?.sdkStreamMixin??vC,serviceId:t?.serviceId??"S3",signerConstructor:t?.signerConstructor??Fh,signingEscapePath:t?.signingEscapePath??!1,urlParser:t?.urlParser??ia,useArnRegion:t?.useArnRegion??!1,utf8Decoder:t?.utf8Decoder??Rn,utf8Encoder:t?.utf8Encoder??ea});var Yk=Up(vb());var Qk=["in-region","cross-region","mobile","standard","legacy"];var Xk=({defaultsMode:t}={})=>VI(()=>y(void 0,null,function*(){let e=typeof t=="function"?yield t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(g4()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Qk.join(", ")}, got ${e}`)}})),g4=()=>{let e=(typeof window<"u"&&window?.navigator?.userAgent?Yk.default.parse(window.navigator.userAgent):void 0)?.platform?.type;return e==="tablet"||e==="mobile"};var Zk=t=>{let e=Xk(t),n=()=>e().then(VC),r=Wk(t);return z(E(E({},r),t),{runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??Hk,credentialDefaultProvider:t?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??Pk({serviceId:r.serviceId,clientVersion:Ek.version}),eventStreamSerdeProvider:t?.eventStreamSerdeProvider??jk,maxAttempts:t?.maxAttempts??Ps,md5:t?.md5??wf,region:t?.region??zk("Region is missing"),requestHandler:Jd.create(t?.requestHandler??n),retryMode:t?.retryMode??(()=>y(void 0,null,function*(){return(yield n()).retryMode||Qy})),sha1:t?.sha1??xk,sha256:t?.sha256??Dk,streamCollector:t?.streamCollector??eh,streamHasher:t?.streamHasher??$k,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(PI)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(NI))})};var Jk=t=>{let e=()=>y(void 0,null,function*(){if(t.region===void 0)throw new Error("Region is missing from runtimeConfig");let n=t.region;return typeof n=="string"?n:n()});return{setRegion(n){e=n},region(){return e}}},eP=t=>({region:t.region()});var tP=t=>{let e=t.httpAuthSchemes,n=t.httpAuthSchemeProvider,r=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},nP=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()});var Sf=t=>t,rP=(t,e)=>{let n=E(E(E(E({},Sf(Jk(t))),Sf(zC(t))),Sf($A(t))),Sf(tP(t)));return e.forEach(r=>r.configure(n)),E(E(E(E(E({},t),eP(n)),GC(n)),zA(n)),nP(n))};var Af=class extends Zd{constructor(...[e]){let n=Zk(e||{}),r=QD(n),s=aI(r),i=iC(s),o=WT(i),a=OI(o),c=a,l=OT(c),d=MI(l),f=WD(d),m=nI(f,{session:[()=>this,ff]}),g=rP(m,e?.extensions||[]);super(g),this.config=g,this.middlewareStack.use(kI(this.config)),this.middlewareStack.use(YT(this.config)),this.middlewareStack.use(LI(this.config)),this.middlewareStack.use(oC(this.config)),this.middlewareStack.use(aC(this.config)),this.middlewareStack.use(lC(this.config)),this.middlewareStack.use(MT(this.config,{httpAuthSchemeParametersProvider:zD,identityProviderConfigProvider:b=>y(this,null,function*(){return new wh({"aws.auth#sigv4":b.credentials,"aws.auth#sigv4a":b.credentials})})})),this.middlewareStack.use(XT(this.config)),this.middlewareStack.use(oI(this.config)),this.middlewareStack.use(GA(this.config)),this.middlewareStack.use(XC(this.config)),this.middlewareStack.use(Gy(this.config)),this.middlewareStack.use(a_(this.config))}destroy(){super.destroy()}};function _4(t){return e=>n=>y(this,null,function*(){let r=E({},n.input),s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let i of s){let o=r[i.target];if(o){let a;typeof o=="string"?E4(o,t)?a=t.base64Decoder(o):(a=t.utf8Decoder(o),r[i.target]=t.base64Encoder(a)):(a=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o),r[i.target]=t.base64Encoder(a));let c=new t.md5;c.update(a),r[i.hash]=t.base64Encoder(yield c.digest())}}return e(z(E({},n),{input:r}))})}var b4={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},sP=t=>({applyToStack:e=>{e.add(_4(t),b4)}});function E4(t,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))return!1;try{return e.base64Decoder(t).length===32}catch{return!1}}var Cf=class extends Ni.classBuilder().ep(z(E({},Wh),{Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}})).m(function(e,n,r,s){return[mh(r,this.serialize,this.deserialize),ph(r,e.getEndpointParameterInstructions()),sC(r,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}),WC(r),xh(r),sP(r)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(JD,ZD).ser(sk).de(ok).build(){};var iP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oP={};var Vs,wb;(function(){var t;function e(T,w){function S(){}S.prototype=w.prototype,T.D=w.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(I,D,P){for(var A=Array(arguments.length-2),Vr=2;Vr<arguments.length;Vr++)A[Vr-2]=arguments[Vr];return w.prototype[D].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,w,S){S||(S=0);var I=Array(16);if(typeof w=="string")for(var D=0;16>D;++D)I[D]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(D=0;16>D;++D)I[D]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=T.g[0],S=T.g[1],D=T.g[2];var P=T.g[3],A=w+(P^S&(D^P))+I[0]+3614090360&4294967295;w=S+(A<<7&4294967295|A>>>25),A=P+(D^w&(S^D))+I[1]+3905402710&4294967295,P=w+(A<<12&4294967295|A>>>20),A=D+(S^P&(w^S))+I[2]+606105819&4294967295,D=P+(A<<17&4294967295|A>>>15),A=S+(w^D&(P^w))+I[3]+3250441966&4294967295,S=D+(A<<22&4294967295|A>>>10),A=w+(P^S&(D^P))+I[4]+4118548399&4294967295,w=S+(A<<7&4294967295|A>>>25),A=P+(D^w&(S^D))+I[5]+1200080426&4294967295,P=w+(A<<12&4294967295|A>>>20),A=D+(S^P&(w^S))+I[6]+2821735955&4294967295,D=P+(A<<17&4294967295|A>>>15),A=S+(w^D&(P^w))+I[7]+4249261313&4294967295,S=D+(A<<22&4294967295|A>>>10),A=w+(P^S&(D^P))+I[8]+1770035416&4294967295,w=S+(A<<7&4294967295|A>>>25),A=P+(D^w&(S^D))+I[9]+2336552879&4294967295,P=w+(A<<12&4294967295|A>>>20),A=D+(S^P&(w^S))+I[10]+4294925233&4294967295,D=P+(A<<17&4294967295|A>>>15),A=S+(w^D&(P^w))+I[11]+2304563134&4294967295,S=D+(A<<22&4294967295|A>>>10),A=w+(P^S&(D^P))+I[12]+1804603682&4294967295,w=S+(A<<7&4294967295|A>>>25),A=P+(D^w&(S^D))+I[13]+4254626195&4294967295,P=w+(A<<12&4294967295|A>>>20),A=D+(S^P&(w^S))+I[14]+2792965006&4294967295,D=P+(A<<17&4294967295|A>>>15),A=S+(w^D&(P^w))+I[15]+1236535329&4294967295,S=D+(A<<22&4294967295|A>>>10),A=w+(D^P&(S^D))+I[1]+4129170786&4294967295,w=S+(A<<5&4294967295|A>>>27),A=P+(S^D&(w^S))+I[6]+3225465664&4294967295,P=w+(A<<9&4294967295|A>>>23),A=D+(w^S&(P^w))+I[11]+643717713&4294967295,D=P+(A<<14&4294967295|A>>>18),A=S+(P^w&(D^P))+I[0]+3921069994&4294967295,S=D+(A<<20&4294967295|A>>>12),A=w+(D^P&(S^D))+I[5]+3593408605&4294967295,w=S+(A<<5&4294967295|A>>>27),A=P+(S^D&(w^S))+I[10]+38016083&4294967295,P=w+(A<<9&4294967295|A>>>23),A=D+(w^S&(P^w))+I[15]+3634488961&4294967295,D=P+(A<<14&4294967295|A>>>18),A=S+(P^w&(D^P))+I[4]+3889429448&4294967295,S=D+(A<<20&4294967295|A>>>12),A=w+(D^P&(S^D))+I[9]+568446438&4294967295,w=S+(A<<5&4294967295|A>>>27),A=P+(S^D&(w^S))+I[14]+3275163606&4294967295,P=w+(A<<9&4294967295|A>>>23),A=D+(w^S&(P^w))+I[3]+4107603335&4294967295,D=P+(A<<14&4294967295|A>>>18),A=S+(P^w&(D^P))+I[8]+1163531501&4294967295,S=D+(A<<20&4294967295|A>>>12),A=w+(D^P&(S^D))+I[13]+2850285829&4294967295,w=S+(A<<5&4294967295|A>>>27),A=P+(S^D&(w^S))+I[2]+4243563512&4294967295,P=w+(A<<9&4294967295|A>>>23),A=D+(w^S&(P^w))+I[7]+1735328473&4294967295,D=P+(A<<14&4294967295|A>>>18),A=S+(P^w&(D^P))+I[12]+2368359562&4294967295,S=D+(A<<20&4294967295|A>>>12),A=w+(S^D^P)+I[5]+4294588738&4294967295,w=S+(A<<4&4294967295|A>>>28),A=P+(w^S^D)+I[8]+2272392833&4294967295,P=w+(A<<11&4294967295|A>>>21),A=D+(P^w^S)+I[11]+1839030562&4294967295,D=P+(A<<16&4294967295|A>>>16),A=S+(D^P^w)+I[14]+4259657740&4294967295,S=D+(A<<23&4294967295|A>>>9),A=w+(S^D^P)+I[1]+2763975236&4294967295,w=S+(A<<4&4294967295|A>>>28),A=P+(w^S^D)+I[4]+1272893353&4294967295,P=w+(A<<11&4294967295|A>>>21),A=D+(P^w^S)+I[7]+4139469664&4294967295,D=P+(A<<16&4294967295|A>>>16),A=S+(D^P^w)+I[10]+3200236656&4294967295,S=D+(A<<23&4294967295|A>>>9),A=w+(S^D^P)+I[13]+681279174&4294967295,w=S+(A<<4&4294967295|A>>>28),A=P+(w^S^D)+I[0]+3936430074&4294967295,P=w+(A<<11&4294967295|A>>>21),A=D+(P^w^S)+I[3]+3572445317&4294967295,D=P+(A<<16&4294967295|A>>>16),A=S+(D^P^w)+I[6]+76029189&4294967295,S=D+(A<<23&4294967295|A>>>9),A=w+(S^D^P)+I[9]+3654602809&4294967295,w=S+(A<<4&4294967295|A>>>28),A=P+(w^S^D)+I[12]+3873151461&4294967295,P=w+(A<<11&4294967295|A>>>21),A=D+(P^w^S)+I[15]+530742520&4294967295,D=P+(A<<16&4294967295|A>>>16),A=S+(D^P^w)+I[2]+3299628645&4294967295,S=D+(A<<23&4294967295|A>>>9),A=w+(D^(S|~P))+I[0]+4096336452&4294967295,w=S+(A<<6&4294967295|A>>>26),A=P+(S^(w|~D))+I[7]+1126891415&4294967295,P=w+(A<<10&4294967295|A>>>22),A=D+(w^(P|~S))+I[14]+2878612391&4294967295,D=P+(A<<15&4294967295|A>>>17),A=S+(P^(D|~w))+I[5]+4237533241&4294967295,S=D+(A<<21&4294967295|A>>>11),A=w+(D^(S|~P))+I[12]+1700485571&4294967295,w=S+(A<<6&4294967295|A>>>26),A=P+(S^(w|~D))+I[3]+2399980690&4294967295,P=w+(A<<10&4294967295|A>>>22),A=D+(w^(P|~S))+I[10]+4293915773&4294967295,D=P+(A<<15&4294967295|A>>>17),A=S+(P^(D|~w))+I[1]+2240044497&4294967295,S=D+(A<<21&4294967295|A>>>11),A=w+(D^(S|~P))+I[8]+1873313359&4294967295,w=S+(A<<6&4294967295|A>>>26),A=P+(S^(w|~D))+I[15]+4264355552&4294967295,P=w+(A<<10&4294967295|A>>>22),A=D+(w^(P|~S))+I[6]+2734768916&4294967295,D=P+(A<<15&4294967295|A>>>17),A=S+(P^(D|~w))+I[13]+1309151649&4294967295,S=D+(A<<21&4294967295|A>>>11),A=w+(D^(S|~P))+I[4]+4149444226&4294967295,w=S+(A<<6&4294967295|A>>>26),A=P+(S^(w|~D))+I[11]+3174756917&4294967295,P=w+(A<<10&4294967295|A>>>22),A=D+(w^(P|~S))+I[2]+718787259&4294967295,D=P+(A<<15&4294967295|A>>>17),A=S+(P^(D|~w))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var S=w-this.blockSize,I=this.B,D=this.h,P=0;P<w;){if(D==0)for(;P<=S;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<w;)if(I[D++]=T.charCodeAt(P++),D==this.blockSize){s(this,I),D=0;break}}else for(;P<w;)if(I[D++]=T[P++],D==this.blockSize){s(this,I),D=0;break}}this.h=D,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var S=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=S&255,S/=256;for(this.u(T),T=Array(16),w=S=0;4>w;++w)for(var I=0;32>I;I+=8)T[S++]=this.g[w]>>>I&255;return T};function i(T,w){var S=a;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=w(T)}function o(T,w){this.h=w;for(var S=[],I=!0,D=T.length-1;0<=D;D--){var P=T[D]|0;I&&P==w||(S[D]=P,I=!1)}this.g=S}var a={};function c(T){return-128<=T&&128>T?i(T,function(w){return new o([w|0],0>w?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return x(l(-T));for(var w=[],S=1,I=0;T>=S;I++)w[I]=T/S|0,S*=4294967296;return new o(w,0)}function d(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return x(d(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=l(Math.pow(w,8)),I=f,D=0;D<T.length;D+=8){var P=Math.min(8,T.length-D),A=parseInt(T.substring(D,D+P),w);8>P?(P=l(Math.pow(w,P)),I=I.j(P).add(l(A))):(I=I.j(S),I=I.add(l(A)))}return I}var f=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-x(this).m();for(var T=0,w=1,S=0;S<this.g.length;S++){var I=this.i(S);T+=(0<=I?I:4294967296+I)*w,w*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(C(this))return"-"+x(this).toString(T);for(var w=l(Math.pow(T,6)),S=this,I="";;){var D=H(S,w).g;S=N(S,D.j(w));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=D,b(S))return P+I;for(;6>P.length;)P="0"+P;I=P+I}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function C(T){return T.h==-1}t.l=function(T){return T=N(this,T),C(T)?-1:b(T)?0:1};function x(T){for(var w=T.g.length,S=[],I=0;I<w;I++)S[I]=~T.g[I];return new o(S,~T.h).add(m)}t.abs=function(){return C(this)?x(this):this},t.add=function(T){for(var w=Math.max(this.g.length,T.g.length),S=[],I=0,D=0;D<=w;D++){var P=I+(this.i(D)&65535)+(T.i(D)&65535),A=(P>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);I=A>>>16,P&=65535,A&=65535,S[D]=A<<16|P}return new o(S,S[S.length-1]&-2147483648?-1:0)};function N(T,w){return T.add(x(w))}t.j=function(T){if(b(this)||b(T))return f;if(C(this))return C(T)?x(this).j(x(T)):x(x(this).j(T));if(C(T))return x(this.j(x(T)));if(0>this.l(g)&&0>T.l(g))return l(this.m()*T.m());for(var w=this.g.length+T.g.length,S=[],I=0;I<2*w;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<T.g.length;D++){var P=this.i(I)>>>16,A=this.i(I)&65535,Vr=T.i(D)>>>16,fc=T.i(D)&65535;S[2*I+2*D]+=A*fc,U(S,2*I+2*D),S[2*I+2*D+1]+=P*fc,U(S,2*I+2*D+1),S[2*I+2*D+1]+=A*Vr,U(S,2*I+2*D+1),S[2*I+2*D+2]+=P*Vr,U(S,2*I+2*D+2)}for(I=0;I<w;I++)S[I]=S[2*I+1]<<16|S[2*I];for(I=w;I<2*w;I++)S[I]=0;return new o(S,0)};function U(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function j(T,w){this.g=T,this.h=w}function H(T,w){if(b(w))throw Error("division by zero");if(b(T))return new j(f,f);if(C(T))return w=H(x(T),w),new j(x(w.g),x(w.h));if(C(w))return w=H(T,x(w)),new j(x(w.g),w.h);if(30<T.g.length){if(C(T)||C(w))throw Error("slowDivide_ only works with positive integers.");for(var S=m,I=w;0>=I.l(T);)S=ae(S),I=ae(I);var D=le(S,1),P=le(I,1);for(I=le(I,2),S=le(S,2);!b(I);){var A=P.add(I);0>=A.l(T)&&(D=D.add(S),P=A),I=le(I,1),S=le(S,1)}return w=N(T,D.j(w)),new j(D,w)}for(D=f;0<=T.l(w);){for(S=Math.max(1,Math.floor(T.m()/w.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),P=l(S),A=P.j(w);C(A)||0<A.l(T);)S-=I,P=l(S),A=P.j(w);b(P)&&(P=m),D=D.add(P),T=N(T,A)}return new j(D,T)}t.A=function(T){return H(this,T).h},t.and=function(T){for(var w=Math.max(this.g.length,T.g.length),S=[],I=0;I<w;I++)S[I]=this.i(I)&T.i(I);return new o(S,this.h&T.h)},t.or=function(T){for(var w=Math.max(this.g.length,T.g.length),S=[],I=0;I<w;I++)S[I]=this.i(I)|T.i(I);return new o(S,this.h|T.h)},t.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),S=[],I=0;I<w;I++)S[I]=this.i(I)^T.i(I);return new o(S,this.h^T.h)};function ae(T){for(var w=T.g.length+1,S=[],I=0;I<w;I++)S[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(S,T.h)}function le(T,w){var S=w>>5;w%=32;for(var I=T.g.length-S,D=[],P=0;P<I;P++)D[P]=0<w?T.i(P+S)>>>w|T.i(P+S+1)<<32-w:T.i(P+S);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wb=oP.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Vs=oP.Integer=o}).apply(typeof iP<"u"?iP:typeof self<"u"?self:typeof window<"u"?window:{});var Tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},es={};var xb,Sb,ya,Ab,Pl,If,Cb,Tb,Ib;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tf=="object"&&Tf];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(u,h){if(h)e:{var p=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var k=u[_];if(!(k in p))break e;p=p[k]}u=u[u.length-1],_=p[u],h=h(_),h!=_&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function i(u,h){u instanceof String&&(u+="");var p=0,_=!1,k={next:function(){if(!_&&p<u.length){var M=p++;return{value:h(M,u[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(u){return u||function(){return i(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,_),u.apply(h,k)}}return function(){return u.apply(h,arguments)}}function m(u,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function g(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function b(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(_,k,M){for(var W=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)W[Ue-2]=arguments[Ue];return h.prototype[k].apply(_,W)}}function C(u){let h=u.length;if(0<h){let p=Array(h);for(let _=0;_<h;_++)p[_]=u[_];return p}return[]}function x(u,h){for(let p=1;p<arguments.length;p++){let _=arguments[p];if(c(_)){let k=u.length||0,M=_.length||0;u.length=k+M;for(let W=0;W<M;W++)u[k+W]=_[W]}else u.push(_)}}class N{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function U(u){return/^[\s\xa0]*$/.test(u)}function j(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var ae=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function le(u,h,p){for(let _ in u)h.call(p,u[_],_,u)}function T(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function w(u){let h={};for(let p in u)h[p]=u[p];return h}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,h){let p,_;for(let k=1;k<arguments.length;k++){_=arguments[k];for(p in _)u[p]=_[p];for(let M=0;M<S.length;M++)p=S[M],Object.prototype.hasOwnProperty.call(_,p)&&(u[p]=_[p])}}function D(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function P(u){a.setTimeout(()=>{throw u},0)}function A(){var u=pp;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Vr{constructor(){this.h=this.g=null}add(h,p){let _=fc.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var fc=new N(()=>new I1,u=>u.reset());class I1{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let mc,pc=!1,pp=new Vr,l0=()=>{let u=a.Promise.resolve(void 0);mc=()=>{u.then(R1)}};var R1=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(p){P(p)}var h=fc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}pc=!1};function us(){this.s=this.s,this.C=this.C}us.prototype.s=!1,us.prototype.ma=function(){this.s||(this.s=!0,this.N())},us.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function zt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var D1=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function gc(u,h){if(zt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(ae){e:{try{H(h.nodeName);var k=!0;break e}catch{}k=!1}k||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:k1[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&gc.aa.h.call(this)}}b(gc,zt);var k1={2:"touch",3:"pen",4:"mouse"};gc.prototype.h=function(){gc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var yc="closure_listenable_"+(1e6*Math.random()|0),P1=0;function N1(u,h,p,_,k){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=k,this.key=++P1,this.da=this.fa=!1}function ju(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qu(u){this.src=u,this.g={},this.h=0}qu.prototype.add=function(u,h,p,_,k){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var W=yp(u,h,_,k);return-1<W?(h=u[W],p||(h.fa=!1)):(h=new N1(h,this.src,M,!!_,k),h.fa=p,u.push(h)),h};function gp(u,h){var p=h.type;if(p in u.g){var _=u.g[p],k=Array.prototype.indexOf.call(_,h,void 0),M;(M=0<=k)&&Array.prototype.splice.call(_,k,1),M&&(ju(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function yp(u,h,p,_){for(var k=0;k<u.length;++k){var M=u[k];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==_)return k}return-1}var _p="closure_lm_"+(1e6*Math.random()|0),bp={};function u0(u,h,p,_,k){if(_&&_.once)return h0(u,h,p,_,k);if(Array.isArray(h)){for(var M=0;M<h.length;M++)u0(u,h[M],p,_,k);return null}return p=xp(p),u&&u[yc]?u.K(h,p,l(_)?!!_.capture:!!_,k):d0(u,h,p,!1,_,k)}function d0(u,h,p,_,k,M){if(!h)throw Error("Invalid event type");var W=l(k)?!!k.capture:!!k,Ue=vp(u);if(Ue||(u[_p]=Ue=new qu(u)),p=Ue.add(h,p,_,W,M),p.proxy)return p;if(_=O1(),p.proxy=_,_.src=u,_.listener=p,u.addEventListener)D1||(k=W),k===void 0&&(k=!1),u.addEventListener(h.toString(),_,k);else if(u.attachEvent)u.attachEvent(m0(h.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function O1(){function u(p){return h.call(u.src,u.listener,p)}let h=M1;return u}function h0(u,h,p,_,k){if(Array.isArray(h)){for(var M=0;M<h.length;M++)h0(u,h[M],p,_,k);return null}return p=xp(p),u&&u[yc]?u.L(h,p,l(_)?!!_.capture:!!_,k):d0(u,h,p,!0,_,k)}function f0(u,h,p,_,k){if(Array.isArray(h))for(var M=0;M<h.length;M++)f0(u,h[M],p,_,k);else _=l(_)?!!_.capture:!!_,p=xp(p),u&&u[yc]?(u=u.i,h=String(h).toString(),h in u.g&&(M=u.g[h],p=yp(M,p,_,k),-1<p&&(ju(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete u.g[h],u.h--)))):u&&(u=vp(u))&&(h=u.g[h.toString()],u=-1,h&&(u=yp(h,p,_,k)),(p=-1<u?h[u]:null)&&Ep(p))}function Ep(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[yc])gp(h.i,u);else{var p=u.type,_=u.proxy;h.removeEventListener?h.removeEventListener(p,_,u.capture):h.detachEvent?h.detachEvent(m0(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=vp(h))?(gp(p,u),p.h==0&&(p.src=null,h[_p]=null)):ju(u)}}}function m0(u){return u in bp?bp[u]:bp[u]="on"+u}function M1(u,h){if(u.da)u=!0;else{h=new gc(h,this);var p=u.listener,_=u.ha||u.src;u.fa&&Ep(u),u=p.call(_,h)}return u}function vp(u){return u=u[_p],u instanceof qu?u:null}var wp="__closure_events_fn_"+(1e9*Math.random()>>>0);function xp(u){return typeof u=="function"?u:(u[wp]||(u[wp]=function(h){return u.handleEvent(h)}),u[wp])}function Gt(){us.call(this),this.i=new qu(this),this.M=this,this.F=null}b(Gt,us),Gt.prototype[yc]=!0,Gt.prototype.removeEventListener=function(u,h,p,_){f0(this,u,h,p,_)};function rn(u,h){var p,_=u.F;if(_)for(p=[];_;_=_.F)p.push(_);if(u=u.M,_=h.type||h,typeof h=="string")h=new zt(h,u);else if(h instanceof zt)h.target=h.target||u;else{var k=h;h=new zt(_,u),I(h,k)}if(k=!0,p)for(var M=p.length-1;0<=M;M--){var W=h.g=p[M];k=$u(W,_,!0,h)&&k}if(W=h.g=u,k=$u(W,_,!0,h)&&k,k=$u(W,_,!1,h)&&k,p)for(M=0;M<p.length;M++)W=h.g=p[M],k=$u(W,_,!1,h)&&k}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],_=0;_<p.length;_++)ju(p[_]);delete u.g[h],u.h--}}this.F=null},Gt.prototype.K=function(u,h,p,_){return this.i.add(String(u),h,!1,p,_)},Gt.prototype.L=function(u,h,p,_){return this.i.add(String(u),h,!0,p,_)};function $u(u,h,p,_){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var k=!0,M=0;M<h.length;++M){var W=h[M];if(W&&!W.da&&W.capture==p){var Ue=W.listener,Bt=W.ha||W.src;W.fa&&gp(u.i,W),k=Ue.call(Bt,_)!==!1&&k}}return k&&!_.defaultPrevented}function p0(u,h,p){if(typeof u=="function")p&&(u=m(u,p));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function g0(u){u.g=p0(()=>{u.g=null,u.i&&(u.i=!1,g0(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class F1 extends us{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:g0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _c(u){us.call(this),this.h=u,this.g={}}b(_c,us);var y0=[];function _0(u){le(u.g,function(h,p){this.g.hasOwnProperty(p)&&Ep(h)},u),u.g={}}_c.prototype.N=function(){_c.aa.N.call(this),_0(this)},_c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sp=a.JSON.stringify,L1=a.JSON.parse,B1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ap(){}Ap.prototype.h=null;function b0(u){return u.h||(u.h=u.i())}function E0(){}var bc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cp(){zt.call(this,"d")}b(Cp,zt);function Tp(){zt.call(this,"c")}b(Tp,zt);var ui={},v0=null;function zu(){return v0=v0||new Gt}ui.La="serverreachability";function w0(u){zt.call(this,ui.La,u)}b(w0,zt);function Ec(u){let h=zu();rn(h,new w0(h))}ui.STAT_EVENT="statevent";function x0(u,h){zt.call(this,ui.STAT_EVENT,u),this.stat=h}b(x0,zt);function sn(u){let h=zu();rn(h,new x0(h,u))}ui.Ma="timingevent";function S0(u,h){zt.call(this,ui.Ma,u),this.size=h}b(S0,zt);function vc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function wc(){this.g=!0}wc.prototype.xa=function(){this.g=!1};function V1(u,h,p,_,k,M){u.info(function(){if(u.g)if(M)for(var W="",Ue=M.split("&"),Bt=0;Bt<Ue.length;Bt++){var Oe=Ue[Bt].split("=");if(1<Oe.length){var Kt=Oe[0];Oe=Oe[1];var Ht=Kt.split("_");W=2<=Ht.length&&Ht[1]=="type"?W+(Kt+"="+Oe+"&"):W+(Kt+"=redacted&")}}else W=null;else W=M;return"XMLHTTP REQ ("+_+") [attempt "+k+"]: "+h+`
`+p+`
`+W})}function U1(u,h,p,_,k,M,W){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+k+"]: "+h+`
`+p+`
`+M+" "+W})}function Eo(u,h,p,_){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+q1(u,p)+(_?" "+_:"")})}function j1(u,h){u.info(function(){return"TIMEOUT: "+h})}wc.prototype.info=function(){};function q1(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var _=p[u];if(!(2>_.length)){var k=_[1];if(Array.isArray(k)&&!(1>k.length)){var M=k[0];if(M!="noop"&&M!="stop"&&M!="close")for(var W=1;W<k.length;W++)k[W]=""}}}}return Sp(p)}catch{return h}}var Gu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},A0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ip;function Ku(){}b(Ku,Ap),Ku.prototype.g=function(){return new XMLHttpRequest},Ku.prototype.i=function(){return{}},Ip=new Ku;function ds(u,h,p,_){this.j=u,this.i=h,this.l=p,this.R=_||1,this.U=new _c(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new C0}function C0(){this.i=null,this.g="",this.h=!1}var T0={},Rp={};function Dp(u,h,p){u.L=1,u.v=Yu(Ur(h)),u.m=p,u.P=!0,I0(u,null)}function I0(u,h){u.F=Date.now(),Hu(u),u.A=Ur(u.v);var p=u.A,_=u.R;Array.isArray(_)||(_=[String(_)]),q0(p.i,"t",_),u.C=0,p=u.j.J,u.h=new C0,u.g=ox(u.j,p?h:null,!u.m),0<u.O&&(u.M=new F1(m(u.Y,u,u.g),u.O)),h=u.U,p=u.g,_=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(y0[0]=k.toString()),k=y0);for(var M=0;M<k.length;M++){var W=u0(p,k[M],_||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Ec(),V1(u.i,u.u,u.A,u.l,u.R,u.m)}ds.prototype.ca=function(u){u=u.target;let h=this.M;h&&jr(u)==3?h.j():this.Y(u)},ds.prototype.Y=function(u){try{if(u==this.g)e:{let Ht=jr(this.g);var h=this.g.Ba();let xo=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Q0(this.g)))){this.J||Ht!=4||h==7||(h==8||0>=xo?Ec(3):Ec(2)),kp(this);var p=this.g.Z();this.X=p;t:if(R0(this)){var _=Q0(this.g);u="";var k=_.length,M=jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),xc(this);var W="";break t}this.h.i=new a.TextDecoder}for(h=0;h<k;h++)this.h.h=!0,u+=this.h.i.decode(_[h],{stream:!(M&&h==k-1)});_.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,U1(this.i,this.u,this.A,this.l,this.R,Ht,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Bt=this.g;if((Ue=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Ue)){var Oe=Ue;break t}}Oe=null}if(p=Oe)Eo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pp(this,p);else{this.o=!1,this.s=3,sn(12),di(this),xc(this);break e}}if(this.P){p=!0;let Yn;for(;!this.J&&this.C<W.length;)if(Yn=$1(this,W),Yn==Rp){Ht==4&&(this.s=4,sn(14),p=!1),Eo(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==T0){this.s=4,sn(15),Eo(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else Eo(this.i,this.l,Yn,null),Pp(this,Yn);if(R0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||W.length!=0||this.h.h||(this.s=1,sn(16),p=!1),this.o=this.o&&p,!p)Eo(this.i,this.l,W,"[Invalid Chunked Response]"),di(this),xc(this);else if(0<W.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Bp(Kt),Kt.M=!0,sn(11))}}else Eo(this.i,this.l,W,null),Pp(this,W);Ht==4&&di(this),this.o&&!this.J&&(Ht==4?nx(this.j,this):(this.o=!1,Hu(this)))}else oF(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),di(this),xc(this)}}}catch{}finally{}};function R0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function $1(u,h){var p=u.C,_=h.indexOf(`
`,p);return _==-1?Rp:(p=Number(h.substring(p,_)),isNaN(p)?T0:(_+=1,_+p>h.length?Rp:(h=h.slice(_,_+p),u.C=_+p,h)))}ds.prototype.cancel=function(){this.J=!0,di(this)};function Hu(u){u.S=Date.now()+u.I,D0(u,u.I)}function D0(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vc(m(u.ba,u),h)}function kp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ds.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(j1(this.i,this.A),this.L!=2&&(Ec(),sn(17)),di(this),this.s=2,xc(this)):D0(this,this.S-u)};function xc(u){u.j.G==0||u.J||nx(u.j,u)}function di(u){kp(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,_0(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Pp(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Np(p.h,u))){if(!u.K&&Np(p.h,u)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var k=_;if(k[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)td(p),Ju(p);else break e;Lp(p),sn(18)}}else p.za=k[1],0<p.za-p.T&&37500>k[2]&&p.F&&p.v==0&&!p.C&&(p.C=vc(m(p.Za,p),6e3));if(1>=N0(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else fi(p,11)}else if((u.K||p.g==u)&&td(p),!U(h))for(k=p.Da.g.parse(h),h=0;h<k.length;h++){let Oe=k[h];if(p.T=Oe[0],Oe=Oe[1],p.G==2)if(Oe[0]=="c"){p.K=Oe[1],p.ia=Oe[2];let Kt=Oe[3];Kt!=null&&(p.la=Kt,p.j.info("VER="+p.la));let Ht=Oe[4];Ht!=null&&(p.Aa=Ht,p.j.info("SVER="+p.Aa));let xo=Oe[5];xo!=null&&typeof xo=="number"&&0<xo&&(_=1.5*xo,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;let Yn=u.g;if(Yn){let rd=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rd){var M=_.h;M.g||rd.indexOf("spdy")==-1&&rd.indexOf("quic")==-1&&rd.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Op(M,M.h),M.h=null))}if(_.D){let Vp=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vp&&(_.ya=Vp,Ke(_.I,_.D,Vp))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var W=u;if(_.qa=ix(_,_.J?_.ia:null,_.W),W.K){O0(_.h,W);var Ue=W,Bt=_.L;Bt&&(Ue.I=Bt),Ue.B&&(kp(Ue),Hu(Ue)),_.g=W}else ex(_);0<p.i.length&&ed(p)}else Oe[0]!="stop"&&Oe[0]!="close"||fi(p,7);else p.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?fi(p,7):Fp(p):Oe[0]!="noop"&&p.l&&p.l.ta(Oe),p.v=0)}}Ec(4)}catch{}}var z1=class{constructor(u,h){this.g=u,this.map=h}};function k0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function P0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function N0(u){return u.h?1:u.g?u.g.size:0}function Np(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Op(u,h){u.g?u.g.add(h):u.h=h}function O0(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}k0.prototype.cancel=function(){if(this.i=M0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function M0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return C(u.i)}function G1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,_=0;_<p;_++)h.push(u[_]);return h}h=[],p=0;for(_ in u)h[p++]=u[_];return h}function K1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let _ in u)h[p++]=_;return h}}}function F0(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=K1(u),_=G1(u),k=_.length,M=0;M<k;M++)h.call(void 0,_[M],p&&p[M],u)}var L0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function H1(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var _=u[p].indexOf("="),k=null;if(0<=_){var M=u[p].substring(0,_);k=u[p].substring(_+1)}else M=u[p];h(M,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function hi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hi){this.h=u.h,Wu(this,u.j),this.o=u.o,this.g=u.g,Qu(this,u.s),this.l=u.l;var h=u.i,p=new Cc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),B0(this,p),this.m=u.m}else u&&(h=String(u).match(L0))?(this.h=!1,Wu(this,h[1]||"",!0),this.o=Sc(h[2]||""),this.g=Sc(h[3]||"",!0),Qu(this,h[4]),this.l=Sc(h[5]||"",!0),B0(this,h[6]||"",!0),this.m=Sc(h[7]||"")):(this.h=!1,this.i=new Cc(null,this.h))}hi.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Ac(h,V0,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Ac(h,V0,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Ac(p,p.charAt(0)=="/"?Y1:Q1,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Ac(p,Z1)),u.join("")};function Ur(u){return new hi(u)}function Wu(u,h,p){u.j=p?Sc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Qu(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function B0(u,h,p){h instanceof Cc?(u.i=h,J1(u.i,u.h)):(p||(h=Ac(h,X1)),u.i=new Cc(h,u.h))}function Ke(u,h,p){u.i.set(h,p)}function Yu(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Sc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ac(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,W1),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function W1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var V0=/[#\/\?@]/g,Q1=/[#\?:]/g,Y1=/[#\?]/g,X1=/[#\?@]/g,Z1=/#/g;function Cc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function hs(u){u.g||(u.g=new Map,u.h=0,u.i&&H1(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Cc.prototype,t.add=function(u,h){hs(this),this.i=null,u=vo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function U0(u,h){hs(u),h=vo(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function j0(u,h){return hs(u),h=vo(u,h),u.g.has(h)}t.forEach=function(u,h){hs(this),this.g.forEach(function(p,_){p.forEach(function(k){u.call(h,k,_,this)},this)},this)},t.na=function(){hs(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){let k=u[_];for(let M=0;M<k.length;M++)p.push(h[_])}return p},t.V=function(u){hs(this);let h=[];if(typeof u=="string")j0(this,u)&&(h=h.concat(this.g.get(vo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return hs(this),this.i=null,u=vo(this,u),j0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function q0(u,h,p){U0(u,h),0<p.length&&(u.i=null,u.g.set(vo(u,h),C(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];let M=encodeURIComponent(String(_)),W=this.V(_);for(_=0;_<W.length;_++){var k=M;W[_]!==""&&(k+="="+encodeURIComponent(String(W[_]))),u.push(k)}}return this.i=u.join("&")};function vo(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function J1(u,h){h&&!u.j&&(hs(u),u.i=null,u.g.forEach(function(p,_){var k=_.toLowerCase();_!=k&&(U0(this,_),q0(this,k,p))},u)),u.j=h}function eF(u,h){let p=new wc;if(a.Image){let _=new Image;_.onload=g(fs,p,"TestLoadImage: loaded",!0,h,_),_.onerror=g(fs,p,"TestLoadImage: error",!1,h,_),_.onabort=g(fs,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=g(fs,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else h(!1)}function tF(u,h){let p=new wc,_=new AbortController,k=setTimeout(()=>{_.abort(),fs(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:_.signal}).then(M=>{clearTimeout(k),M.ok?fs(p,"TestPingServer: ok",!0,h):fs(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(k),fs(p,"TestPingServer: error",!1,h)})}function fs(u,h,p,_,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),_(p)}catch{}}function nF(){this.g=new B1}function rF(u,h,p){let _=p||"";try{F0(u,function(k,M){let W=k;l(k)&&(W=Sp(k)),h.push(_+M+"="+encodeURIComponent(W))})}catch(k){throw h.push(_+"type="+encodeURIComponent("_badmap")),k}}function Tc(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Tc,Ap),Tc.prototype.g=function(){return new Xu(this.l,this.j)},Tc.prototype.i=function(u){return function(){return u}}({});function Xu(u,h){Gt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Xu,Gt),t=Xu.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Rc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ic(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Rc(this)),this.g&&(this.readyState=3,Rc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Ic(this):Rc(this),this.readyState==3&&$0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ic(this))},t.Qa=function(u){this.g&&(this.response=u,Ic(this))},t.ga=function(){this.g&&Ic(this)};function Ic(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Rc(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Rc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function z0(u){let h="";return le(u,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Mp(u,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=z0(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ke(u,h,p))}function tt(u){Gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(tt,Gt);var sF=/^https?$/i,iF=["POST","PUT"];t=tt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ip.g(),this.v=this.o?b0(this.o):b0(Ip),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(M){G0(this,M);return}if(u=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var k in _)p.set(k,_[k]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let M of _.keys())p.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),k=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iF,h,void 0))||_||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,W]of p)this.g.setRequestHeader(M,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{W0(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){G0(this,M)}};function G0(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,K0(u),Zu(u)}function K0(u){u.A||(u.A=!0,rn(u,"complete"),rn(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,rn(this,"complete"),rn(this,"abort"),Zu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zu(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?H0(this):this.bb())},t.bb=function(){H0(this)};function H0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||jr(u)!=4||u.Z()!=2)){if(u.u&&jr(u)==4)p0(u.Ea,0,u);else if(rn(u,"readystatechange"),jr(u)==4){u.h=!1;try{let W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=W===0){var k=String(u.D).match(L0)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),_=!sF.test(k?k.toLowerCase():"")}p=_}if(p)rn(u,"complete"),rn(u,"success");else{u.m=6;try{var M=2<jr(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",K0(u)}}finally{Zu(u)}}}}function Zu(u,h){if(u.g){W0(u);let p=u.g,_=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||rn(u,"ready");try{p.onreadystatechange=_}catch{}}}function W0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function jr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<jr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),L1(h)}};function Q0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oF(u){let h={};u=(u.g&&2<=jr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(U(u[_]))continue;var p=D(u[_]);let k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[k]||[];h[k]=M,M.push(p)}T(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function Y0(u){this.Aa=0,this.i=[],this.j=new wc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dc("baseRetryDelayMs",5e3,u),this.cb=Dc("retryDelaySeedMs",1e4,u),this.Wa=Dc("forwardChannelMaxRetries",2,u),this.wa=Dc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new k0(u&&u.concurrentRequestLimit),this.Da=new nF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Y0.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,_){sn(0),this.W=u,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=ix(this,null,this.W),ed(this)};function Fp(u){if(X0(u),u.G==3){var h=u.U++,p=Ur(u.I);if(Ke(p,"SID",u.K),Ke(p,"RID",h),Ke(p,"TYPE","terminate"),kc(u,p),h=new ds(u,u.j,h),h.L=2,h.v=Yu(Ur(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=ox(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Hu(h)}sx(u)}function Ju(u){u.g&&(Bp(u),u.g.cancel(),u.g=null)}function X0(u){Ju(u),u.u&&(a.clearTimeout(u.u),u.u=null),td(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ed(u){if(!P0(u.h)&&!u.s){u.s=!0;var h=u.Ga;mc||l0(),pc||(mc(),pc=!0),pp.add(h,u),u.B=0}}function aF(u,h){return N0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vc(m(u.Ga,u,h),rx(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let k=new ds(this,this.j,u),M=this.o;if(this.S&&(M?(M=w(M),I(M,this.S)):M=this.S),this.m!==null||this.O||(k.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=J0(this,k,h),p=Ur(this.I),Ke(p,"RID",u),Ke(p,"CVER",22),this.D&&Ke(p,"X-HTTP-Session-Id",this.D),kc(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(z0(M)))+"&"+h:this.m&&Mp(p,this.m,M)),Op(this.h,k),this.Ua&&Ke(p,"TYPE","init"),this.P?(Ke(p,"$req",h),Ke(p,"SID","null"),k.T=!0,Dp(k,p,null)):Dp(k,p,h),this.G=2}}else this.G==3&&(u?Z0(this,u):this.i.length==0||P0(this.h)||Z0(this))};function Z0(u,h){var p;h?p=h.l:p=u.U++;let _=Ur(u.I);Ke(_,"SID",u.K),Ke(_,"RID",p),Ke(_,"AID",u.T),kc(u,_),u.m&&u.o&&Mp(_,u.m,u.o),p=new ds(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=J0(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Op(u.h,p),Dp(p,_,h)}function kc(u,h){u.H&&le(u.H,function(p,_){Ke(h,_,p)}),u.l&&F0({},function(p,_){Ke(h,_,p)})}function J0(u,h,p){p=Math.min(u.i.length,p);var _=u.l?m(u.l.Na,u.l,u):null;e:{var k=u.i;let M=-1;for(;;){let W=["count="+p];M==-1?0<p?(M=k[0].g,W.push("ofs="+M)):M=0:W.push("ofs="+M);let Ue=!0;for(let Bt=0;Bt<p;Bt++){let Oe=k[Bt].g,Kt=k[Bt].map;if(Oe-=M,0>Oe)M=Math.max(0,k[Bt].g-100),Ue=!1;else try{rF(Kt,W,"req"+Oe+"_")}catch{_&&_(Kt)}}if(Ue){_=W.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,_}function ex(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;mc||l0(),pc||(mc(),pc=!0),pp.add(h,u),u.v=0}}function Lp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vc(m(u.Fa,u),rx(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,tx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vc(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),Ju(this),tx(this))};function Bp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function tx(u){u.g=new ds(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Ur(u.qa);Ke(h,"RID","rpc"),Ke(h,"SID",u.K),Ke(h,"AID",u.T),Ke(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(h,"TO",u.ja),Ke(h,"TYPE","xmlhttp"),kc(u,h),u.m&&u.o&&Mp(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Yu(Ur(h)),p.m=null,p.P=!0,I0(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Ju(this),Lp(this),sn(19))};function td(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function nx(u,h){var p=null;if(u.g==h){td(u),Bp(u),u.g=null;var _=2}else if(Np(u.h,h))p=h.D,O0(u.h,h),_=1;else return;if(u.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var k=u.B;_=zu(),rn(_,new S0(_,p)),ed(u)}else ex(u);else if(k=h.s,k==3||k==0&&0<h.X||!(_==1&&aF(u,h)||_==2&&Lp(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),k){case 1:fi(u,5);break;case 4:fi(u,10);break;case 3:fi(u,6);break;default:fi(u,2)}}}function rx(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function fi(u,h){if(u.j.info("Error code "+h),h==2){var p=m(u.fb,u),_=u.Xa;let k=!_;_=new hi(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wu(_,"https"),Yu(_),k?eF(_.toString(),p):tF(_.toString(),p)}else sn(2);u.G=0,u.l&&u.l.sa(h),sx(u),X0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function sx(u){if(u.G=0,u.ka=[],u.l){let h=M0(u.h);(h.length!=0||u.i.length!=0)&&(x(u.ka,h),x(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function ix(u,h,p){var _=p instanceof hi?Ur(p):new hi(p);if(_.g!="")h&&(_.g=h+"."+_.g),Qu(_,_.s);else{var k=a.location;_=k.protocol,h=h?h+"."+k.hostname:k.hostname,k=+k.port;var M=new hi(null);_&&Wu(M,_),h&&(M.g=h),k&&Qu(M,k),p&&(M.l=p),_=M}return p=u.D,h=u.ya,p&&h&&Ke(_,p,h),Ke(_,"VER",u.la),kc(u,_),_}function ox(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new tt(new Tc({eb:p})):new tt(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ax(){}t=ax.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nd(){}nd.prototype.g=function(u,h){return new xn(u,h)};function xn(u,h){Gt.call(this),this.g=new Y0(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!U(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!U(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new wo(this)}b(xn,Gt),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Fp(this.g)},xn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Sp(u),u=p);h.i.push(new z1(h.Ya++,u)),h.G==3&&ed(h)},xn.prototype.N=function(){this.g.l=null,delete this.j,Fp(this.g),delete this.g,xn.aa.N.call(this)};function cx(u){Cp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}b(cx,Cp);function lx(){Tp.call(this),this.status=1}b(lx,Tp);function wo(u){this.g=u}b(wo,ax),wo.prototype.ua=function(){rn(this.g,"a")},wo.prototype.ta=function(u){rn(this.g,new cx(u))},wo.prototype.sa=function(u){rn(this.g,new lx)},wo.prototype.ra=function(){rn(this.g,"b")},nd.prototype.createWebChannel=nd.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,Ib=es.createWebChannelTransport=function(){return new nd},Tb=es.getStatEventTarget=function(){return zu()},Cb=es.Event=ui,If=es.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gu.NO_ERROR=0,Gu.TIMEOUT=8,Gu.HTTP_ERROR=6,Pl=es.ErrorCode=Gu,A0.COMPLETE="complete",Ab=es.EventType=A0,E0.EventType=bc,bc.OPEN="a",bc.CLOSE="b",bc.ERROR="c",bc.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,ya=es.WebChannel=E0,Sb=es.FetchXmlHttpFactory=Tc,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,xb=es.XhrIo=tt}).apply(typeof Tf<"u"?Tf:typeof self<"u"?self:typeof window<"u"?window:{});var aP="@firebase/firestore";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var Wa="10.12.1";var Ks=new Sd("@firebase/firestore");function wa(){return Ks.logLevel}function aN(t){Ks.setLogLevel(t)}function $(t,...e){if(Ks.logLevel<=_r.DEBUG){let n=e.map(kv);Ks.debug(`Firestore (${Wa}): ${t}`,...n)}}function lt(t,...e){if(Ks.logLevel<=_r.ERROR){let n=e.map(kv);Ks.error(`Firestore (${Wa}): ${t}`,...n)}}function Kn(t,...e){if(Ks.logLevel<=_r.WARN){let n=e.map(kv);Ks.warn(`Firestore (${Wa}): ${t}`,...n)}}function kv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function re(t="Unexpected state"){let e=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: `+t;throw lt(e),new Error(e)}function ce(t,e){t||re()}function cN(t,e){t||re()}function X(t,e){return t}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=class extends oS{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Et=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Vf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Nb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}},Ob=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Mb=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),i=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Et,e.enqueueRetryable(()=>s(this.currentUser))};let o=()=>{let c=i;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield s(this.currentUser)}))},a=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Et)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new Vf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new bt(e)}},Fb=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Lb=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Fb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Bb=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Vb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=i=>{i.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);let o=i.token!==this.R;return this.R=i.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};let s=i=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){let i=this.A.getImmediate({optional:!0});i?s(i):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new Bb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function v4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Uf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let s=v4(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function ka(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function lN(t){return t+"\0"}var et=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ue=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new et(0,0))}static max(){return new t(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let s=0;s<r;s++){let i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Pe=class t extends jf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new t(n)}static emptyPath(){return new t([])}},w4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=class t extends jf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return w4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",s=0,i=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;s<e.length;){let a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Q=class t{constructor(e){this.path=e}static fromPath(e){return new t(Pe.fromString(e))}static fromName(e){return new t(Pe.fromString(e).popFirst(5))}static empty(){return new t(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Pe(e.slice()))}};var Pa=class{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}};function Ub(t){return t.fields.find(e=>e.kind===2)}function Gi(t){return t.fields.filter(e=>e.kind!==2)}Pa.UNKNOWN_ID=-1;var Ia=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var zl=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Hn.min())}};function uN(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new Hn(s,Q.empty(),e)}function dN(t){return new Hn(t.readTime,t.key,-1)}var Hn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ue.min(),Q.empty(),-1)}static max(){return new t(ue.max(),Q.empty(),-1)}};function Pv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var hN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ni(t){return y(this,null,function*(){if(t.code!==F.FAILED_PRECONDITION||t.message!==hN)throw t;$("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(s=>s?t.resolve(s):r());return n}static forEach(e,n){let r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new t((r,s)=>{let i=e.length,o=new Array(i),a=0;for(let c=0;c<i;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new t((r,s)=>{let i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}};var $f=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Et,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Xi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let s=Nv(r.target.error);this.V.reject(new Xi(e,s))}}static open(e,n,r,s){try{return new t(n,e.transaction(s,r))}catch(i){throw new Xi(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new qb(n)}},Hs=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(zc())===12.2&&lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $("SimpleDb","Removing database:",e),Ki(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!xd())return!1;if(t.C())return!0;let e=zc(),n=t.S(e),r=0<n&&n<10,s=fN(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return y(this,null,function*(){return this.db||($("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{let o=i.target.result;n(o)},s.onblocked=()=>{r(new Xi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{let o=i.target.error;o.name==="VersionError"?r(new q(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Xi(e,o))},s.onupgradeneeded=i=>{$("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);let o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{$("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,s){return y(this,null,function*(){let i=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=$f.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),O.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if($("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function fN(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var jb=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ki(this.B.delete())}},Xi=class extends q{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ri(t){return t.name==="IndexedDbTransactionError"}var qb=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):($("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ki(r)}add(e){return $("SimpleDb","ADD",this.store.name,e,e),Ki(this.store.add(e))}get(e){return Ki(this.store.get(e)).next(n=>(n===void 0&&(n=null),$("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return $("SimpleDb","DELETE",this.store.name,e),Ki(this.store.delete(e))}count(){return $("SimpleDb","COUNT",this.store.name),Ki(this.store.count())}U(e,n){let r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){let i=s.getAll(r.range);return new O((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{let i=this.cursor(r),o=[];return this.W(i,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new O((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){$("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let s=this.cursor(r);return this.W(s,n)}Y(e){let n=this.cursor({});return new O((r,s)=>{n.onerror=i=>{let o=Nv(i.target.error);s(o)},n.onsuccess=i=>{let o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){let r=[];return new O((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void s();let c=new jb(a),l=n(a.primaryKey,a.value,c);if(l instanceof O){let d=l.catch(f=>(c.done(),O.reject(f)));r.push(d)}c.isDone?s():c.K===null?a.continue():a.continue(c.K)}}).next(()=>O.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ki(t){return new O((e,n)=>{t.onsuccess=r=>{let s=r.target.result;e(s)},t.onerror=r=>{let s=Nv(r.target.error);n(s)}})}var cP=!1;function Nv(t){let e=Hs.S(zc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cP||(cP=!0,setTimeout(()=>{throw r},0)),r}}return t}var $b=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){$("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{$("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ri(n)?$("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ni(n)}yield this.X(6e4)}))}},zb=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,s=n,i=!0;return O.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{let o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>($("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{let o=dN(i);Pv(o,r)>0&&(r=o)}),new Hn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Nn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=s=>this.ie(s),this.se=s=>r.writeSequenceNumber(s))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function hu(t){return t==null}function Gl(t){return t===0&&1/t==-1/0}function mN(t){return typeof t=="number"&&Number.isInteger(t)&&!Gl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function hn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lP(e)),e=x4(t.get(n),e);return lP(e)}function x4(t,e){let n=e,r=t.length;for(let s=0;s<r;s++){let i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function lP(t){return t+""}function Cr(t){let e=t.length;if(ce(e>=2),e===2)return ce(t.charAt(0)===""&&t.charAt(1)===""),Pe.emptyPath();let n=e-2,r=[],s="";for(let i=0;i<e;){let o=t.indexOf("",i);switch((o<0||o>n)&&re(),t.charAt(o+1)){case"":let a=t.substring(i,o),c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:re()}i=o+2}return new Pe(r)}var uP=["userId","batchId"];function Nf(t,e){return[t,hn(e)]}function pN(t,e,n){return[t,hn(e),n]}var S4={},A4=["prefixPath","collectionGroup","readTime","documentId"],C4=["prefixPath","collectionGroup","documentId"],T4=["collectionGroup","readTime","prefixPath","documentId"],I4=["canonicalId","targetId"],R4=["targetId","path"],D4=["path","targetId"],k4=["collectionId","parent"],P4=["indexId","uid"],N4=["uid","sequenceNumber"],O4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],M4=["indexId","uid","orderedDocumentKey"],F4=["userId","collectionPath","documentId"],L4=["userId","collectionPath","largestBatchId"],B4=["userId","collectionGroup","largestBatchId"],gN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],V4=[...gN,"documentOverlays"],yN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_N=yN,bN=[..._N,"indexConfiguration","indexState","indexEntries"],U4=bN;var Kl=class extends qf{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Ft(t,e){let n=X(t);return Hs.F(n._e,e)}function dP(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Qe=class t{constructor(e,n){this.comparator=e,this.root=n||Ir.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ir.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ir.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ta(this.root,e,this.comparator,!0)}},Ta=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ir=class t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??t.RED,this.left=s??t.EMPTY,this.right=i??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this,i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();let e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}};Ir.EMPTY=null,Ir.RED=!0,Ir.BLACK=!1;Ir.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ir(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var je=class t{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zf(this.data.getIterator())}getIteratorFrom(e){return new zf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},zf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function _a(t){return t.hasNext()?t.getNext():void 0}var On=class t{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new t([])}unionWith(e){let n=new je(ut.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ka(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Gf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function vN(){return typeof atob<"u"}var Mt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Gf("Invalid base64 string: "+i):i}}(e);return new t(n)}static fromUint8Array(e){let n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Mt.EMPTY_BYTE_STRING=new Mt("");var j4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if(ce(!!t),typeof t=="string"){let e=0,n=j4.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ws(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}function Mm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ov(t){let e=t.mapValue.fields.__previous_value__;return Mm(e)?Ov(e):e}function Hl(t){let e=rs(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}var Gb=class{constructor(e,n,r,s,i,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Qs=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var zs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Of={nullValue:"NULL_VALUE"};function Zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mm(t)?4:wN(t)?9007199254740991:10:re()}function kr(t,e){if(t===e)return!0;let n=Zi(t);if(n!==Zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hl(t).isEqual(Hl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;let o=rs(s.timestampValue),a=rs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ws(s.bytesValue).isEqual(Ws(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return rt(s.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return rt(s.integerValue)===rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){let o=rt(s.doubleValue),a=rt(i.doubleValue);return o===a?Gl(o)===Gl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ka(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:return function(s,i){let o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(dP(o)!==dP(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!kr(o[c],a[c])))return!1;return!0}(t,e);default:return re()}}function Wl(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function Ys(t,e){if(t===e)return 0;let n=Zi(t),r=Zi(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){let a=rt(i.integerValue||i.doubleValue),c=rt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return hP(t.timestampValue,e.timestampValue);case 4:return hP(Hl(t),Hl(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(i,o){let a=Ws(i),c=Ws(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){let a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=pe(a[l],c[l]);if(d!==0)return d}return pe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){let a=pe(rt(i.latitude),rt(o.latitude));return a!==0?a:pe(rt(i.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){let a=i.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=Ys(a[l],c[l]);if(d)return d}return pe(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===zs.mapValue&&o===zs.mapValue)return 0;if(i===zs.mapValue)return 1;if(o===zs.mapValue)return-1;let a=i.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=pe(c[f],d[f]);if(m!==0)return m;let g=Ys(a[c[f]],l[d[f]]);if(g!==0)return g}return pe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw re()}}function hP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=rs(t),r=rs(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function Na(t){return Kb(t)}function Kb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(let i of n.values||[])s?s=!1:r+=",",r+=Kb(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),s="{",i=!0;for(let o of r)i?i=!1:s+=",",s+=`${o}:${Kb(n.fields[o])}`;return s+"}"}(t.mapValue):re()}function Ji(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hb(t){return!!t&&"integerValue"in t}function Ql(t){return!!t&&"arrayValue"in t}function fP(t){return!!t&&"nullValue"in t}function mP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mf(t){return!!t&&"mapValue"in t}function Vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return lo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function q4(t){return"nullValue"in t?Of:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ji(Qs.empty(),Q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:re()}function $4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ji(Qs.empty(),Q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?zs:re()}function pP(t,e){let n=Ys(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function gP(t,e){let n=Ys(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var nn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(n)}setAll(e){let n=ut.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Vl(o):s.push(a.lastSegment())});let i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){let n=this.field(e.popLast());Mf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Mf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){lo(n,(s,i)=>e[s]=i);for(let s of r)delete e[s]}clone(){return new t(Vl(this.value))}};function xN(t){let e=[];return lo(t.fields,(n,r)=>{let s=new ut([n]);if(Mf(r)){let i=xN(r.mapValue).fields;if(i.length===0)e.push(s);else for(let o of i)e.push(s.child(o))}else e.push(s)}),new On(e)}var vt=class t{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ue.min(),ue.min(),ue.min(),nn.empty(),0)}static newFoundDocument(e,n,r,s){return new t(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new t(e,2,n,ue.min(),ue.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ue.min(),ue.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Pr=class{constructor(e,n){this.position=e,this.inclusive=n}};function yP(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){let i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Ys(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _P(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}var eo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function z4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Kf=class{},Re=class t extends Kf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Yb(e,n,r):n==="array-contains"?new Jb(e,r):n==="in"?new Hf(e,r):n==="not-in"?new eE(e,r):n==="array-contains-any"?new tE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Xb(e,r):new Zb(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ys(n,this.value)):n!==null&&Zi(this.value)===Zi(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Be=class t extends Kf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Oa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Oa(t){return t.op==="and"}function Wb(t){return t.op==="or"}function Mv(t){return SN(t)&&Oa(t)}function SN(t){for(let e of t.filters)if(e instanceof Be)return!1;return!0}function Qb(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+Na(t.value);if(Mv(t))return t.filters.map(e=>Qb(e)).join(",");{let e=t.filters.map(n=>Qb(n)).join(",");return`${t.op}(${e})`}}function AN(t,e){return t instanceof Re?function(r,s){return s instanceof Re&&r.op===s.op&&r.field.isEqual(s.field)&&kr(r.value,s.value)}(t,e):t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&AN(o,s.filters[a]),!0):!1}(t,e):void re()}function CN(t,e){let n=t.filters.concat(e);return Be.create(n,t.op)}function TN(t){return t instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${Na(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(TN).join(" ,")+"}"}(t):"Filter"}var Yb=class extends Re{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){let n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}},Xb=class extends Re{constructor(e,n){super(e,"in",n),this.keys=IN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Zb=class extends Re{constructor(e,n){super(e,"not-in",n),this.keys=IN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function IN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}var Jb=class extends Re{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Ql(n)&&Wl(n.arrayValue,this.value)}},Hf=class extends Re{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Wl(this.value.arrayValue,n)}},eE=class extends Re{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Wl(this.value.arrayValue,n)}},tE=class extends Re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Ql(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wl(this.value.arrayValue,r))}};var nE=class{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}};function rE(t,e=null,n=[],r=[],s=null,i=null,o=null){return new nE(t,e,n,r,s,i,o)}function to(t){let e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),hu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Na(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Na(r)).join(",")),e.ue=n}return e.ue}function fu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!z4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!AN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_P(t.startAt,e.startAt)&&_P(t.endAt,e.endAt)}function Wf(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qf(t,e){return t.filters.filter(n=>n instanceof Re&&n.field.isEqual(e))}function bP(t,e,n){let r=Of,s=!0;for(let i of Qf(t,e)){let o=Of,a=!0;switch(i.op){case"<":case"<=":o=q4(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Of}pP({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){let o=n.position[i];pP({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function EP(t,e,n){let r=zs,s=!0;for(let i of Qf(t,e)){let o=zs,a=!0;switch(i.op){case">=":case">":o=$4(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=zs}gP({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){let o=n.position[i];gP({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}var rr=class{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function RN(t,e,n,r,s,i,o,a){return new rr(t,e,n,r,s,i,o,a)}function Qa(t){return new rr(t)}function vP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Fv(t){return t.collectionGroup!==null}function Ra(t){let e=X(t);if(e.ce===null){e.ce=[];let n=new Set;for(let i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new je(ut.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new eo(i,r))}),n.has(ut.keyField().canonicalString())||e.ce.push(new eo(ut.keyField(),r))}return e.ce}function fn(t){let e=X(t);return e.le||(e.le=G4(e,Ra(t))),e.le}function G4(t,e){if(t.limitType==="F")return rE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{let i=s.dir==="desc"?"asc":"desc";return new eo(s.field,i)});let n=t.endAt?new Pr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pr(t.startAt.position,t.startAt.inclusive):null;return rE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sE(t,e){let n=t.filters.concat([e]);return new rr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yf(t,e,n){return new rr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mu(t,e){return fu(fn(t),fn(e))&&t.limitType===e.limitType}function DN(t){return`${to(fn(t))}|lt:${t.limitType}`}function xa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>TN(s)).join(", ")}]`),hu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Na(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Na(s)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function pu(t,e){return e.isFoundDocument()&&function(r,s){let i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(let i of Ra(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(let i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){let l=yP(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ra(r),s)||r.endAt&&!function(o,a,c){let l=yP(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ra(r),s))}(t,e)}function kN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PN(t){return(e,n)=>{let r=!1;for(let s of Ra(t)){let i=K4(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function K4(t,e,n){let r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,a){let c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?Ys(c,l):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}var Nr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,r)=>{for(let[s,i]of r)e(s,i)})}isEmpty(){return EN(this.inner)}size(){return this.innerSize}};var H4=new Qe(Q.comparator);function wn(){return H4}var NN=new Qe(Q.comparator);function Ll(...t){let e=NN;for(let n of t)e=e.insert(n.key,n);return e}function ON(t){let e=NN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Tr(){return Ul()}function MN(){return Ul()}function Ul(){return new Nr(t=>t.toString(),(t,e)=>t.isEqual(e))}var W4=new Qe(Q.comparator),Q4=new je(Q.comparator);function _e(...t){let e=Q4;for(let n of t)e=e.add(n);return e}var Y4=new je(pe);function Lv(){return Y4}function FN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gl(e)?"-0":e}}function LN(t){return{integerValue:""+t}}function BN(t,e){return mN(e)?LN(e):FN(t,e)}var Ma=class{constructor(){this._=void 0}};function X4(t,e,n){return t instanceof Xs?function(s,i){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Mm(i)&&(i=Ov(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ss?UN(t,e):t instanceof is?jN(t,e):function(s,i){let o=VN(s,i),a=wP(o)+wP(s.Pe);return Hb(o)&&Hb(s.Pe)?LN(a):FN(s.serializer,a)}(t,e)}function Z4(t,e,n){return t instanceof ss?UN(t,e):t instanceof is?jN(t,e):n}function VN(t,e){return t instanceof Zs?function(r){return Hb(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}var Xs=class extends Ma{},ss=class extends Ma{constructor(e){super(),this.elements=e}};function UN(t,e){let n=qN(e);for(let r of t.elements)n.some(s=>kr(s,r))||n.push(r);return{arrayValue:{values:n}}}var is=class extends Ma{constructor(e){super(),this.elements=e}};function jN(t,e){let n=qN(e);for(let r of t.elements)n=n.filter(s=>!kr(s,r));return{arrayValue:{values:n}}}var Zs=class extends Ma{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function wP(t){return rt(t.integerValue||t.doubleValue)}function qN(t){return Ql(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var no=class{constructor(e,n){this.field=e,this.transform=n}};function J4(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ss&&s instanceof ss||r instanceof is&&s instanceof is?ka(r.elements,s.elements,kr):r instanceof Zs&&s instanceof Zs?kr(r.Pe,s.Pe):r instanceof Xs&&s instanceof Xs}(t.transform,e.transform)}var iE=class{constructor(e,n){this.version=e,this.transformResults=n}},st=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ff(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Fa=class{};function $N(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ei(t.key,st.none()):new Js(t.key,t.data,st.none());{let n=t.data,r=nn.empty(),s=new je(ut.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new sr(t.key,r,new On(s.toArray()),st.none())}}function eq(t,e,n){t instanceof Js?function(s,i,o){let a=s.value.clone(),c=SP(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof sr?function(s,i,o){if(!Ff(s.precondition,i))return void i.convertToUnknownDocument(o.version);let a=SP(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(zN(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function jl(t,e,n,r){return t instanceof Js?function(i,o,a,c){if(!Ff(i.precondition,o))return a;let l=i.value.clone(),d=AP(i.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof sr?function(i,o,a,c){if(!Ff(i.precondition,o))return a;let l=AP(i.fieldTransforms,c,o),d=o.data;return d.setAll(zN(i)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Ff(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function tq(t,e){let n=null;for(let r of t.fieldTransforms){let s=e.data.field(r.field),i=VN(r.transform,s||null);i!=null&&(n===null&&(n=nn.empty()),n.set(r.field,i))}return n||null}function xP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ka(r,s,(i,o)=>J4(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Js=class extends Fa{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}},sr=class extends Fa{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function zN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function SP(t,e,n){let r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){let i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Z4(o,a,n[s]))}return r}function AP(t,e,n){let r=new Map;for(let s of t){let i=s.transform,o=n.data.field(s.field);r.set(s.field,X4(i,o,e))}return r}var ei=class extends Fa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yl=class extends Fa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Xl=class{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){let i=this.mutations[s];i.key.isEqual(e.key)&&eq(i,e,r[s])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=jl(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=jl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=MN();return this.mutations.forEach(s=>{let i=e.get(s.key),o=i.overlayedDocument,a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;let c=$N(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&ka(this.mutations,e.mutations,(n,r)=>xP(n,r))&&ka(this.baseMutations,e.baseMutations,(n,r)=>xP(n,r))}},oE=class t{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return W4}(),i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new t(e,n,r,s)}};var Zl=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var aE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var yt,ke;function GN(t){switch(t){default:return re();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function KN(t){if(t===void 0)return lt("GRPC error has no .code"),F.UNKNOWN;switch(t){case yt.OK:return F.OK;case yt.CANCELLED:return F.CANCELLED;case yt.UNKNOWN:return F.UNKNOWN;case yt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case yt.INTERNAL:return F.INTERNAL;case yt.UNAVAILABLE:return F.UNAVAILABLE;case yt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case yt.NOT_FOUND:return F.NOT_FOUND;case yt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case yt.ABORTED:return F.ABORTED;case yt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case yt.DATA_LOSS:return F.DATA_LOSS;default:return re()}}(ke=yt||(yt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";var CP=null;function HN(){return new TextEncoder}var nq=new Vs([4294967295,4294967295],0);function TP(t){let e=HN().encode(t),n=new wb;return n.update(e),new Uint8Array(n.digest())}function IP(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Vs([n,r],0),new Vs([s,i],0)]}var cE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yi(`Invalid padding: ${n}`);if(r<0)throw new Yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Vs.fromNumber(r)));return s.compare(nq)===1&&(s=new Vs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=TP(e),[r,s]=IP(n);for(let i=0;i<this.hashCount;i++){let o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){let s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new t(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=TP(e),[r,s]=IP(n);for(let i=0;i<this.hashCount;i++){let o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Yi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Jl=class t{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let s=new Map;return s.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ue.min(),s,new Qe(pe),wn(),_e())}},eu=class t{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,_e(),_e(),_e())}};var Da=class{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}},Xf=class{constructor(e,n){this.targetId=e,this.me=n}},Zf=class{constructor(e,n,r=Mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}},Jf=class{constructor(){this.fe=0,this.ge=DP(),this.pe=Mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=_e(),n=_e(),r=_e();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re()}}),new eu(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=DP()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},lE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=wn(),this.qe=RP(),this.Qe=new Qe(pe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){let n=e.targetId,r=e.me.count,s=this.Je(n);if(s){let i=s.target;if(Wf(i))if(r===0){let o=new Q(i.path);this.Ue(n,o,vt.newNoDocument(o,ue.min()))}else ce(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}CP?.et(function(d,f,m,g,b){var C,x,N,U,j,H;let ae={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},le=f.unchangedNames;return le&&(ae.bloomFilter={applied:b===0,hashCount:(C=le?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(U=(N=(x=le?.bits)===null||x===void 0?void 0:x.bitmap)===null||N===void 0?void 0:N.length)!==null&&U!==void 0?U:0,padding:(H=(j=le?.bits)===null||j===void 0?void 0:j.padding)!==null&&H!==void 0?H:0,mightContain:T=>{var w;return(w=g?.mightContain(T))!==null&&w!==void 0&&w}}),ae}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n,o,a;try{o=Ws(r).toUint8Array()}catch(c){if(c instanceof Gf)return Kn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new cE(o,s,i)}catch(c){return Kn(c instanceof Yi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),s=0;return r.forEach(i=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){let n=new Map;this.Be.forEach((i,o)=>{let a=this.Je(o);if(a){if(i.current&&Wf(a.target)){let c=new Q(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,vt.newNoDocument(c,e))}i.be&&(n.set(o,i.Ce()),i.ve())}});let r=_e();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));let s=new Jl(e,n,this.Qe,this.ke,r);return this.ke=wn(),this.qe=RP(),this.Qe=new Qe(pe),s}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Jf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new je(pe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Jf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function RP(){return new Qe(Q.comparator)}function DP(){return new Qe(Q.comparator)}var rq={asc:"ASCENDING",desc:"DESCENDING"},sq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iq={and:"AND",or:"OR"},uE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function dE(t,e){return t.useProto3Json||hu(e)?e:{value:e}}function La(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oq(t,e){return La(t,e.toTimestamp())}function dt(t){return ce(!!t),ue.fromTimestamp(function(n){let r=rs(n);return new et(r.seconds,r.nanos)}(t))}function Bv(t,e){return hE(t,e).canonicalString()}function hE(t,e){let n=function(s){return new Pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function QN(t){let e=Pe.fromString(t);return ce(iO(e)),e}function tu(t,e){return Bv(t.databaseId,e.path)}function Rr(t,e){let n=QN(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(ZN(n))}function YN(t,e){return Bv(t.databaseId,e)}function XN(t){let e=QN(t);return e.length===4?Pe.emptyPath():ZN(e)}function fE(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZN(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function kP(t,e,n){return{name:tu(t,e),fields:n.value.mapValue.fields}}function JN(t,e,n){let r=Rr(t,e.name),s=dt(e.updateTime),i=e.createTime?dt(e.createTime):ue.min(),o=new nn({mapValue:{fields:e.fields}}),a=vt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function aq(t,e){return"found"in e?function(r,s){ce(!!s.found),s.found.name,s.found.updateTime;let i=Rr(r,s.found.name),o=dt(s.found.updateTime),a=s.found.createTime?dt(s.found.createTime):ue.min(),c=new nn({mapValue:{fields:s.found.fields}});return vt.newFoundDocument(i,o,a,c)}(t,e):"missing"in e?function(r,s){ce(!!s.missing),ce(!!s.readTime);let i=Rr(r,s.missing),o=dt(s.readTime);return vt.newNoDocument(i,o)}(t,e):re()}function cq(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,d){return l.useProto3Json?(ce(d===void 0||typeof d=="string"),Mt.fromBase64String(d||"")):(ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Mt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?F.UNKNOWN:KN(l.code);return new q(d,l.message||"")}(o);n=new Zf(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let s=Rr(t,r.document.name),i=dt(r.document.updateTime),o=r.document.createTime?dt(r.document.createTime):ue.min(),a=new nn({mapValue:{fields:r.document.fields}}),c=vt.newFoundDocument(s,i,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new Da(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let s=Rr(t,r.document),i=r.readTime?dt(r.readTime):ue.min(),o=vt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Da([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let s=Rr(t,r.document),i=r.removedTargetIds||[];n=new Da([],i,s,null)}else{if(!("filter"in e))return re();{e.filter;let r=e.filter;r.targetId;let{count:s=0,unchangedNames:i}=r,o=new aE(s,i),a=r.targetId;n=new Xf(a,o)}}return n}function nu(t,e){let n;if(e instanceof Js)n={update:kP(t,e.key,e.value)};else if(e instanceof ei)n={delete:tu(t,e.key)};else if(e instanceof sr)n={update:kP(t,e.key,e.data),updateMask:mq(e.fieldMask)};else{if(!(e instanceof Yl))return re();n={verify:tu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){let a=o.transform;if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ss)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof is)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:oq(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re()}(t,e.precondition)),n}function mE(t,e){let n=e.currentDocument?function(i){return i.updateTime!==void 0?st.updateTime(dt(i.updateTime)):i.exists!==void 0?st.exists(i.exists):st.none()}(e.currentDocument):st.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let c=null;if("setToServerValue"in a)ce(a.setToServerValue==="REQUEST_TIME"),c=new Xs;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new ss(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new is(d)}else"increment"in a?c=new Zs(o,a.increment):re();let l=ut.fromServerFormat(a.fieldPath);return new no(l,c)}(t,s)):[];if(e.update){e.update.name;let s=Rr(t,e.update.name),i=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new On(l.map(d=>ut.fromServerFormat(d)))}(e.updateMask);return new sr(s,i,o,n,r)}return new Js(s,i,n,r)}if(e.delete){let s=Rr(t,e.delete);return new ei(s,n)}if(e.verify){let s=Rr(t,e.verify);return new Yl(s,n)}return re()}function lq(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?dt(s.updateTime):dt(i);return o.isEqual(ue.min())&&(o=dt(i)),new iE(o,s.transformResults||[])}(n,e))):[]}function eO(t,e){return{documents:[YN(t,e.path)]}}function tO(t,e){let n={structuredQuery:{}},r=e.path,s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YN(t,s);let i=function(l){if(l.length!==0)return sO(Be.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);let o=function(l){if(l.length!==0)return l.map(d=>function(m){return{field:Sa(m.field),direction:dq(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=dE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:s}}function nO(t){let e=XN(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,s=null;if(r>0){ce(r===1);let d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){let m=rO(f);return m instanceof Be&&Mv(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new eo(Aa(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,hu(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){let m=!!f.before,g=f.values||[];return new Pr(g,m)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let m=!f.before,g=f.values||[];return new Pr(g,m)}(n.endAt)),RN(e,s,o,i,a,"F",c,l)}function uq(t,e){let n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Aa(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":let s=Aa(n.unaryFilter.field);return Re.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let i=Aa(n.unaryFilter.field);return Re.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Aa(n.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return Re.create(Aa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>rO(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function dq(t){return rq[t]}function hq(t){return sq[t]}function fq(t){return iq[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function Aa(t){return ut.fromServerFormat(t.fieldPath)}function sO(t){return t instanceof Re?function(n){if(n.op==="=="){if(mP(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NAN"}};if(fP(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mP(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NAN"}};if(fP(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(n.field),op:hq(n.op),value:n.value}}}(t):t instanceof Be?function(n){let r=n.getFilters().map(s=>sO(s));return r.length===1?r[0]:{compositeFilter:{op:fq(n.op),filters:r}}}(t):re()}function mq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ba=class t{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=Mt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var em=class{constructor(e){this.ct=e}};function pq(t,e){let n;if(e.document)n=JN(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=Q.fromSegments(e.noDocument.path),s=so(e.noDocument.readTime);n=vt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return re();{let r=Q.fromSegments(e.unknownDocument.path),s=so(e.unknownDocument.version);n=vt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){let i=new et(s[0],s[1]);return ue.fromTimestamp(i)}(e.readTime)),n}function PP(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:tm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:tu(i,o.key),fields:o.data.value.mapValue.fields,updateTime:La(i,o.version.toTimestamp()),createTime:La(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ro(e.version)};else{if(!e.isUnknownDocument())return re();r.unknownDocument={path:n.path.toArray(),version:ro(e.version)}}return r}function tm(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ro(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function so(t){let e=new et(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function Hi(t,e){let n=(e.baseMutations||[]).map(i=>mE(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){let o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){let a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}let r=e.mutations.map(i=>mE(t.ct,i)),s=et.fromMillis(e.localWriteTimeMs);return new Xl(e.batchId,s,n,r)}function Bl(t){let e=so(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?so(t.lastLimboFreeSnapshotVersion):ue.min(),r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return ce(i.documents.length===1),fn(Qa(XN(i.documents[0])))}(t.query):function(i){return fn(nO(i))}(t.query),new Ba(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Mt.fromBase64String(t.resumeToken))}function oO(t,e){let n=ro(e.snapshotVersion),r=ro(e.lastLimboFreeSnapshotVersion),s;s=Wf(e.target)?eO(t.ct,e.target):tO(t.ct,e.target)._t;let i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:to(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Vv(t){let e=nO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yf(e,e.limit,"L"):e}function Rb(t,e){return new Zl(e.largestBatchId,mE(t.ct,e.overlayMutation))}function NP(t,e){let n=e.path.lastSegment();return[t,hn(e.path.popLast()),n]}function OP(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ro(r.readTime),documentKey:hn(r.documentKey.path),largestBatchId:r.largestBatchId}}var pE=class{getBundleMetadata(e,n){return MP(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:so(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return MP(e).put(function(s){return{bundleId:s.id,createTime:ro(dt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return FP(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Vv(i.bundledQuery),readTime:so(i.readTime)}}(r)})}saveNamedQuery(e,n){return FP(e).put(function(s){return{name:s.name,readTime:ro(dt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}};function MP(t){return Ft(t,"bundles")}function FP(t){return Ft(t,"namedQueries")}var nm=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Nl(e).get(NP(this.userId,n)).next(r=>r?Rb(this.serializer,r):null)}getOverlays(e,n){let r=Tr();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){let s=[];return r.forEach((i,o)=>{let a=new Zl(n,o);s.push(this.ht(e,a))}),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){let s=new Set;n.forEach(o=>s.add(hn(o.getCollectionPath())));let i=[];return s.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Nl(e).j("collectionPathOverlayIndex",a))}),O.waitFor(i)}getOverlaysForCollection(e,n,r){let s=Tr(),i=hn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Nl(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=Rb(this.serializer,c);s.set(l.getKey(),l)}return s})}getOverlaysForCollectionGroup(e,n,r,s){let i=Tr(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Nl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=Rb(this.serializer,l);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>i)}ht(e,n){return Nl(e).put(function(s,i,o){let[a,c,l]=NP(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:nu(s.ct,o.mutation)}}(this.serializer,this.userId,n))}};function Nl(t){return Ft(t,"documentOverlays")}var ts=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(rt(e.integerValue));else if("doubleValue"in e){let r=rt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Gl(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=rs(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ws(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?wN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):re()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let s of Object.keys(r))this.Rt(s,n),this.It(r[s],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let s of r)this.It(s,n)}gt(e,n){this.Et(n,37),Q.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};ts.bt=new ts;function gq(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function LP(t){let e=64-function(r){let s=0;for(let i=0;i<8;++i){let o=gq(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}var gE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let s=n.codePointAt(0);this.Ct(240|s>>>18),this.Ct(128|63&s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let s=n.codePointAt(0);this.Mt(240|s>>>18),this.Mt(128|63&s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s)}}this.xt()}Lt(e){let n=this.Bt(e),r=LP(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}qt(e){let n=this.Bt(e),r=LP(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(i){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}},yE=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},_E=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Wi=class{constructor(){this.Gt=new gE,this.zt=new yE(this.Gt),this.jt=new _E(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Qi=class t{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Us(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=BP(t.arrayValue,e.arrayValue),n!==0?n:(n=BP(t.directionalValue,e.directionalValue),n!==0?n:Q.comparator(t.documentKey,e.documentKey)))}function BP(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var rm=class{constructor(e){this.Yt=new je((n,r)=>ut.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(ce(e.collectionGroup===this.collectionId),this.en)return!1;let n=Ub(e);if(n!==void 0&&!this.nn(n))return!1;let r=Gi(e),s=new Set,i=0,o=0;for(;i<r.length&&this.nn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!s.has(a.field.canonicalString())){let c=r[i];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++i}for(;i<r.length;++i){let a=r[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new je(ut.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ia(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ia(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ia(r.field,r.dir==="asc"?0:1)));return new Pa(Pa.UNKNOWN_ID,this.collectionId,n,zl.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function aO(t){var e,n;if(ce(t instanceof Re||t instanceof Be),t instanceof Re){if(t instanceof Hf){let s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Re.create(t.field,"==",i)))||[];return Be.create(s,"or")}return t}let r=t.filters.map(s=>aO(s));return Be.create(r,t.op)}function yq(t){if(t.getFilters().length===0)return[];let e=vE(aO(t));return ce(cO(e)),bE(e)||EE(e)?[e]:e.getFilters()}function bE(t){return t instanceof Re}function EE(t){return t instanceof Be&&Mv(t)}function cO(t){return bE(t)||EE(t)||function(n){if(n instanceof Be&&Wb(n)){for(let r of n.getFilters())if(!bE(r)&&!EE(r))return!1;return!0}return!1}(t)}function vE(t){if(ce(t instanceof Re||t instanceof Be),t instanceof Re)return t;if(t.filters.length===1)return vE(t.filters[0]);let e=t.filters.map(r=>vE(r)),n=Be.create(e,t.op);return n=sm(n),cO(n)?n:(ce(n instanceof Be),ce(Oa(n)),ce(n.filters.length>1),n.filters.reduce((r,s)=>Uv(r,s)))}function Uv(t,e){let n;return ce(t instanceof Re||t instanceof Be),ce(e instanceof Re||e instanceof Be),n=t instanceof Re?e instanceof Re?function(s,i){return Be.create([s,i],"and")}(t,e):VP(t,e):e instanceof Re?VP(e,t):function(s,i){if(ce(s.filters.length>0&&i.filters.length>0),Oa(s)&&Oa(i))return CN(s,i.getFilters());let o=Wb(s)?s:i,a=Wb(s)?i:s,c=o.filters.map(l=>Uv(l,a));return Be.create(c,"or")}(t,e),sm(n)}function VP(t,e){if(Oa(e))return CN(e,t.getFilters());{let n=e.filters.map(r=>Uv(t,r));return Be.create(n,"or")}}function sm(t){if(ce(t instanceof Re||t instanceof Be),t instanceof Re)return t;let e=t.getFilters();if(e.length===1)return sm(e[0]);if(SN(t))return t;let n=e.map(s=>sm(s)),r=[];return n.forEach(s=>{s instanceof Re?r.push(s):s instanceof Be&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Be.create(r,t.op)}var wE=class{constructor(){this._n=new ru}addToCollectionParentIndex(e,n){return this._n.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Hn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},ru=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new je(Pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){let n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new je(Pe.comparator)).toArray()}};var Rf=new Uint8Array(0),xE=class{constructor(e,n){this.databaseId=n,this.an=new ru,this.un=new Nr(r=>to(r),(r,s)=>fu(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let i={collectionId:r,parent:hn(s)};return UP(e).put(i)}return O.resolve()}getCollectionParents(e,n){let r=[],s=IDBKeyRange.bound([n,""],[lN(n),""],!1,!0);return UP(e).U(s).next(i=>{for(let o of i){if(o.collectionId!==n)break;r.push(Cr(o.parent))}return r})}addFieldIndex(e,n){let r=Ol(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete s.indexId;let i=r.add(s);if(n.indexState){let o=Ea(e);return i.next(a=>{o.put(OP(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){let r=Ol(e),s=Ea(e),i=ba(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Ol(e),r=ba(e),s=Ea(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return O.forEach(this.cn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){let i=new rm(r).on();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){let r=ba(e),s=!0,i=new Map;return O.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=_e(),a=[];return O.forEach(i,(c,l)=>{$("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(c)} to execute ${to(n)}`);let d=function(j,H){let ae=Ub(H);if(ae===void 0)return null;for(let le of Qf(j,ae.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null}(l,c),f=function(j,H){let ae=new Map;for(let le of Gi(H))for(let T of Qf(j,le.fieldPath))switch(T.op){case"==":case"in":ae.set(le.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return ae.set(le.fieldPath.canonicalString(),T.value),Array.from(ae.values())}return null}(l,c),m=function(j,H){let ae=[],le=!0;for(let T of Gi(H)){let w=T.kind===0?bP(j,T.fieldPath,j.startAt):EP(j,T.fieldPath,j.startAt);ae.push(w.value),le&&(le=w.inclusive)}return new Pr(ae,le)}(l,c),g=function(j,H){let ae=[],le=!0;for(let T of Gi(H)){let w=T.kind===0?EP(j,T.fieldPath,j.endAt):bP(j,T.fieldPath,j.endAt);ae.push(w.value),le&&(le=w.inclusive)}return new Pr(ae,le)}(l,c),b=this.hn(c,l,m),C=this.hn(c,l,g),x=this.Pn(c,l,f),N=this.In(c.indexId,d,b,m.inclusive,C,g.inclusive,x);return O.forEach(N,U=>r.G(U,n.limit).next(j=>{j.forEach(H=>{let ae=Q.fromSegments(H.documentKey);o.has(ae)||(o=o.add(ae),a.push(ae))})}))}).next(()=>a)}return O.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=yq(Be.create(e.filters,"and")).map(r=>rE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,s,i,o,a){let c=(n!=null?n.length:1)*Math.max(r.length,i.length),l=c/(n!=null?n.length:1),d=[];for(let f=0;f<c;++f){let m=n?this.Tn(n[f/l]):Rf,g=this.En(e,m,r[f%l],s),b=this.dn(e,m,i[f%l],o),C=a.map(x=>this.En(e,m,x,!0));d.push(...this.createRange(g,b,C))}return d}En(e,n,r,s){let i=new Qi(e,Q.empty(),n,r);return s?i:i.Jt()}dn(e,n,r,s){let i=new Qi(e,Q.empty(),n,r);return s?i.Jt():i}ln(e,n){let r=new rm(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(let a of i)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,s=this.cn(n);return O.forEach(s,i=>this.ln(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new je(ut.comparator),d=!1;for(let f of c.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:l=l.add(m.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}An(e,n){let r=new Wi;for(let s of Gi(e)){let i=n.data.field(s.fieldPath);if(i==null)return null;let o=r.Ht(s.kind);ts.bt.Pt(i,o)}return r.Wt()}Tn(e){let n=new Wi;return ts.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new Wi;return ts.bt.Pt(Ji(this.databaseId,n),r.Ht(function(i){let o=Gi(i);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let s=[];s.push(new Wi);let i=0;for(let o of Gi(e)){let a=r[i++];for(let c of s)if(this.Vn(n,o.fieldPath)&&Ql(a))s=this.mn(s,o,a);else{let l=c.Ht(o.kind);ts.bt.Pt(a,l)}}return this.fn(s)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let s=[...e],i=[];for(let o of r.arrayValue.values||[])for(let a of s){let c=new Wi;c.seed(a.Wt()),ts.bt.Pt(o,c.Ht(n.kind)),i.push(c)}return i}Vn(e,n){return!!e.filters.find(r=>r instanceof Re&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Ol(e),s=Ea(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{let o=[];return O.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){let m=f?new zl(f.sequenceNumber,new Hn(so(f.readTime),new Q(Cr(f.documentKey)),f.largestBatchId)):zl.empty(),g=d.fields.map(([b,C])=>new Ia(ut.fromServerFormat(b),C));return new Pa(d.indexId,d.collectionGroup,g,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{let i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:pe(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let s=Ol(e),i=Ea(e);return this.gn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,c=>i.put(OP(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return O.forEach(n,(s,i)=>{let o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),O.forEach(a,c=>this.pn(e,s,c).next(l=>{let d=this.yn(i,c);return l.isEqual(d)?O.resolve():this.wn(e,i,c,l,d)}))))})}Sn(e,n,r,s){return ba(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,s){return ba(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let s=ba(e),i=new je(Us);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{i=i.add(new Qi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}yn(e,n){let r=new je(Us),s=this.An(n,e);if(s==null)return r;let i=Ub(n);if(i!=null){let o=e.data.field(i.fieldPath);if(Ql(o))for(let a of o.arrayValue.values||[])r=r.add(new Qi(n.indexId,e.key,this.Tn(a),s))}else r=r.add(new Qi(n.indexId,e.key,Rf,s));return r}wn(e,n,r,s,i){$("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,d,f,m){let g=c.getIterator(),b=l.getIterator(),C=_a(g),x=_a(b);for(;C||x;){let N=!1,U=!1;if(C&&x){let j=d(C,x);j<0?U=!0:j>0&&(N=!0)}else C!=null?U=!0:N=!0;N?(f(x),x=_a(b)):U?(m(C),C=_a(g)):(C=_a(g),x=_a(b))}}(s,i,Us,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),O.waitFor(o)}gn(e){let n=1;return Ea(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Us(o,a)).filter((o,a,c)=>!a||Us(o,c[a-1])!==0);let s=[];s.push(e);for(let o of r){let a=Us(o,e),c=Us(o,n);if(a===0)s[0]=e.Jt();else if(a>0&&c<0)s.push(o),s.push(o.Jt());else if(c>0)break}s.push(n);let i=[];for(let o=0;o<s.length;o+=2){if(this.Dn(s[o],s[o+1]))return[];let a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Rf,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Rf,[]];i.push(IDBKeyRange.bound(a,c))}return i}Dn(e,n){return Us(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(jP)}getMinOffset(e,n){return O.mapArray(this.cn(n),r=>this.ln(e,r).next(s=>s||re())).next(jP)}};function UP(t){return Ft(t,"collectionParents")}function ba(t){return Ft(t,"indexEntries")}function Ol(t){return Ft(t,"indexConfiguration")}function Ea(t){return Ft(t,"indexState")}function jP(t){ce(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let s=t[r].indexState.offset;Pv(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Hn(e.readTime,e.documentKey,n)}var qP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function lO(t,e,n){let r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:o},(d,f,m)=>(a++,m.delete()));i.push(c.next(()=>{ce(a===1)}));let l=[];for(let d of n.mutations){let f=pN(e,d.key.path,n.batchId);i.push(s.delete(f)),l.push(d.key)}return O.waitFor(i).next(()=>l)}function im(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw re();e=t.noDocument}return JSON.stringify(e).length}Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(41943040,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);var om=class t{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Cn={}}static lt(e,n,r,s){ce(e.uid!=="");let i=e.isAuthenticated()?e.uid:"";return new t(i,n,r,s)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return js(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){let i=Ca(e),o=js(e);return o.add({}).next(a=>{ce(typeof a=="number");let c=new Xl(a,n,r,s),l=function(g,b,C){let x=C.baseMutations.map(U=>nu(g.ct,U)),N=C.mutations.map(U=>nu(g.ct,U));return{userId:b,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:x,mutations:N}}(this.serializer,this.userId,c),d=[],f=new je((m,g)=>pe(m.canonicalString(),g.canonicalString()));for(let m of s){let g=pN(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(o.put(l)),d.push(i.put(g,S4))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),O.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return js(e).get(n).next(r=>r?(ce(r.userId===this.userId),Hi(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?O.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let s=r.keys();return this.Cn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]),i=null;return js(e).J({index:"userMutationsIndex",range:s},(o,a,c)=>{a.userId===this.userId&&(ce(a.batchId>=r),i=Hi(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return js(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return js(e).U("userMutationsIndex",n).next(r=>r.map(s=>Hi(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Nf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Ca(e).J({range:s},(o,a,c)=>{let[l,d,f]=o,m=Cr(d);if(l===this.userId&&n.path.isEqual(m))return js(e).get(f).next(g=>{if(!g)throw re();ce(g.userId===this.userId),i.push(Hi(this.serializer,g))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(pe),s=[];return n.forEach(i=>{let o=Nf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Ca(e).J({range:a},(l,d,f)=>{let[m,g,b]=l,C=Cr(g);m===this.userId&&i.path.isEqual(C)?r=r.add(b):f.done()});s.push(c)}),O.waitFor(s).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,s=r.length+1,i=Nf(this.userId,r),o=IDBKeyRange.lowerBound(i),a=new je(pe);return Ca(e).J({range:o},(c,l,d)=>{let[f,m,g]=c,b=Cr(m);f===this.userId&&r.isPrefixOf(b)?b.length===s&&(a=a.add(g)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],s=[];return n.forEach(i=>{s.push(js(e).get(i).next(o=>{if(o===null)throw re();ce(o.userId===this.userId),r.push(Hi(this.serializer,o))}))}),O.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return lO(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),O.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Ca(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){let c=Cr(i[1]);s.push(c)}else a.done()}).next(()=>{ce(s.length===0)})})}containsKey(e,n){return uO(e,this.userId,n)}xn(e){return dO(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function uO(t,e,n){let r=Nf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r),o=!1;return Ca(t).J({range:i,H:!0},(a,c,l)=>{let[d,f,m]=a;d===e&&f===s&&(o=!0),l.done()}).next(()=>o)}function js(t){return Ft(t,"mutations")}function Ca(t){return Ft(t,"documentMutations")}function dO(t){return Ft(t,"mutationQueues")}var Va=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var SE=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Va(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ue.fromTimestamp(new et(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.kn(e,s)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>va(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(ce(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let s=0,i=[];return va(e).J((o,a)=>{let c=Bl(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(i)).next(()=>s)}forEachTarget(e,n){return va(e).J((r,s)=>{let i=Bl(s);n(i)})}Bn(e){return $P(e).get("targetGlobalKey").next(n=>(ce(n!==null),n))}kn(e,n){return $P(e).put("targetGlobalKey",n)}qn(e,n){return va(e).put(oO(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=to(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return va(e).J({range:s,index:"queryTargetsIndex"},(o,a,c)=>{let l=Bl(a);fu(n,l.target)&&(i=l,c.done())}).next(()=>i)}addMatchingKeys(e,n,r){let s=[],i=qs(e);return n.forEach(o=>{let a=hn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(s)}removeMatchingKeys(e,n,r){let s=qs(e);return O.forEach(n,i=>{let o=hn(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){let r=qs(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),s=qs(e),i=_e();return s.J({range:r,H:!0},(o,a,c)=>{let l=Cr(o[1]),d=new Q(l);i=i.add(d)}).next(()=>i)}containsKey(e,n){let r=hn(n.path),s=IDBKeyRange.bound([r],[lN(r)],!1,!0),i=0;return qs(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],c,l)=>{o!==0&&(i++,l.done())}).next(()=>i>0)}ot(e,n){return va(e).get(n).next(r=>r?Bl(r):null)}};function va(t){return Ft(t,"targets")}function $P(t){return Ft(t,"targetGlobal")}function qs(t){return Ft(t,"targetDocuments")}function zP([t,e],[n,r]){let s=pe(t,n);return s===0?pe(e,r):s}var AE=class{constructor(e){this.Kn=e,this.buffer=new je(zP),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();zP(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},CE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){$("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ri(n)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ni(n)}yield this.zn(3e5)}))}},TE=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Nn.oe);let r=new AE(n);return this.jn.forEachTarget(e,s=>r.Wn(s.sequenceNumber)).next(()=>this.jn.Jn(e,s=>r.Wn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(qP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qP):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,s,i,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),wa()<=_r.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}};function _q(t,e){return new TE(t,e)}var IE=class{constructor(e,n){this.db=e,this.garbageCollector=_q(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,s)=>n(s))}addReference(e,n,r){return Df(e,r)}removeReference(e,n,r){return Df(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Df(e,n)}er(e,n){return function(s,i){let o=!1;return dO(s).Y(a=>uO(s,a,i).next(c=>(c&&(o=!0),O.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],i=0;return this.Xn(e,(o,a)=>{if(a<=n){let c=this.er(e,o).next(l=>{if(!l)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),qs(e).delete(function(f){return[0,hn(f.path)]}(o))))});s.push(c)}}).next(()=>O.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Df(e,n)}Xn(e,n){let r=qs(e),s,i=Nn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(i!==Nn.oe&&n(new Q(Cr(s)),i),i=l,s=c):i=Nn.oe}).next(()=>{i!==Nn.oe&&n(new Q(Cr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Df(t,e){return qs(t).put(function(r,s){return{targetId:0,path:hn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}var am=class{constructor(){this.changes=new Nr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var RE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return zi(e).put(r)}removeEntry(e,n,r){return zi(e).delete(function(i,o){let a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],tm(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=vt.newInvalidDocument(n);return zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ml(n))},(s,i)=>{r=this.nr(n,i)}).next(()=>r)}rr(e,n){let r={size:0,document:vt.newInvalidDocument(n)};return zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ml(n))},(s,i)=>{r={document:this.nr(n,i),size:im(i)}}).next(()=>r)}getEntries(e,n){let r=wn();return this.ir(e,n,(s,i)=>{let o=this.nr(s,i);r=r.insert(s,o)}).next(()=>r)}sr(e,n){let r=wn(),s=new Qe(Q.comparator);return this.ir(e,n,(i,o)=>{let a=this.nr(i,o);r=r.insert(i,a),s=s.insert(i,im(o))}).next(()=>({documents:r,_r:s}))}ir(e,n,r){if(n.isEmpty())return O.resolve();let s=new je(HP);n.forEach(c=>s=s.add(c));let i=IDBKeyRange.bound(Ml(s.first()),Ml(s.last())),o=s.getIterator(),a=o.getNext();return zi(e).J({index:"documentKeyIndex",range:i},(c,l,d)=>{let f=Q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&HP(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(Ml(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),tm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zi(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{i?.incrementDocumentReadCount(l.length);let d=wn();for(let f of l){let m=this.nr(Q.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(pu(n,m)||s.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=wn(),o=KP(n,r),a=KP(n,Hn.max());return zi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{let f=this.nr(Q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);i=i.insert(f.key,f),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new DE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return GP(e).get("remoteDocumentGlobalKey").next(n=>(ce(!!n),n))}tr(e,n){return GP(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=pq(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return vt.newInvalidDocument(e)}};function hO(t){return new RE(t)}var DE=class extends am{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Nr(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){let n=[],r=0,s=new je((i,o)=>pe(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{let a=this.ur.get(i);if(n.push(this.ar.removeEntry(e,i,a.readTime)),o.isValidDocument()){let c=PP(this.ar.serializer,o);s=s.add(i.path.popLast());let l=im(c);r+=l-a.size,n.push(this.ar.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){let c=PP(this.ar.serializer,o.convertToNoDocument(ue.min()));n.push(this.ar.addEntry(e,i,c))}}),s.forEach(i=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.ar.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:s})=>(s.forEach((i,o)=>{this.ur.set(i,{size:o,readTime:r.get(i).readTime})}),r))}};function GP(t){return Ft(t,"remoteDocumentGlobal")}function zi(t){return Ft(t,"remoteDocumentsV14")}function Ml(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function KP(t,e){let n=e.documentKey.path.toArray();return[t,tm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function HP(t,e){let n=t.path.toArray(),r=e.path.toArray(),s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=pe(n[i],r[i]),s)return s;return s=pe(n.length,r.length),s||(s=pe(n[n.length-2],r[r.length-2]),s||pe(n[n.length-1],r[r.length-1]))}var kE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var cm=class{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&jl(r.mutation,s,On.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){let s=Tr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ll();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Tr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){let s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=wn(),o=Ul(),a=function(){return Ul()}();return n.forEach((c,l)=>{let d=r.get(l.key);s.has(l.key)&&(d===void 0||d.mutation instanceof sr)?i=i.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),jl(d.mutation,l,d.mutation.getFieldMask(),et.now())):o.set(l.key,On.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new kE(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ul(),s=new Qe((o,a)=>o-a),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||On.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(s.get(a.batchId)||_e()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{let o=[],a=s.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=MN();d.forEach(m=>{if(!i.has(m)){let g=$N(n.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{let o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Tr()),a=-1,c=i;return o.next(l=>O.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,c,l,_e())).next(d=>({batchId:a,changes:ON(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=Ll();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){let i=n.collectionGroup,o=Ll();return this.indexManager.getCollectionParents(e,i).next(a=>O.forEach(a,c=>{let l=function(f,m){return new rr(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r,s).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,vt.newInvalidDocument(d)))});let a=Ll();return o.forEach((c,l)=>{let d=i.get(c);d!==void 0&&jl(d.mutation,l,On.empty(),et.now()),pu(n,l)&&(a=a.insert(c,l))}),a})}};var PE=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return O.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:dt(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:Vv(s.bundledQuery),readTime:dt(s.readTime)}}(n)),O.resolve()}};var NE=class{constructor(){this.overlays=new Qe(Q.comparator),this.hr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Tr();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let s=Tr(),i=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=i.get(l.largestBatchId);d===null&&(d=Tr(),i=i.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Tr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=s)););return O.resolve(a)}ht(e,n,r){let s=this.overlays.get(r.key);if(s!==null){let o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Zl(n,r));let i=this.hr.get(n);i===void 0&&(i=_e(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}};var su=class{constructor(){this.Pr=new je(_t.Ir),this.Tr=new je(_t.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new _t(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new _t(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new Q(new Pe([])),r=new _t(n,e),s=new _t(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new Q(new Pe([])),r=new _t(n,e),s=new _t(n,e+1),i=_e();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){let n=new _t(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},_t=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Q.comparator(e.key,n.key)||pe(e.pr,n.pr)}static Er(e,n){return pe(e.pr,n.pr)||Q.comparator(e.key,n.key)}};var OE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new je(_t.Ir)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){let i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Xl(i,n,r,s);this.mutationQueue.push(o);for(let a of s)this.wr=this.wr.add(new _t(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,s=this.br(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{let a=this.Sr(o.pr);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(pe);return n.forEach(s=>{let i=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,s=r.length+1,i=r;Q.isDocumentKey(i)||(i=i.child(""));let o=new _t(new Q(i),0),a=new je(pe);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.pr)),!0)},o),O.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return O.forEach(n.mutations,s=>{let i=new _t(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new _t(n,0),s=this.wr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ME=class{constructor(e){this.vr=e,this.docs=function(){return new Qe(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=wn();return n.forEach(s=>{let i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=wn(),o=n.path,a=new Q(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Pv(dN(d),r)<=0||(s.has(d.key)||pu(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re()}Fr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FE(this)}getSize(e){return O.resolve(this.size)}},FE=class extends am{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var LE=class{constructor(e){this.persistence=e,this.Mr=new Nr(n=>to(n),fu),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Or=0,this.Nr=new su,this.targetCount=0,this.Lr=Va.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),O.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Va(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.qn(n),O.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0,i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Nr.containsKey(n))}};var lm=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Nn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new LE(this),this.indexManager=new wE,this.remoteDocumentCache=function(s){return new ME(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new em(n),this.$r=new PE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new OE(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);let s=new BE(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},BE=class extends qf{constructor(e){super(),this.currentSequenceNumber=e}},um=class t{constructor(e){this.persistence=e,this.zr=new su,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw re()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),O.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{let s=Q.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return O.or([()=>O.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var VE=class{constructor(e){this.serializer=e}O(e,n,r,s){let i=new $f("createOrUpgrade",n);r<1&&s>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uP,{unique:!0}),c.createObjectStore("documentMutations")}(e),WP(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),WP(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uP,{unique:!0});let f=l.store("mutations"),m=d.map(g=>f.put(g));return O.waitFor(m)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.Xr(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i)))),r<7&&s>=7&&(o=o.next(()=>this.ti(i))),r<8&&s>=8&&(o=o.next(()=>this.ni(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.ri(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:F4});l.createIndex("collectionPathOverlayIndex",L4,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",B4,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:A4});l.createIndex("documentKeyIndex",C4),l.createIndex("collectionGroupIndex",T4)}(e)).next(()=>this.ii(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.si(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:P4}).createIndex("sequenceNumberIndex",N4,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:O4}).createIndex("documentKeyIndex",M4,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=im(s)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>O.forEach(s,i=>{let o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>O.forEach(a,c=>{ce(c.userId===i.userId);let l=Hi(this.serializer,c);return lO(e,i.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{let i=[];return r.J((o,a)=>{let c=new Pe(o),l=function(f){return[0,hn(f)]}(c);i.push(n.get(l).next(d=>d?O.resolve():(f=>n.put({targetId:0,path:hn(f),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(i))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:k4});let r=n.store("collectionParents"),s=new ru,i=o=>{if(s.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:hn(c)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Pe(o);return i(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,c],l)=>{let d=Cr(a);return i(d.popLast())}))}ri(e){let n=e.store("targets");return n.J((r,s)=>{let i=Bl(s),o=oO(this.serializer,i);return n.put(o)})}ii(e,n){let r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{let a=n.store("remoteDocumentsV14"),c=function(f){return f.document?new Q(Pe.fromString(f.document.name).popFirst(5)):f.noDocument?Q.fromSegments(f.noDocument.path):f.unknownDocument?Q.fromSegments(f.unknownDocument.path):re()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(l))}).next(()=>O.waitFor(s))}si(e,n){let r=n.store("mutations"),s=hO(this.serializer),i=new lm(um.Hr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:_e();Hi(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),O.forEach(a,(c,l)=>{let d=new bt(l),f=nm.lt(this.serializer,d),m=i.getIndexManager(d),g=om.lt(d,this.serializer,m,i.referenceDelegate);return new cm(s,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Kl(n,Nn.oe),c).next()})})}};function WP(t){t.createObjectStore("targetDocuments",{keyPath:R4}).createIndex("documentTargetsIndex",D4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",I4,{unique:!0}),t.createObjectStore("targetGlobal")}var Db="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",UE=class t{constructor(e,n,r,s,i,o,a,c,l,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=i,this.window=o,this.document=a,this._i=l,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!t.D())throw new q(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new IE(this,s),this.Ti=n+"main",this.serializer=new em(c),this.Ei=new Hs(this.Ti,this.ui,new VE(this.serializer)),this.Qr=new SE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hO(this.serializer),this.$r=new pE,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&lt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Db);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Nn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>y(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>y(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ri(e))return $("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Fl(e).get("owner").next(n=>O.resolve(this.Si(n)))}bi(e){return kf(e).delete(this.clientId)}Di(){return y(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Ft(n,"clientMetadata");return r.U().next(s=>{let i=this.vi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?O.resolve(!0):Fl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Db);return!1}}return!(!this.networkEnabled||!this.inForeground)||kf(e).U().next(r=>this.vi(r,5e3).find(s=>{if(this.clientId!==s.clientId){let i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return y(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Kl(e,Nn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>kf(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return om.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return nm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){$("IndexedDbPersistence","Starting transaction:",e);let s=n==="readonly"?"readonly":"readwrite",i=function(c){return c===16?U4:c===15?bN:c===14?_N:c===13?yN:c===12?V4:c===11?gN:void re()}(this.ui),o;return this.Ei.runTransaction(e,s,i,a=>(o=new Kl(a,this.kr?this.kr.next():Nn.oe),n==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw lt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new q(F.FAILED_PRECONDITION,hN);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Fl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(F.FAILED_PRECONDITION,Db)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fl(e).put("owner",n)}static D(){return Hs.D()}yi(e){let n=Fl(e);return n.get("owner").next(r=>this.Si(r)?($("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(lt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;cg()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return $("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){lt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Fl(t){return Ft(t,"owner")}function kf(t){return Ft(t,"clientMetadata")}function jv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var jE=class t{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=_e(),s=_e();for(let i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new t(e,n.fromCache,r,s)}};var qE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return cg()?8:fN(zc())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){let i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;let o=new qE;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(wa()<=_r.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(wa()<=_r.DEBUG&&$("QueryEngine","Query:",xa(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(wa()<=_r.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):O.resolve())}ji(e,n){if(vP(n))return O.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Yf(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{let o=_e(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Yf(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,s){return vP(n)||s.isEqual(ue.min())?O.resolve(null):this.zi.getDocuments(e,r).next(i=>{let o=this.Zi(n,i);return this.Xi(n,o,r,s)?O.resolve(null):(wa()<=_r.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xa(n)),this.es(e,o,n,uN(s,-1)).next(a=>a))})}Zi(e,n){let r=new je(PN(e));return n.forEach((s,i)=>{pu(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return wa()<=_r.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",xa(n)),this.zi.getDocumentsMatchingQuery(e,n,Hn.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}};var $E=class{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new Qe(pe),this.rs=new Nr(i=>to(i),fu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function fO(t,e,n,r){return new $E(t,e,n,r)}function mO(t,e){return y(this,null,function*(){let n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{let o=[],a=[],c=_e();for(let l of s){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of i){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function bq(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,m=f.keys(),g=O.resolve();return m.forEach(b=>{g=g.next(()=>d.getEntry(c,b)).next(C=>{let x=l.docVersions.get(b);ce(x!==null),C.version.compareTo(x)<0&&(f.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),d.addEntry(C)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function pO(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Eq(t,e){let n=X(t),r=e.snapshotVersion,s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{let o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;let a=[];e.targetChanges.forEach((d,f)=>{let m=s.get(f);if(!m)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Mt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(f,g),function(C,x,N){return C.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,g,d)&&a.push(n.Qr.updateTargetData(i,g))});let c=wn(),l=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(gO(i,o,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!r.isEqual(ue.min())){let d=n.Qr.getLastRemoteSnapshotVersion(i).next(f=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.ns=s,i))}function gO(t,e,n){let r=_e(),s=_e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=wn();return n.forEach((a,c)=>{let l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:s}})}function vq(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ua(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Ba(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{let s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function ja(t,e,n){return y(this,null,function*(){let r=X(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!ri(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)})}function hm(t,e,n){let r=X(t),s=ue.min(),i=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=X(c),m=f.rs.get(d);return m!==void 0?O.resolve(f.ns.get(m)):f.Qr.getTargetData(l,d)}(r,o,fn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:_e())).next(a=>(bO(r,kN(e),a),{documents:a,hs:i})))}function yO(t,e){let n=X(t),r=X(n.Qr),s=n.ns.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function _O(t,e){let n=X(t),r=n.ss.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.os.getAllFromCollectionGroup(s,e,uN(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(bO(n,e,s),s))}function bO(t,e,n){let r=t.ss.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}function wq(t,e,n,r){return y(this,null,function*(){let s=X(t),i=_e(),o=wn();for(let l of n){let d=e.Ps(l.metadata.name);l.document&&(i=i.add(d));let f=e.Is(l);f.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(d,f)}let a=s.os.newChangeBuffer({trackRemovals:!0}),c=yield Ua(s,function(d){return fn(Qa(Pe.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",l=>gO(l,a,o).next(d=>(a.apply(l),d)).next(d=>s.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>s.Qr.addMatchingKeys(l,i,c.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function xq(r,s){return y(this,arguments,function*(t,e,n=_e()){let i=yield Ua(t,fn(Vv(e.bundledQuery))),o=X(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=dt(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return o.$r.saveNamedQuery(a,e);let l=i.withResumeToken(Mt.EMPTY_BYTE_STRING,c);return o.ns=o.ns.insert(l.targetId,l),o.Qr.updateTargetData(a,l).next(()=>o.Qr.removeMatchingKeysForTargetId(a,i.targetId)).next(()=>o.Qr.addMatchingKeys(a,n,i.targetId)).next(()=>o.$r.saveNamedQuery(a,e))})})}function QP(t,e){return`firestore_clients_${t}_${e}`}function YP(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function kb(t,e){return`firestore_targets_${t}_${e}`}var fm=class t{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Es(e,n,r){let s=JSON.parse(r),i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new t(e,n,s.state,i):(lt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ql=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new t(e,r.state,s):(lt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},mm=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Lv();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=mN(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new t(e,i):(lt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},zE=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(lt("SharedClientState",`Failed to parse online state: ${e}`),null)}},iu=class{constructor(){this.activeTargetIds=Lv()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},$l=class{constructor(e,n,r,s,i){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Qe(pe),this.started=!1,this.ys=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=QP(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new iu),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let s=this.getItem(QP(this.persistenceKey,r));if(s){let i=mm.Es(r,s);i&&(this.ps=this.ps.insert(i.clientId,i))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(kb(this.persistenceKey,e));if(r){let s=ql.Es(e,r);s&&(n=s.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kb(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Bs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return $("SharedClientState","READ",e,n),n}setItem(e,n){$("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){$("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if($("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void lt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(i){let o=Nn.oe;if(i!=null)try{let a=JSON.parse(i);ce(typeof a=="number"),o=a}catch(a){lt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Nn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(s=>this.syncEngine.Ys(s)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let s=new fm(this.currentUser,e,n,r),i=YP(this.persistenceKey,this.currentUser,e);this.setItem(i,s.ds())}Bs(e){let n=YP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let s=kb(this.persistenceKey,e),i=new ql(e,n,r);this.setItem(s,i.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return mm.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return fm.Es(new bt(i),s,n)}js(e,n){let r=this.Cs.exec(e),s=Number(r[1]);return ql.Es(s,n)}xs(e){return zE.Es(e)}Js(e){return JSON.parse(e)}zs(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);$("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),s=this.Ns(this.ps),i=this.Ns(r),o=[],a=[];return i.forEach(c=>{s.has(c)||o.push(c)}),s.forEach(c=>{i.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Lv();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}},pm=class{constructor(){this.no=new iu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new iu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var GE=class{io(e){}shutdown(){}};var gm=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Pf=null;function Pb(){return Pf===null?Pf=function(){return 268435456+Math.round(2147483648*Math.random())}():Pf++,"0x"+Pf.toString(16)}var Sq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var KE=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var tn="WebChannelConnection",HE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${s}/databases/${i}`,this.bo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Do(){return!1}Co(n,r,s,i,o){let a=Pb(),c=this.vo(n,r.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,i,o),this.Mo(n,c,l,s).then(d=>($("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Kn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",s),d})}xo(n,r,s,i,o,a){return this.Co(n,r,s,i,o)}Fo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}vo(n,r){let s=Sq[n];return`${this.wo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,s){let i=Pb();return new Promise((o,a)=>{let c=new xb;c.setWithCredentials(!0),c.listenOnce(Ab.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Pl.NO_ERROR:let d=c.getResponseJson();$(tn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Pl.TIMEOUT:$(tn,`RPC '${e}' ${i} timed out`),a(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Pl.HTTP_ERROR:let f=c.getStatus();if($(tn,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let g=m?.error;if(g&&g.status&&g.message){let b=function(x){let N=x.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(N)>=0?N:F.UNKNOWN}(g.status);a(new q(b,g.message))}else a(new q(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new q(F.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{$(tn,`RPC '${e}' ${i} completed.`)}});let l=JSON.stringify(s);$(tn,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",l,r,15)})}Oo(e,n,r){let s=Pb(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ib(),a=Tb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new Sb({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=i.join("");$(tn,`Creating RPC '${e}' stream ${s}: ${d}`,c);let f=o.createWebChannel(d,c),m=!1,g=!1,b=new KE({lo:x=>{g?$(tn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||($(tn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),$(tn,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},ho:()=>f.close()}),C=(x,N,U)=>{x.listen(N,j=>{try{U(j)}catch(H){setTimeout(()=>{throw H},0)}})};return C(f,ya.EventType.OPEN,()=>{g||($(tn,`RPC '${e}' stream ${s} transport opened.`),b.mo())}),C(f,ya.EventType.CLOSE,()=>{g||(g=!0,$(tn,`RPC '${e}' stream ${s} transport closed`),b.po())}),C(f,ya.EventType.ERROR,x=>{g||(g=!0,Kn(tn,`RPC '${e}' stream ${s} transport errored:`,x),b.po(new q(F.UNAVAILABLE,"The operation could not be completed")))}),C(f,ya.EventType.MESSAGE,x=>{var N;if(!g){let U=x.data[0];ce(!!U);let j=U,H=j.error||((N=j[0])===null||N===void 0?void 0:N.error);if(H){$(tn,`RPC '${e}' stream ${s} received error:`,H);let ae=H.status,le=function(S){let I=yt[S];if(I!==void 0)return KN(I)}(ae),T=H.message;le===void 0&&(le=F.INTERNAL,T="Unknown error status: "+ae+" with message "+H.message),g=!0,b.po(new q(le,T)),f.close()}else $(tn,`RPC '${e}' stream ${s} received:`,U),b.yo(U)}}),C(a,Cb.STAT_EVENT,x=>{x.stat===If.PROXY?$(tn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===If.NOPROXY&&$(tn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.fo()},0),b}};function EO(){return typeof window<"u"?window:null}function Lf(){return typeof document<"u"?document:null}function gu(t){return new uE(t,!0)}var ou=class{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=s,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),s=Math.max(0,n-r);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var ym=class{constructor(e,n,r,s,i,o,a,c){this.oi=e,this.Go=r,this.zo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ou(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return y(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return y(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return y(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(lt(n.toString()),lt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.jo===n&&this.u_(r,s)},r=>{e(()=>{let s=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(s)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{r(()=>this.c_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}e_(){this.state=5,this.Yo.$o(()=>y(this,null,function*(){this.state=0,this.start()}))}c_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},WE=class extends ym{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=cq(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();let o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?dt(o.readTime):ue.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=fE(this.serializer),n.addTarget=function(i,o){let a,c=o.target;if(a=Wf(c)?{documents:eO(i,c)}:{query:tO(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WN(i,o.resumeToken);let l=dE(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=La(i,o.snapshotVersion.toTimestamp());let l=dE(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=uq(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=fE(this.serializer),n.removeTarget=e,this.i_(n)}},QE=class extends ym{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=lq(e.writeResults,e.commitTime),r=dt(e.commitTime);return this.listener.A_(r,n)}return ce(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=fE(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>nu(this.serializer,r))};this.i_(n)}};var YE=class extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(e,hE(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(F.UNKNOWN,i.toString())})}xo(e,n,r,s,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,hE(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},XE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(lt(n),this.y_=!1):$("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var ZE=class{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io(o=>{r.enqueueAndForget(()=>y(this,null,function*(){si(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=X(c);l.M_.add(4),yield Ya(l),l.N_.set("Unknown"),l.M_.delete(4),yield yu(l)})}(this))}))}),this.N_=new XE(r,s)}};function yu(t){return y(this,null,function*(){if(si(t))for(let e of t.x_)yield e(!0)})}function Ya(t){return y(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Fm(t,e){let n=X(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),zv(n)?$v(n):Za(n).Xo()&&qv(n,e))}function qa(t,e){let n=X(t),r=Za(n);n.F_.delete(e),r.Xo()&&vO(n,e),n.F_.size===0&&(r.Xo()?r.n_():si(n)&&n.N_.set("Unknown"))}function qv(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Za(t).P_(e)}function vO(t,e){t.L_.xe(e),Za(t).I_(e)}function $v(t){t.L_=new lE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Za(t).start(),t.N_.w_()}function zv(t){return si(t)&&!Za(t).Zo()&&t.F_.size>0}function si(t){return X(t).M_.size===0}function wO(t){t.L_=void 0}function Aq(t){return y(this,null,function*(){t.N_.set("Online")})}function Cq(t){return y(this,null,function*(){t.F_.forEach((e,n)=>{qv(t,e)})})}function Tq(t,e){return y(this,null,function*(){wO(t),zv(t)?(t.N_.D_(e),$v(t)):t.N_.set("Unknown")})}function Iq(t,e,n){return y(this,null,function*(){if(t.N_.set("Online"),e instanceof Zf&&e.state===2&&e.cause)try{yield function(s,i){return y(this,null,function*(){let o=i.cause;for(let a of i.targetIds)s.F_.has(a)&&(yield s.remoteSyncer.rejectListen(a,o),s.F_.delete(a),s.L_.removeTarget(a))})}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _m(t,r)}else if(e instanceof Da?t.L_.Ke(e):e instanceof Xf?t.L_.He(e):t.L_.We(e),!n.isEqual(ue.min()))try{let r=yield pO(t.localStore);n.compareTo(r)>=0&&(yield function(i,o){let a=i.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=i.F_.get(l);d&&i.F_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=i.F_.get(c);if(!d)return;i.F_.set(c,d.withResumeToken(Mt.EMPTY_BYTE_STRING,d.snapshotVersion)),vO(i,c);let f=new Ba(d.target,c,l,d.sequenceNumber);qv(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){$("RemoteStore","Failed to raise snapshot:",r),yield _m(t,r)}})}function _m(t,e,n){return y(this,null,function*(){if(!ri(e))throw e;t.M_.add(1),yield Ya(t),t.N_.set("Offline"),n||(n=()=>pO(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield yu(t)}))})}function xO(t,e){return e().catch(n=>_m(t,n,e))}function Xa(t){return y(this,null,function*(){let e=X(t),n=ti(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Rq(e);)try{let s=yield vq(e.localStore,r);if(s===null){e.v_.length===0&&n.n_();break}r=s.batchId,Dq(e,s)}catch(s){yield _m(e,s)}SO(e)&&AO(e)})}function Rq(t){return si(t)&&t.v_.length<10}function Dq(t,e){t.v_.push(e);let n=ti(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function SO(t){return si(t)&&!ti(t).Zo()&&t.v_.length>0}function AO(t){ti(t).start()}function kq(t){return y(this,null,function*(){ti(t).V_()})}function Pq(t){return y(this,null,function*(){let e=ti(t);for(let n of t.v_)e.d_(n.mutations)})}function Nq(t,e,n){return y(this,null,function*(){let r=t.v_.shift(),s=oE.from(r,e,n);yield xO(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),yield Xa(t)})}function Oq(t,e){return y(this,null,function*(){e&&ti(t).E_&&(yield function(r,s){return y(this,null,function*(){if(function(o){return GN(o)&&o!==F.ABORTED}(s.code)){let i=r.v_.shift();ti(r).t_(),yield xO(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),yield Xa(r)}})}(t,e)),SO(t)&&AO(t)})}function XP(t,e){return y(this,null,function*(){let n=X(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=si(n);n.M_.add(3),yield Ya(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield yu(n)})}function JE(t,e){return y(this,null,function*(){let n=X(t);e?(n.M_.delete(2),yield yu(n)):e||(n.M_.add(2),yield Ya(n),n.N_.set("Unknown"))})}function Za(t){return t.B_||(t.B_=function(n,r,s){let i=X(n);return i.f_(),new WE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:Aq.bind(null,t),To:Cq.bind(null,t),Ao:Tq.bind(null,t),h_:Iq.bind(null,t)}),t.x_.push(e=>y(this,null,function*(){e?(t.B_.t_(),zv(t)?$v(t):t.N_.set("Unknown")):(yield t.B_.stop(),wO(t))}))),t.B_}function ti(t){return t.k_||(t.k_=function(n,r,s){let i=X(n);return i.f_(),new QE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:kq.bind(null,t),Ao:Oq.bind(null,t),R_:Pq.bind(null,t),A_:Nq.bind(null,t)}),t.x_.push(e=>y(this,null,function*(){e?(t.k_.t_(),yield Xa(t)):(yield t.k_.stop(),t.v_.length>0&&($("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var ev=class t{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){let o=Date.now()+r,a=new t(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ja(t,e){if(lt("AsyncQueue",`${e}: ${t}`),ri(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}var bm=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Ll(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Em=class{constructor(){this.q_=new Qe(Q.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):re():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},$a=class t{constructor(e,n,r,s,i,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,s,i){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,bm.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}};var tv=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},nv=class{constructor(){this.queries=new Nr(e=>DN(e),mu),this.onlineState="Unknown",this.z_=new Set}};function Gv(t,e){return y(this,null,function*(){let n=X(t),r=3,s=e.query,i=n.queries.get(s);i?!i.W_()&&e.G_()&&(r=2):(i=new tv,r=e.G_()?0:1);try{switch(r){case 0:i.K_=yield n.onListen(s,!0);break;case 1:i.K_=yield n.onListen(s,!1);break;case 2:yield n.onFirstRemoteStoreListen(s)}}catch(o){let a=Ja(o,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.U_.push(e),e.j_(n.onlineState),i.K_&&e.H_(i.K_)&&Hv(n)})}function Kv(t,e){return y(this,null,function*(){let n=X(t),r=e.query,s=3,i=n.queries.get(r);if(i){let o=i.U_.indexOf(e);o>=0&&(i.U_.splice(o,1),i.U_.length===0?s=e.G_()?0:1:!i.W_()&&e.G_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Mq(t,e){let n=X(t),r=!1;for(let s of e){let i=s.query,o=n.queries.get(i);if(o){for(let a of o.U_)a.H_(s)&&(r=!0);o.K_=s}}r&&Hv(n)}function Fq(t,e,n){let r=X(t),s=r.queries.get(e);if(s)for(let i of s.U_)i.onError(n);r.queries.delete(e)}function Hv(t){t.z_.forEach(e=>{e.next()})}var rv,ZP;(ZP=rv||(rv={})).J_="default",ZP.Cache="cache";var au=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let s of e.docChanges)s.type!==3&&r.push(s);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==rv.Cache}};var sv=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var vm=class{constructor(e){this.serializer=e}Ps(e){return Rr(this.serializer,e)}Is(e){return e.metadata.exists?JN(this.serializer,e.document,!1):vt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return dt(e)}},iv=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CO(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=Pe.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new vm(this.serializer);for(let s of e)if(s.metadata.queries){let i=r.Ps(s.metadata.name);for(let o of s.metadata.queries){let a=(n.get(o)||_e()).add(i);n.set(o,a)}}return n}complete(){return y(this,null,function*(){let e=yield wq(this.localStore,new vm(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield xq(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function CO(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var wm=class{constructor(e){this.key=e}},xm=class{constructor(e){this.key=e}},Sm=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=_e(),this.mutatedKeys=_e(),this.Ia=PN(e),this.Ta=new bm(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Em,s=n?n.Ta:this.Ta,i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1,c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{let m=s.get(d),g=pu(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),x=!1;m&&g?m.data.isEqual(g.data)?b!==C&&(r.track({type:3,doc:g}),x=!0):this.Ra(m,g)||(r.track({type:2,doc:g}),x=!0,(c&&this.Ia(g,c)>0||l&&this.Ia(g,l)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),x=!0):m&&!g&&(r.track({type:1,doc:m}),x=!0,(c||l)&&(a=!0)),x&&(g?(o=o.add(g),i=C?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:i}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){let i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((d,f)=>function(g,b){let C=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return C(g)-C(b)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),s=s!=null&&s;let a=n&&!s?this.ma():[],c=this.Pa.size===0&&this.current&&!s?1:0,l=c!==this.ha;return this.ha=c,o.length!==0||l?{snapshot:new $a(this.query,e.Ta,i,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Em,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=_e(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new xm(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new wm(r))}),n}pa(e){this.la=e.hs,this.Pa=_e();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return $a.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},ov=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},av=class{constructor(e){this.key=e,this.wa=!1}},cv=class{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Nr(a=>DN(a),mu),this.Da=new Map,this.Ca=new Set,this.va=new Qe(Q.comparator),this.Fa=new Map,this.Ma=new su,this.xa={},this.Oa=new Map,this.Na=Va.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function Lq(t,e,n=!0){return y(this,null,function*(){let r=Lm(t),s,i=r.ba.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ya()):s=yield TO(r,e,n,!0),s})}function Bq(t,e){return y(this,null,function*(){let n=Lm(t);yield TO(n,e,!0,!1)})}function TO(t,e,n,r){return y(this,null,function*(){let s=yield Ua(t.localStore,fn(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current",a;return r&&(a=yield Wv(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Fm(t.remoteStore,s),a})}function Wv(t,e,n,r,s){return y(this,null,function*(){t.Ba=(f,m,g)=>function(C,x,N,U){return y(this,null,function*(){let j=x.view.da(N);j.Xi&&(j=yield hm(C.localStore,x.query,!1).then(({documents:T})=>x.view.da(T,j)));let H=U&&U.targetChanges.get(x.targetId),ae=U&&U.targetMismatches.get(x.targetId)!=null,le=x.view.applyChanges(j,C.isPrimaryClient,H,ae);return lv(C,x.targetId,le.fa),le.snapshot})}(t,f,m,g);let i=yield hm(t.localStore,e,!0),o=new Sm(e,i.hs),a=o.da(i.documents),c=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),l=o.applyChanges(a,t.isPrimaryClient,c);lv(t,n,l.fa);let d=new ov(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function Vq(t,e,n){return y(this,null,function*(){let r=X(t),s=r.ba.get(e),i=r.Da.get(s.targetId);if(i.length>1)return r.Da.set(s.targetId,i.filter(o=>!mu(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ja(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&qa(r.remoteStore,s.targetId),za(r,s.targetId)}).catch(ni))):(za(r,s.targetId),yield ja(r.localStore,s.targetId,!0))})}function Uq(t,e){return y(this,null,function*(){let n=X(t),r=n.ba.get(e),s=n.Da.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qa(n.remoteStore,r.targetId))})}function jq(t,e,n){return y(this,null,function*(){let r=Zv(t);try{let s=yield function(o,a){let c=X(o),l=et.now(),d=a.reduce((g,b)=>g.add(b.key),_e()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=wn(),C=_e();return c.os.getEntries(g,d).next(x=>{b=x,b.forEach((N,U)=>{U.isValidDocument()||(C=C.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,b)).next(x=>{f=x;let N=[];for(let U of a){let j=tq(U,f.get(U.key).overlayedDocument);j!=null&&N.push(new sr(U.key,j,xN(j.value.mapValue),st.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,N,a)}).next(x=>{m=x;let N=x.applyToLocalDocumentSet(f,C);return c.documentOverlayCache.saveOverlays(g,x.batchId,N)})}).then(()=>({batchId:m.batchId,changes:ON(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new Qe(pe)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(r,s.batchId,n),yield cs(r,s.changes),yield Xa(r.remoteStore)}catch(s){let i=Ja(s,"Failed to persist write");n.reject(i)}})}function IO(t,e){return y(this,null,function*(){let n=X(t);try{let r=yield Eq(n.localStore,e);e.targetChanges.forEach((s,i)=>{let o=n.Fa.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.wa=!0:s.modifiedDocuments.size>0?ce(o.wa):s.removedDocuments.size>0&&(ce(o.wa),o.wa=!1))}),yield cs(n,r,e)}catch(r){yield ni(r)}})}function JP(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let s=[];r.ba.forEach((i,o)=>{let a=o.view.j_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){let c=X(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let m of f.U_)m.j_(a)&&(l=!0)}),l&&Hv(c)}(r.eventManager,e),s.length&&r.Sa.h_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qq(t,e,n){return y(this,null,function*(){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let s=r.Fa.get(e),i=s&&s.key;if(i){let o=new Qe(Q.comparator);o=o.insert(i,vt.newNoDocument(i,ue.min()));let a=_e().add(i),c=new Jl(ue.min(),new Map,new Qe(pe),o,a);yield IO(r,c),r.va=r.va.remove(i),r.Fa.delete(e),Xv(r)}else yield ja(r.localStore,e,!1).then(()=>za(r,e,n)).catch(ni)})}function $q(t,e){return y(this,null,function*(){let n=X(t),r=e.batch.batchId;try{let s=yield bq(n.localStore,e);Yv(n,r,null),Qv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield cs(n,s)}catch(s){yield ni(s)}})}function zq(t,e,n){return y(this,null,function*(){let r=X(t);try{let s=yield function(o,a){let c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(ce(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);Yv(r,e,n),Qv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield cs(r,s)}catch(s){yield ni(s)}})}function Gq(t,e){return y(this,null,function*(){let n=X(t);si(n.remoteStore)||$("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=X(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let s=n.Oa.get(r)||[];s.push(e),n.Oa.set(r,s)}catch(r){let s=Ja(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}})}function Qv(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function Yv(t,e,n){let r=X(t),s=r.xa[r.currentUser.toKey()];if(s){let i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.xa[r.currentUser.toKey()]=s}}function za(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||RO(t,r)})}function RO(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(qa(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Xv(t))}function lv(t,e,n){for(let r of n)r instanceof wm?(t.Ma.addReference(r.key,e),Kq(t,r)):r instanceof xm?($("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||RO(t,r.key)):re()}function Kq(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||($("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Xv(t))}function Xv(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new Q(Pe.fromString(e)),r=t.Na.next();t.Fa.set(r,new av(n)),t.va=t.va.insert(n,r),Fm(t.remoteStore,new Ba(fn(Qa(n.path)),r,"TargetPurposeLimboResolution",Nn.oe))}}function cs(t,e,n){return y(this,null,function*(){let r=X(t),s=[],i=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let d=l&&!l.fromCache;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){s.push(l);let d=jE.Ki(c.targetId,l);i.push(d)}}))}),yield Promise.all(o),r.Sa.h_(s),yield function(c,l){return y(this,null,function*(){let d=X(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(l,m=>O.forEach(m.qi,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>O.forEach(m.Qi,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!ri(f))throw f;$("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let m=f.targetId;if(!f.fromCache){let g=d.ns.get(m),b=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(b);d.ns=d.ns.insert(m,C)}}})}(r.localStore,i))})}function Hq(t,e){return y(this,null,function*(){let n=X(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=yield mO(n.localStore,e);n.currentUser=e,function(i,o){i.Oa.forEach(a=>{a.forEach(c=>{c.reject(new q(F.CANCELLED,o))})}),i.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cs(n,r.us)}})}function Wq(t,e){let n=X(t),r=n.Fa.get(e);if(r&&r.wa)return _e().add(r.key);{let s=_e(),i=n.Da.get(e);if(!i)return s;for(let o of i){let a=n.ba.get(o);s=s.unionWith(a.view.Ea)}return s}}function Qq(t,e){return y(this,null,function*(){let n=X(t),r=yield hm(n.localStore,e.query,!0),s=e.view.pa(r);return n.isPrimaryClient&&lv(n,e.targetId,s.fa),s})}function Yq(t,e){return y(this,null,function*(){let n=X(t);return _O(n.localStore,e).then(r=>cs(n,r))})}function Xq(t,e,n,r){return y(this,null,function*(){let s=X(t),i=yield function(a,c){let l=X(a),d=X(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,c).next(m=>m?l.localDocuments.getDocuments(f,m):O.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?yield Xa(s.remoteStore):n==="acknowledged"||n==="rejected"?(Yv(s,e,r||null),Qv(s,e),function(a,c){X(X(a).mutationQueue).Mn(c)}(s.localStore,e)):re(),yield cs(s,i)):$("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Zq(t,e){return y(this,null,function*(){let n=X(t);if(Lm(n),Zv(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),s=yield eN(n,r.toArray());n.La=!0,yield JE(n.remoteStore,!0);for(let i of s)Fm(n.remoteStore,i)}else if(e===!1&&n.La!==!1){let r=[],s=Promise.resolve();n.Da.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(za(n,o),ja(n.localStore,o,!0))),qa(n.remoteStore,o)}),yield s,yield eN(n,r),function(o){let a=X(o);a.Fa.forEach((c,l)=>{qa(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new Qe(Q.comparator)}(n),n.La=!1,yield JE(n.remoteStore,!1)}})}function eN(t,e,n){return y(this,null,function*(){let r=X(t),s=[],i=[];for(let o of e){let a,c=r.Da.get(o);if(c&&c.length!==0){a=yield Ua(r.localStore,fn(c[0]));for(let l of c){let d=r.ba.get(l),f=yield Qq(r,d);f.snapshot&&i.push(f.snapshot)}}else{let l=yield yO(r.localStore,o);a=yield Ua(r.localStore,l),yield Wv(r,DO(l),o,!1,a.resumeToken)}s.push(a)}return r.Sa.h_(i),s})}function DO(t){return RN(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Jq(t){return function(n){return X(X(n).persistence).Bi()}(X(t).localStore)}function e$(t,e,n,r){return y(this,null,function*(){let s=X(t);if(s.La)return void $("SyncEngine","Ignoring unexpected query state notification.");let i=s.Da.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{let o=yield _O(s.localStore,kN(i[0])),a=Jl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Mt.EMPTY_BYTE_STRING);yield cs(s,o,a);break}case"rejected":yield ja(s.localStore,e,!0),za(s,e,r);break;default:re()}})}function t$(t,e,n){return y(this,null,function*(){let r=Lm(t);if(r.La){for(let s of e){if(r.Da.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){$("SyncEngine","Adding an already active target "+s);continue}let i=yield yO(r.localStore,s),o=yield Ua(r.localStore,i);yield Wv(r,DO(i),o.targetId,!1,o.resumeToken),Fm(r.remoteStore,o)}for(let s of n)r.Da.has(s)&&(yield ja(r.localStore,s,!1).then(()=>{qa(r.remoteStore,s),za(r,s)}).catch(ni))}})}function Lm(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qq.bind(null,e),e.Sa.h_=Mq.bind(null,e.eventManager),e.Sa.ka=Fq.bind(null,e.eventManager),e}function Zv(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$q.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zq.bind(null,e),e}function n$(t,e,n){let r=X(t);(function(i,o,a){return y(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(g,b){let C=X(g),x=dt(b.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",N=>C.$r.getBundleMetadata(N,b.id)).then(N=>!!N&&N.createTime.compareTo(x)>=0)}(i.localStore,c))return yield o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(CO(c));let l=new iv(c,i.localStore,o.serializer),d=yield o.qa();for(;d;){let m=yield l._a(d);m&&a._updateProgress(m),d=yield o.qa()}let f=yield l.complete();return yield cs(i,f.ca,void 0),yield function(g,b){let C=X(g);return C.persistence.runTransaction("Save bundle","readwrite",x=>C.$r.saveBundleMetadata(x,b))}(i.localStore,c),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(c){return Kn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}var cu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=gu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return fO(this.persistence,new dm,e.initialUser,this.serializer)}createPersistence(e){return new lm(um.Hr,this.serializer)}createSharedClientState(e){return new pm}terminate(){return y(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Am=class t extends cu{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield Pc(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield Zv(this.Qa.syncEngine),yield Xa(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return fO(this.persistence,new dm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new CE(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new zb(n,this.persistence);return new $b(e.asyncQueue,r)}createPersistence(e){let n=jv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new UE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,EO(),Lf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new pm}},uv=class t extends Am{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield Pc(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof $l&&(this.sharedClientState.syncEngine={Zs:Xq.bind(null,n),Xs:e$.bind(null,n),eo:t$.bind(null,n),Bi:Jq.bind(null,n),Ys:Yq.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>y(this,null,function*(){yield Zq(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=EO();if(!$l.D(n))throw new q(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=jv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $l(n,e.asyncQueue,r,e.clientId,e.initialUser)}},lu=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hq.bind(null,this.syncEngine),yield JE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new nv}()}createDatastore(e){let n=gu(e.databaseInfo.databaseId),r=function(i){return new HE(i)}(e.databaseInfo);return function(i,o,a,c){return new YE(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new ZE(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>JP(this.syncEngine,n,0),function(){return gm.D()?new gm:new GE}())}createSyncEngine(e,n){return function(s,i,o,a,c,l,d){let f=new cv(s,i,o,a,c,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return y(this,null,function*(){var e;yield function(r){return y(this,null,function*(){let s=X(r);$("RemoteStore","RemoteStore shutting down."),s.M_.add(5),yield Ya(s),s.O_.shutdown(),s.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function tN(t,e=10240){let n=0;return{read(){return y(this,null,function*(){if(n<t.byteLength){let s={value:t.slice(n,n+e),done:!1};return n+=e,s}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ga=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):lt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var dv=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Et,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}qa(){return y(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return y(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let s=yield this.Ha(r);return new sv(JSON.parse(s),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return y(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return y(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var hv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(s,i){return y(this,null,function*(){let o=X(s),a={documents:i.map(f=>tu(o.serializer,f))},c=yield o.xo("BatchGetDocuments",o.serializer.databaseId,Pe.emptyPath(),a,i.length),l=new Map;c.forEach(f=>{let m=aq(o.serializer,f);l.set(m.key.toString(),m)});let d=[];return i.forEach(f=>{let m=l.get(f.toString());ce(!!m),d.push(m)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ei(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let s=Q.fromPath(r);this.mutations.push(new Yl(s,this.precondition(s)))}),yield function(r,s){return y(this,null,function*(){let i=X(r),o={writes:s.map(a=>nu(i.serializer,a))};yield i.Co("Commit",i.serializer.databaseId,Pe.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw re();n=ue.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ue.min())?st.exists(!1):st.updateTime(n):st.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ue.min()))throw new q(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return st.updateTime(n)}return st.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var fv=class{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.Za=r.maxAttempts,this.Yo=new ou(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>y(this,null,function*(){let e=new hv(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.nu(s)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!hu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!GN(n)}return!1}};var mv=class{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=Uf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,i=>y(this,null,function*(){$("FirestoreClient","Received user=",i.uid),yield this.authCredentialListener(i),this.user=i})),this.appCheckCredentials.start(r,i=>($("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ja(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Bf(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(s=>y(this,null,function*(){r.isEqual(s)||(yield mO(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function pv(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Jv(t);$("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>XP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>XP(e.remoteStore,s)),t._onlineComponents=e})}function kO(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Jv(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Bf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!kO(n))throw n;Kn("Error using user provided cache. Falling back to memory cache: "+n),yield Bf(t,new cu)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield Bf(t,new cu);return t._offlineComponents})}function Bm(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield pv(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield pv(t,new lu))),t._onlineComponents})}function PO(t){return Jv(t).then(e=>e.persistence)}function ew(t){return Jv(t).then(e=>e.localStore)}function NO(t){return Bm(t).then(e=>e.remoteStore)}function tw(t){return Bm(t).then(e=>e.syncEngine)}function r$(t){return Bm(t).then(e=>e.datastore)}function Ka(t){return y(this,null,function*(){let e=yield Bm(t),n=e.eventManager;return n.onListen=Lq.bind(null,e.syncEngine),n.onUnlisten=Vq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Bq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Uq.bind(null,e.syncEngine),n})}function s$(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield PO(t),n=yield NO(t);return e.setNetworkEnabled(!0),function(s){let i=X(s);return i.M_.delete(0),yu(i)}(n)}))}function i$(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield PO(t),n=yield NO(t);return e.setNetworkEnabled(!1),function(s){return y(this,null,function*(){let i=X(s);i.M_.add(0),yield Ya(i),i.N_.set("Offline")})}(n)}))}function o$(t,e){let n=new Et;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,i,o){return y(this,null,function*(){try{let a=yield function(l,d){let f=X(l);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ja(a,`Failed to get document '${i} from cache`);o.reject(c)}})}(yield ew(t),e,n)})),n.promise}function OO(t,e,n={}){let r=new Et;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,a,c,l){let d=new Ga({next:m=>{o.enqueueAndForget(()=>Kv(i,f));let g=m.docs.has(a);!g&&m.fromCache?l.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new au(Qa(a.path),d,{includeMetadataChanges:!0,ra:!0});return Gv(i,f)}(yield Ka(t),t.asyncQueue,e,n,r)})),r.promise}function a$(t,e){let n=new Et;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,i,o){return y(this,null,function*(){try{let a=yield hm(s,i,!0),c=new Sm(i,a.hs),l=c.da(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let c=Ja(a,`Failed to execute query '${i} against cache`);o.reject(c)}})}(yield ew(t),e,n)})),n.promise}function MO(t,e,n={}){let r=new Et;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,a,c,l){let d=new Ga({next:m=>{o.enqueueAndForget(()=>Kv(i,f)),m.fromCache&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new au(a,d,{includeMetadataChanges:!0,ra:!0});return Gv(i,f)}(yield Ka(t),t.asyncQueue,e,n,r)})),r.promise}function c$(t,e){let n=new Ga(e);return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,i){X(s).z_.add(i),i.next()}(yield Ka(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,i){X(s).z_.delete(i)}(yield Ka(t),n)}))}}function l$(t,e,n,r){let s=function(o,a){let c;return c=typeof o=="string"?HN().encode(o):o,function(d,f){return new dv(d,f)}(function(d,f){if(d instanceof Uint8Array)return tN(d,f);if(d instanceof ArrayBuffer)return tN(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,gu(e));t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){n$(yield tw(t),s,r)}))}function u$(t,e){return t.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,s){let i=X(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.$r.getNamedQuery(o,s))}(yield ew(t),e)}))}function FO(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nN=new Map;function nw(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rw(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rN(t){if(!Q.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sN(t){if(Q.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Ne(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Vm(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LO(t,e){if(e<=0)throw new q(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Cm=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},io=class{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Nb;switch(r.type){case"firstParty":return new Lb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=nN.get(n);r&&($("ComponentProvider","Removing Datastore"),nN.delete(n),r.terminate())}(this),Promise.resolve()}};function BO(t,e,n,r={}){var s;let i=(t=Ne(t,io))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Kn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=bt.MOCK_USER;else{a=iS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new bt(l)}t._authCredentials=new Ob(new Vf(a,c))}}var $t=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ge=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Dr=class t extends $t{constructor(e,n,r){super(e,n,Qa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new Q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function sw(t,e,...n){if(t=Ze(t),nw("collection","path",e),t instanceof io){let r=Pe.fromString(e,...n);return sN(r),new Dr(t,null,r)}{if(!(t instanceof Ge||t instanceof Dr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return sN(r),new Dr(t.firestore,null,r)}}function VO(t,e){if(t=Ne(t,io),nw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $t(t,null,function(r){return new rr(Pe.emptyPath(),r)}(e))}function _u(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=Uf.newId()),nw("doc","path",e),t instanceof io){let r=Pe.fromString(e,...n);return rN(r),new Ge(t,null,new Q(r))}{if(!(t instanceof Ge||t instanceof Dr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return rN(r),new Ge(t.firestore,t instanceof Dr?t.converter:null,new Q(r))}}function iw(t,e){return t=Ze(t),e=Ze(e),(t instanceof Ge||t instanceof Dr)&&(e instanceof Ge||e instanceof Dr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ow(t,e){return t=Ze(t),e=Ze(e),t instanceof $t&&e instanceof $t&&t.firestore===e.firestore&&mu(t._query,e._query)&&t.converter===e.converter}var gv=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ou(this,"async_queue_retry"),this.hu=()=>{let n=Lf();n&&$("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Lf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Lf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Et;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return y(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ri(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw lt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let s=ev.createAndSchedule(this,e,n,r,i=>this.Eu(i));return this._u.push(s),s}Pu(){this.au&&re()}verifyOperationInProgress(){}du(){return y(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function yv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let s=n;for(let i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}var _v=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Et,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var UO=-1,Xe=class extends io{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new gv}(),this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||jO(this),this._firestoreClient.terminate()}};function Ct(t){return t._firestoreClient||jO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function jO(t){var e,n,r;let s=t._freezeSettings(),i=function(a,c,l,d){return new Gb(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,FO(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new mv(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function qO(t,e){XO(t=Ne(t,Xe));let n=Ct(t);if(n._uninitializedComponentsProvider)throw new q(F.FAILED_PRECONDITION,"SDK cache is already specified.");Kn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),s=new lu;return zO(n,s,new Am(s,r.cacheSizeBytes,e?.forceOwnership))}function $O(t){XO(t=Ne(t,Xe));let e=Ct(t);if(e._uninitializedComponentsProvider)throw new q(F.FAILED_PRECONDITION,"SDK cache is already specified.");Kn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new lu;return zO(e,r,new uv(r,n.cacheSizeBytes))}function zO(t,e,n){let r=new Et;return t.asyncQueue.enqueue(()=>y(this,null,function*(){try{yield Bf(t,n),yield pv(t,e),r.resolve()}catch(s){let i=s;if(!kO(i))throw i;Kn("Error enabling indexeddb cache. Falling back to memory cache: "+i),r.reject(i)}})).then(()=>r.promise)}function GO(t){if(t._initialized&&!t._terminated)throw new q(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Et;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!Hs.D())return Promise.resolve();let s=r+"main";yield Hs.delete(s)})}(jv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function KO(t){return function(n){let r=new Et;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Gq(yield tw(n),r)})),r.promise}(Ct(t=Ne(t,Xe)))}function HO(t){return s$(Ct(t=Ne(t,Xe)))}function WO(t){return i$(Ct(t=Ne(t,Xe)))}function QO(t,e){let n=Ct(t=Ne(t,Xe)),r=new _v;return l$(n,t._databaseId,e,r),r}function YO(t,e){return u$(Ct(t=Ne(t,Xe)),e).then(n=>n?new $t(t,null,n.query):null)}function XO(t){if(t._initialized||t._terminated)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Or=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Mt.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ir=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var os=class{constructor(e){this._methodName=e}};var oo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var d$=/^__.*__$/,bv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Js(e,this.data,n,this.fieldTransforms)}},Tm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new sr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function ZO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}var Im=class t{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.gu({path:r,yu:!1});return s.wu(e),s}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.gu({path:r,yu:!1});return s.mu(),s}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Rm(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(ZO(this.fu)&&d$.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Ev=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gu(e)}Fu(e,n,r,s=!1){return new Im({fu:e,methodName:n,vu:r,path:ut.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function uo(t){let e=t._freezeSettings(),n=gu(t._databaseId);return new Ev(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Um(t,e,n,r,s,i={}){let o=t.Fu(i.merge||i.mergeFields?2:0,e,n,s);lw("Data must be an object, but it was:",o,r);let a=tM(r,o),c,l;if(i.merge)c=new On(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){let d=[];for(let f of i.mergeFields){let m=Av(e,f,n);if(!o.contains(m))throw new q(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);rM(d,m)||d.push(m)}c=new On(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new bv(new nn(a),c,l)}var uu=class t extends os{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function JO(t,e,n){return new Im({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var vv=class t extends os{_toFieldTransform(e){return new no(e.path,new Xs)}isEqual(e){return e instanceof t}},wv=class t extends os{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=JO(this,e,!0),r=this.Mu.map(i=>ho(i,n)),s=new ss(r);return new no(e.path,s)}isEqual(e){return e instanceof t&&lg(this.Mu,e.Mu)}},xv=class t extends os{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=JO(this,e,!0),r=this.Mu.map(i=>ho(i,n)),s=new is(r);return new no(e.path,s)}isEqual(e){return e instanceof t&&lg(this.Mu,e.Mu)}},Sv=class t extends os{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Zs(e.serializer,BN(e.serializer,this.xu));return new no(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function aw(t,e,n,r){let s=t.Fu(1,e,n);lw("Data must be an object, but it was:",s,r);let i=[],o=nn.empty();lo(r,(c,l)=>{let d=uw(e,c,n);l=Ze(l);let f=s.Su(d);if(l instanceof uu)i.push(d);else{let m=ho(l,f);m!=null&&(i.push(d),o.set(d,m))}});let a=new On(i);return new Tm(o,a,s.fieldTransforms)}function cw(t,e,n,r,s,i){let o=t.Fu(1,e,n),a=[Av(e,r,n)],c=[s];if(i.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Av(e,i[m])),c.push(i[m+1]);let l=[],d=nn.empty();for(let m=a.length-1;m>=0;--m)if(!rM(l,a[m])){let g=a[m],b=c[m];b=Ze(b);let C=o.Su(g);if(b instanceof uu)l.push(g);else{let x=ho(b,C);x!=null&&(l.push(g),d.set(g,x))}}let f=new On(l);return new Tm(d,f,o.fieldTransforms)}function eM(t,e,n,r=!1){return ho(n,t.Fu(r?4:3,e))}function ho(t,e){if(nM(t=Ze(t)))return lw("Unsupported field value:",e,t),tM(t,e);if(t instanceof os)return function(r,s){if(!ZO(s.fu))throw s.Du(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${r._methodName}() is not currently supported inside arrays`);let i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,s){let i=[],o=0;for(let a of r){let c=ho(a,s.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let i=et.fromDate(r);return{timestampValue:La(s.serializer,i)}}if(r instanceof et){let i=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:La(s.serializer,i)}}if(r instanceof oo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Or)return{bytesValue:WN(s.serializer,r._byteString)};if(r instanceof Ge){let i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bv(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Du(`Unsupported field value: ${Vm(r)}`)}(t,e)}function tM(t,e){let n={};return EN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(t,(r,s)=>{let i=ho(s,e.pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function nM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof oo||t instanceof Or||t instanceof Ge||t instanceof os)}function lw(t,e,n){if(!nM(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){let r=Vm(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Av(t,e,n){if((e=Ze(e))instanceof ir)return e._internalPath;if(typeof e=="string")return uw(t,e);throw Rm("Field path arguments must be of type string or ",t,!1,void 0,n)}var h$=new RegExp("[~\\*/\\[\\]]");function uw(t,e,n){if(e.search(h$)>=0)throw Rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ir(...e.split("."))._internalPath}catch{throw Rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rm(t,e,n,r,s){let i=r&&!r.isEmpty(),o=s!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(F.INVALID_ARGUMENT,a+t+c)}function rM(t,e){return t.some(n=>n.isEqual(e))}var ao=class{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Cv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Cv=class extends ao{data(){return super.data()}};function jm(t,e){return typeof e=="string"?uw(t,e):e instanceof ir?e._internalPath:e._delegate._internalPath}function sM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var du=class{},co=class extends du{};function ls(t,e,...n){let r=[];e instanceof du&&r.push(e),r=r.concat(n),function(i){let o=i.filter(c=>c instanceof Tv).length,a=i.filter(c=>c instanceof Dm).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let s of r)t=s._apply(t);return t}var Dm=class t extends co{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return mM(e._query,n),new $t(e.firestore,e.converter,sE(e._query,n))}_parse(e){let n=uo(e.firestore);return function(i,o,a,c,l,d,f){let m;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){oN(f,d);let g=[];for(let b of f)g.push(iN(c,i,b));m={arrayValue:{values:g}}}else m=iN(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||oN(f,d),m=eM(a,o,f,d==="in"||d==="not-in");return Re.create(l,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function iM(t,e,n){let r=e,s=jm("where",t);return Dm._create(s,r,n)}var Tv=class t extends du{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s,a=i.getFlattenedFilters();for(let c of a)mM(o,c),o=sE(o,c)}(e._query,n),new $t(e.firestore,e.converter,sE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Iv=class t extends co{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(s,i,o){if(s.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eo(i,o)}(e._query,this._field,this._direction);return new $t(e.firestore,e.converter,function(s,i){let o=s.explicitOrderBy.concat([i]);return new rr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}};function oM(t,e="asc"){let n=e,r=jm("orderBy",t);return Iv._create(r,n)}var km=class t extends co{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new $t(e.firestore,e.converter,Yf(e._query,this._limit,this._limitType))}};function aM(t){return LO("limit",t),km._create("limit",t,"F")}function cM(t){return LO("limitToLast",t),km._create("limitToLast",t,"L")}var Pm=class t extends co{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=fM(e,this.type,this._docOrFields,this._inclusive);return new $t(e.firestore,e.converter,function(s,i){return new rr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}};function lM(...t){return Pm._create("startAt",t,!0)}function uM(...t){return Pm._create("startAfter",t,!1)}var Nm=class t extends co{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=fM(e,this.type,this._docOrFields,this._inclusive);return new $t(e.firestore,e.converter,function(s,i){return new rr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}};function dM(...t){return Nm._create("endBefore",t,!1)}function hM(...t){return Nm._create("endAt",t,!0)}function fM(t,e,n,r){if(n[0]=Ze(n[0]),n[0]instanceof ao)return function(i,o,a,c,l){if(!c)throw new q(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Ra(i))if(f.field.isKeyField())d.push(Ji(o,c.key));else{let m=c.data.field(f.field);if(Mm(m))throw new q(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let g=f.field.canonicalString();throw new q(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(m)}return new Pr(d,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let s=uo(t.firestore);return function(o,a,c,l,d,f){let m=o.explicitOrderBy;if(d.length>m.length)throw new q(F.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let b=0;b<d.length;b++){let C=d[b];if(m[b].field.isKeyField()){if(typeof C!="string")throw new q(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!Fv(o)&&C.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);let x=o.path.child(Pe.fromString(C));if(!Q.isDocumentKey(x))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let N=new Q(x);g.push(Ji(a,N))}else{let x=eM(c,l,C);g.push(x)}}return new Pr(g,f)}(t._query,t.firestore._databaseId,s,e,n,r)}}function iN(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fv(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Pe.fromString(n));if(!Q.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ji(t,new Q(r))}if(n instanceof Ge)return Ji(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vm(n)}.`)}function oN(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mM(t,e){let n=function(s,i){for(let o of s)for(let a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ha=class{convertValue(e,n="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return lo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new oo(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Ov(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){let n=rs(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Pe.fromString(e);ce(iO(r));let s=new Qs(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||lt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}};function qm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Rv=class extends Ha{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}};var ns=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Wn=class extends ao{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Gs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Gs=class extends Wn{data(e={}){return super.data(e)}},or=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ns(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gs(this._firestore,this._userDataWriter,r.key,r,new ns(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{let c=new Gs(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ns(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{let c=new Gs(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ns(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:f$(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function f$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}function dw(t,e){return t instanceof Wn&&e instanceof Wn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof or&&e instanceof or&&t._firestore===e._firestore&&ow(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function pM(t){t=Ne(t,Ge);let e=Ne(t.firestore,Xe);return OO(Ct(e),t._key).then(n=>pw(e,t,n))}var as=class extends Ha{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}};function gM(t){t=Ne(t,Ge);let e=Ne(t.firestore,Xe),n=Ct(e),r=new as(e);return o$(n,t._key).then(s=>new Wn(e,r,t._key,s,new ns(s!==null&&s.hasLocalMutations,!0),t.converter))}function yM(t){t=Ne(t,Ge);let e=Ne(t.firestore,Xe);return OO(Ct(e),t._key,{source:"server"}).then(n=>pw(e,t,n))}function _M(t){t=Ne(t,$t);let e=Ne(t.firestore,Xe),n=Ct(e),r=new as(e);return sM(t._query),MO(n,t._query).then(s=>new or(e,r,t,s))}function bM(t){t=Ne(t,$t);let e=Ne(t.firestore,Xe),n=Ct(e),r=new as(e);return a$(n,t._query).then(s=>new or(e,r,t,s))}function EM(t){t=Ne(t,$t);let e=Ne(t.firestore,Xe),n=Ct(e),r=new as(e);return MO(n,t._query,{source:"server"}).then(s=>new or(e,r,t,s))}function hw(t,e,n){t=Ne(t,Ge);let r=Ne(t.firestore,Xe),s=qm(t.converter,e,n);return ec(r,[Um(uo(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,st.none())])}function fw(t,e,n,...r){t=Ne(t,Ge);let s=Ne(t.firestore,Xe),i=uo(s),o;return o=typeof(e=Ze(e))=="string"||e instanceof ir?cw(i,"updateDoc",t._key,e,n,r):aw(i,"updateDoc",t._key,e),ec(s,[o.toMutation(t._key,st.exists(!0))])}function vM(t){return ec(Ne(t.firestore,Xe),[new ei(t._key,st.none())])}function wM(t,e){let n=Ne(t.firestore,Xe),r=_u(t),s=qm(t.converter,e);return ec(n,[Um(uo(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,st.exists(!1))]).then(()=>r)}function mw(t,...e){var n,r,s;t=Ze(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||yv(e[o])||(i=e[o],o++);let a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(yv(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,l,d;if(t instanceof Ge)l=Ne(t.firestore,Xe),d=Qa(t._key.path),c={next:f=>{e[o]&&e[o](pw(l,t,f))},error:e[o+1],complete:e[o+2]};else{let f=Ne(t,$t);l=Ne(f.firestore,Xe),d=f._query;let m=new as(l);c={next:g=>{e[o]&&e[o](new or(l,m,f,g))},error:e[o+1],complete:e[o+2]},sM(t._query)}return function(m,g,b,C){let x=new Ga(C),N=new au(g,x,b);return m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Gv(yield Ka(m),N)})),()=>{x.$a(),m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Kv(yield Ka(m),N)}))}}(Ct(l),d,a,c)}function xM(t,e){return c$(Ct(t=Ne(t,Xe)),yv(e)?e:{next:e})}function ec(t,e){return function(r,s){let i=new Et;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return jq(yield tw(r),s,i)})),i.promise}(Ct(t),e)}function pw(t,e,n){let r=n.docs.get(e._key),s=new as(t);return new Wn(t,s,e._key,r,new ns(n.hasPendingWrites,n.fromCache),e.converter)}var m$={maxAttempts:5};var Om=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=uo(e)}set(e,n,r){this._verifyNotCommitted();let s=$s(e,this._firestore),i=qm(s.converter,n,r),o=Um(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,st.none())),this}update(e,n,r,...s){this._verifyNotCommitted();let i=$s(e,this._firestore),o;return o=typeof(n=Ze(n))=="string"||n instanceof ir?cw(this._dataReader,"WriteBatch.update",i._key,n,r,s):aw(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,st.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=$s(e,this._firestore);return this._mutations=this._mutations.concat(new ei(n._key,st.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function $s(t,e){if((t=Ze(t)).firestore!==e)throw new q(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Dv=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=uo(n)}get(n){let r=$s(n,this._firestore),s=new Rv(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return re();let o=i[0];if(o.isFoundDocument())return new ao(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new ao(this._firestore,s,r._key,null,r.converter);throw re()})}set(n,r,s){let i=$s(n,this._firestore),o=qm(i.converter,r,s),a=Um(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){let o=$s(n,this._firestore),a;return a=typeof(r=Ze(r))=="string"||r instanceof ir?cw(this._dataReader,"Transaction.update",o._key,r,s,i):aw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=$s(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=$s(e,this._firestore),r=new as(this._firestore);return super.get(e).then(s=>new Wn(this._firestore,r,n._key,s._document,new ns(!1,!1),n.converter))}};function SM(t,e,n){t=Ne(t,Xe);let r=Object.assign(Object.assign({},m$),n);return function(i){if(i.maxAttempts<1)throw new q(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){let c=new Et;return i.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let l=yield r$(i);new fv(i.asyncQueue,l,a,o,c).Xa()})),c.promise}(Ct(t),s=>e(new Dv(t,s)),r)}function AM(){return new uu("deleteField")}function CM(){return new vv("serverTimestamp")}function TM(...t){return new wv("arrayUnion",t)}function IM(...t){return new xv("arrayRemove",t)}function RM(t){return new Sv("increment",t)}(function(e,n=!0){(function(s){Wa=s})(cS),Gc(new wi("firestore",(r,{instanceIdentifier:s,options:i})=>{let o=r.getProvider("app").getImmediate(),a=new Xe(new Mb(r.getProvider("auth-internal")),new Vb(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qs(l.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ss(aP,"4.6.3",e),Ss(aP,"4.6.3","esm2017")})();var p$="@firebase/firestore-compat",g$="0.3.32";function vw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function DM(){if(typeof Uint8Array>"u")throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function kM(){if(!vN())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $m=class t{constructor(e){this._delegate=e}static fromBase64String(e){return kM(),new t(Or.fromBase64String(e))}static fromUint8Array(e){return DM(),new t(Or.fromUint8Array(e))}toBase64(){return kM(),this._delegate.toBase64()}toUint8Array(){return DM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function gw(t){return y$(t,["next","error","complete"])}function y$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var yw=class{enableIndexedDbPersistence(e,n){return qO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return $O(e._delegate)}clearIndexedDbPersistence(e){return GO(e._delegate)}},zm=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Kn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){BO(this._delegate,e,n,r)}enableNetwork(){return HO(this._delegate)}disableNetwork(){return WO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rw("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return KO(this._delegate)}onSnapshotsInSync(e){return xM(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rc(this,sw(this._delegate,e))}catch(n){throw mn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Mr(this,_u(this._delegate,e))}catch(n){throw mn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new go(this,VO(this._delegate,e))}catch(n){throw mn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return SM(this._delegate,n=>e(new Gm(this,n)))}batch(){return Ct(this._delegate),new Km(new Om(this._delegate,e=>ec(this._delegate,e)))}loadBundle(e){return QO(this._delegate,e)}namedQuery(e){return YO(this._delegate,e).then(n=>n?new go(this,n):null)}},tc=class extends Ha{constructor(e){super(),this.firestore=e}convertBytes(e){return new $m(new Or(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Mr.forKey(n,this.firestore,null)}};function _$(t){aN(t)}var Gm=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new tc(e)}get(e){let n=fo(e);return this._delegate.get(n).then(r=>new mo(this._firestore,new Wn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let s=fo(e);return r?(vw("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){let i=fo(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){let n=fo(e);return this._delegate.delete(n),this}},Km=class{constructor(e){this._delegate=e}set(e,n,r){let s=fo(e);return r?(vw("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){let i=fo(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){let n=fo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},nc=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Gs(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new po(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new t(e,new tc(e),n),s.set(n,i)),i}};nc.INSTANCES=new WeakMap;var Mr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new tc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ge(n._delegate,r,new Q(e)))}static forKey(e,n,r){return new t(n,new Ge(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new rc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rc(this.firestore,sw(this._delegate,e))}catch(n){throw mn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ze(e),e instanceof Ge?iw(this._delegate,e):!1}set(e,n){n=vw("DocumentReference.set",n);try{return n?hw(this._delegate,e,n):hw(this._delegate,e)}catch(r){throw mn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?fw(this._delegate,e):fw(this._delegate,e,n,...r)}catch(s){throw mn(s,"updateDoc()","DocumentReference.update()")}}delete(){return vM(this._delegate)}onSnapshot(...e){let n=PM(e),r=NM(e,s=>new mo(this.firestore,new Wn(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return mw(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=gM(this._delegate):e?.source==="server"?n=yM(this._delegate):n=pM(this._delegate),n.then(r=>new mo(this.firestore,new Wn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(nc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function mn(t,e,n){return t.message=t.message.replace(e,n),t}function PM(t){for(let e of t)if(typeof e=="object"&&!gw(e))return e;return{}}function NM(t,e){var n,r;let s;return gw(t[0])?s=t[0]:gw(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:i=>{s.next&&s.next(e(i))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}var mo=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Mr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return dw(this._delegate,e._delegate)}},po=class extends mo{data(e){let n=this._delegate.data(e);return this._delegate._converter||cN(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},go=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new tc(e)}where(e,n,r){try{return new t(this.firestore,ls(this._delegate,iM(e,n,r)))}catch(s){throw mn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,ls(this._delegate,oM(e,n)))}catch(r){throw mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,ls(this._delegate,aM(e)))}catch(n){throw mn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,ls(this._delegate,cM(e)))}catch(n){throw mn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,ls(this._delegate,lM(...e)))}catch(n){throw mn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,ls(this._delegate,uM(...e)))}catch(n){throw mn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,ls(this._delegate,dM(...e)))}catch(n){throw mn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,ls(this._delegate,hM(...e)))}catch(n){throw mn(n,"endAt()","Query.endAt()")}}isEqual(e){return ow(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=bM(this._delegate):e?.source==="server"?n=EM(this._delegate):n=_M(this._delegate),n.then(r=>new bu(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=PM(e),r=NM(e,s=>new bu(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return mw(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(nc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},_w=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new po(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},bu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new go(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new po(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new _w(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new po(this._firestore,r))})}isEqual(e){return dw(this._delegate,e._delegate)}},rc=class t extends go{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Mr(this.firestore,e):null}doc(e){try{return e===void 0?new Mr(this.firestore,_u(this._delegate)):new Mr(this.firestore,_u(this._delegate,e))}catch(n){throw mn(n,"doc()","CollectionReference.doc()")}}add(e){return wM(this._delegate,e).then(n=>new Mr(this.firestore,n))}isEqual(e){return iw(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(nc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function fo(t){return Ne(t,Ge)}var bw=class t{constructor(...e){this._delegate=new ir(...e)}static documentId(){return new t(ut.keyField().canonicalString())}isEqual(e){return e=Ze(e),e instanceof ir?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Ew=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=CM();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=AM();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=TM(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=IM(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=RM(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var b$={Firestore:zm,GeoPoint:oo,Timestamp:et,Blob:$m,Transaction:Gm,WriteBatch:Km,DocumentReference:Mr,DocumentSnapshot:mo,Query:go,QueryDocumentSnapshot:po,QuerySnapshot:bu,CollectionReference:rc,FieldPath:bw,FieldValue:Ew,setLogLevel:_$,CACHE_SIZE_UNLIMITED:UO};function E$(t,e){t.INTERNAL.registerComponent(new wi("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},b$)))}function v$(t){E$(t,(e,n)=>new zm(e,n,new yw)),t.registerVersion(p$,g$)}v$(yn);function w$(t,e=sd){return new Ae(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function OM(t,e){return w$(t,e)}function x$(t,e){return OM(t,e).pipe(dr(void 0),ud(),ie(n=>{let[r,s]=n;return s.exists?r?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}}))}function Sw(t,e){return OM(t,e).pipe(ie(n=>({payload:n,type:"query"})))}var Hm=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:s,query:i}=LM(r,n);return new Qm(s,i,this.afs)}snapshotChanges(){return x$(this.ref,this.afs.schedulers.outsideAngular).pipe(_n)}valueChanges(e={}){return this.snapshotChanges().pipe(ie(({payload:n})=>e.idField?z(E({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Ve(this.ref.get(e)).pipe(_n)}};function Wm(t,e){return Sw(t,e).pipe(dr(void 0),ud(),ie(n=>{let[r,s]=n,i=s.payload.docChanges(),o=i.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((a,c)=>{let l=i.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function MM(t,e,n){return Wm(t,n).pipe(Io((r,s)=>S$(r,s.map(i=>i.payload),e),[]),ld(),ie(r=>r.map(s=>({type:s.type,payload:s}))))}function S$(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=A$(t,r))}),t}function ww(t,e,n,...r){let s=t.slice();return s.splice(e,n,...r),s}function A$(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return ww(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return ww(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ww(t,e.oldIndex,1);break}return t}function FM(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Qm=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Wm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ie(r=>r.filter(s=>e.indexOf(s.type)>-1)))),n.pipe(dr(void 0),ud(),Ye(([r,s])=>s.length>0||!r),ie(([,r])=>r),_n)}auditTrail(e){return this.stateChanges(e).pipe(Io((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=FM(e);return MM(this.query,n,this.afs.schedulers.outsideAngular).pipe(_n)}valueChanges(e={}){return Sw(this.query,this.afs.schedulers.outsideAngular).pipe(ie(n=>n.payload.docs.map(r=>e.idField?z(E({},r.data()),{[e.idField]:r.id}):r.data())),_n)}get(e){return Ve(this.query.get(e)).pipe(_n)}add(e){return this.ref.add(e)}doc(e){return new Hm(this.ref.doc(e),this.afs)}},xw=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Wm(this.query,this.afs.schedulers.outsideAngular).pipe(_n):Wm(this.query,this.afs.schedulers.outsideAngular).pipe(ie(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ye(n=>n.length>0),_n)}auditTrail(e){return this.stateChanges(e).pipe(Io((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=FM(e);return MM(this.query,n,this.afs.schedulers.outsideAngular).pipe(_n)}valueChanges(e={}){return Sw(this.query,this.afs.schedulers.outsideAngular).pipe(ie(r=>r.payload.docs.map(s=>e.idField?E({[e.idField]:s.id},s.data()):s.data())),_n)}get(e){return Ve(this.query.get(e)).pipe(_n)}},C$=new se("angularfire2.enableFirestorePersistence"),T$=new se("angularfire2.firestore.persistenceSettings"),I$=new se("angularfire2.firestore.settings"),R$=new se("angularfire2.firestore.use-emulator");function LM(t,e=n=>n){return{query:e(t),ref:t}}var BM=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,s,i,o,a,c,l,d,f,m,g,b,C,x,N,U){this.schedulers=c;let j=ol(n,a,r),H=d;f&&hy(j,a,m,b,C,x,g,N),[this.firestore,this.persistenceEnabled$]=Kd(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let ae=a.runOutsideAngular(()=>j.firestore());if(i&&ae.settings(i),H&&ae.useEmulator(...H),s&&!xs(o)){let le=()=>{try{return Ve(ae.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(T){return typeof console<"u"&&console.warn(T),J(!1)}};return[ae,a.runOutsideAngular(le)]}else return[ae,J(!1)]},[i,H,s])}collection(n,r){let s;typeof n=="string"?s=this.firestore.collection(n):s=n;let{ref:i,query:o}=LM(s,r),a=this.schedulers.ngZone.run(()=>i);return new Qm(a,o,this)}collectionGroup(n,r){let s=r||(o=>o),i=this.firestore.collectionGroup(n);return new xw(s(i),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let s=this.schedulers.ngZone.run(()=>r);return new Hm(s,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(L(Qo),L(Yo,8),L(C$,8),L(I$,8),L(xt),L(we),L(zd),L(T$,8),L(R$,8),L(fy,8),L(oy,8),L(ay,8),L(cy,8),L(ly,8),L(uy,8),L(dy,8),L(Ii,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var VM=(()=>{let e=class e{constructor(r){this.dbService=r}saveWebSettingToDb(r){return r.id="settings",this.dbService.update(It.WebSettings,r)}saveDigitalVisionDataToDb(r){return r.id="digital-vision-data",this.dbService.update(It.DigitalVisionData,r)}saveTrsDataToDb(r){return r.id="trs-data",this.dbService.update(It.TrsData,r)}saveRfidDataToDb(r){return r.id="rfid-data",this.dbService.update(It.RfidData,r)}getWebSettings(){return this.dbService.getByID(It.WebSettings,"settings")}saveNewsToDb(r){return this.dbService.clear(It.News).pipe(xe(()=>{let s=r.map(i=>this.dbService.add(It.News,i));return To(s)}))}getNews(){return this.dbService.getAll(It.News)}getDigitalVisionData(){return this.dbService.getByID(It.DigitalVisionData,"digital-vision-data")}getTrsData(){return this.dbService.getByID(It.TrsData,"trs-data")}getRfidData(){return this.dbService.getByID(It.RfidData,"rfid-data")}};e.\u0275fac=function(s){return new(s||e)(L(my))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gge=(()=>{let e=class e{constructor(r,s){this.db=r,this.indexedDbService=s,this.webSettings={email:"",phone:"",address:"",workHours:""},this.digitalVisionProduct={title:"",description:"",subDescription:"",productList:[],featuredImageUrl:"",featuredVideo:""},this.rfidProduct={title:"",description:"",subDescription:"",productList:[],featuredImageUrl:"",featuredVideo:""},this.trsProduct={title:"",description:"",subDescription:"",productList:[],featuredImageUrl:"",featuredVideo:""},this.news=[]}uploadFile2(r){return y(this,null,function*(){let s=br.cloudflareR2AccessKeyId,i=br.cloudflareR2SecretAccessKey,o=br.cloudflareR2BucketName,a=br.endpoint,c=new Af({region:"auto",endpoint:a,credentials:{accessKeyId:s,secretAccessKey:i}}),l={Bucket:o,Key:r.name,Body:r,ContentType:this.getContentType(r.name)},d=new Cf(l);return yield c.send(d)})}convertFileToBase64(r){return new Promise(s=>{let i=new FileReader;i.readAsDataURL(r),i.onload=()=>{let o=i.result;s({body:{imageUrl:o}})}})}getDataFromCloudAndSaveToIndexedDb(){return To({webSettings:this.getWebSettingsAndSaveToDb(),news:this.getNewsAndSaveToDb(),digitalVision:this.getDigitalVisionProductDataAndSaveToDb(),rfid:this.getRfidProductDataAndSaveToDb(),trs:this.getTrsProductDataAndSaveToDb()})}getDataFromIndexedDb(){return lr([this.getWebSettingsFromIndexedDb(),this.getNewsFromIndexedDb(),this.getDigitalVisionDataFromIndexedDb(),this.getTrsDataFromIndexedDb(),this.getRfidDataFromIndexedDb()])}saveWebSettings(r){return this.db.collection(ye).doc("web-setting").set(r,{merge:!0})}getWebSettings(){return this.db.collection(ye).doc("web-setting").valueChanges().pipe(ge({next:r=>{this.webSettings=r}}))}getWebSettingsAndSaveToDb(){return this.db.collection(ye).doc("web-setting").get().pipe(xe(r=>(this.webSettings=r.data(),this.webSettings?this.indexedDbService.saveWebSettingToDb(this.webSettings):J(!0))))}getWebSettingsFromIndexedDb(){return this.indexedDbService.getWebSettings().pipe(ge(r=>{this.webSettings=r}))}getProjectSetting(){return this.db.collection(ye).doc("project-setting").valueChanges().pipe(ge({next:r=>{r&&(br.cloudflareAccountId=r.cloudflareAccountId,br.cloudflareR2AccessKeyId=r.cloudflareR2AccessKeyId,br.cloudflareR2SecretAccessKey=r.cloudflareR2SecretAccessKey,br.cloudflareR2BucketName=r.cloudflareR2BucketName,br.endpoint=r.endpoint)}}))}saveProjectSettings(r){return this.db.collection(ye).doc("project-setting").set(r,{merge:!0})}getContentType(r){return r.endsWith(".pdf")?"application/pdf":r.endsWith("doc")?"application/msword":r.endsWith("docx")?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":"application/octet-stream"}saveDigitalVisionData(r){return this.db.collection(ye).doc("digital-vision-data").set(r,{merge:!0})}saveRfidData(r){return this.db.collection(ye).doc("rfid-data").set(r,{merge:!0})}saveTrsData(r){return this.db.collection(ye).doc("trs-data").set(r,{merge:!0})}getDigitalVisionProductDataAndSaveToDb(){return this.db.collection(ye).doc("digital-vision-data").get().pipe(xe(r=>(this.digitalVisionProduct=r.data(),this.db.collection(ye).doc("digitalVisionProductList").collection("data").get().pipe(xe(s=>(this.digitalVisionProduct.productList=s.docs.map(i=>{let o=i.data(),a=i.id;return E({id:a},o)}).sort((i,o)=>i.priority-o.priority),this.indexedDbService.saveDigitalVisionDataToDb(this.digitalVisionProduct)))))))}getTrsProductDataAndSaveToDb(){return this.db.collection(ye).doc("trs-data").get().pipe(xe(r=>(this.trsProduct=r.data(),this.db.collection(ye).doc("trsProductList").collection("data").get().pipe(xe(s=>(this.trsProduct.productList=s.docs.map(i=>{let o=i.data(),a=i.id;return E({id:a},o)}).sort((i,o)=>i.priority-o.priority),this.indexedDbService.saveTrsDataToDb(this.trsProduct)))))))}getRfidProductDataAndSaveToDb(){return this.db.collection(ye).doc("rfid-data").get().pipe(xe(r=>(this.rfidProduct=r.data(),this.db.collection(ye).doc("rfidProductList").collection("data").get().pipe(xe(s=>(this.rfidProduct.productList=s.docs.map(i=>{let o=i.data(),a=i.id;return E({id:a},o)}).sort((i,o)=>i.priority-o.priority),this.indexedDbService.saveRfidDataToDb(this.rfidProduct)))))))}getDigitalVisionProductData(){return this.db.collection(ye).doc("digital-vision-data").valueChanges().pipe(ge({next:r=>{this.digitalVisionProduct=r}}),xe(()=>this.db.collection(ye).doc("digitalVisionProductList").collection("data").snapshotChanges().pipe(ie(r=>r.map(s=>{let i=s.payload.doc.data(),o=s.payload.doc.id;return E({id:o},i)}))).pipe(ge({next:r=>{this.digitalVisionProduct.productList=r}}))))}getRfidProductData(){return this.db.collection(ye).doc("rfid-data").valueChanges().pipe(ge({next:r=>{this.rfidProduct=r}}),xe(()=>this.db.collection(ye).doc("rfidProductList").collection("data").snapshotChanges().pipe(ie(r=>r.map(s=>{let i=s.payload.doc.data(),o=s.payload.doc.id;return E({id:o},i)}))).pipe(ge({next:r=>{this.rfidProduct&&(this.rfidProduct.productList=r)}}))))}getTrsProductData(){return this.db.collection(ye).doc("trs-data").valueChanges().pipe(ge({next:r=>{this.trsProduct=r}}),xe(()=>this.db.collection(ye).doc("trsProductList").collection("data").snapshotChanges().pipe(ie(r=>r.map(s=>{let i=s.payload.doc.data(),o=s.payload.doc.id;return E({id:o},i)}))).pipe(ge({next:r=>{this.trsProduct&&(this.trsProduct.productList=r)}}))))}saveDigitalVisionProduct(r){return r.id?this.db.collection(ye).doc("digitalVisionProductList").collection("data").doc(r.id).update(r):this.db.collection(ye).doc("digitalVisionProductList").collection("data").add(r)}saveRfidProduct(r){return r.id?this.db.collection(ye).doc("rfidProductList").collection("data").doc(r.id).update(r):this.db.collection(ye).doc("rfidProductList").collection("data").add(r)}saveTrsProduct(r){return r.id?this.db.collection(ye).doc("trsProductList").collection("data").doc(r.id).update(r):this.db.collection(ye).doc("trsProductList").collection("data").add(r)}toggleVisibleDigitalVisionProduct(r){return this.db.collection(ye).doc("digitalVisionProductList").collection("data").doc(r.id).update({active:!r.active})}toggleVisibleRfidProduct(r){return this.db.collection(ye).doc("rfidProductList").collection("data").doc(r.id).update({active:!r.active})}toggleVisibleTrsProduct(r){return this.db.collection(ye).doc("trsProductList").collection("data").doc(r.id).update({active:!r.active})}deleteDigitalVisionProduct(r){return this.db.collection(ye).doc("digitalVisionProductList").collection("data").doc(r.id).delete()}deleteRfidProduct(r){return this.db.collection(ye).doc("rfidProductList").collection("data").doc(r.id).delete()}deleteTrsProduct(r){return this.db.collection(ye).doc("trsProductList").collection("data").doc(r.id).delete()}getNews(){return this.db.collection(ye).doc("news").collection("data").snapshotChanges().pipe(ie(r=>r.map(s=>{let i=s.payload.doc.data(),o=s.payload.doc.id;return E({id:o},i)}))).pipe(ge({next:r=>{this.news=r}}))}saveNews(r){return r.id?this.db.collection(ye).doc("news").collection("data").doc(r.id).update(r):this.db.collection(ye).doc("news").collection("data").add(r)}toggleVisibleNews(r){return this.db.collection(ye).doc("news").collection("data").doc(r.id).update({visibility:!r.visibility})}deleteNews(r){return this.db.collection(ye).doc("news").collection("data").doc(r.id).delete()}getNewsAndSaveToDb(){return this.db.collection(ye).doc("news").collection("data").get().pipe(xe(r=>(this.news=r.docs.map(s=>{let i=s.data(),o=s.id;return E({id:o},i)}),this.news.length>0?this.indexedDbService.saveNewsToDb(this.news):J(!0))))}getNewsFromIndexedDb(){return this.indexedDbService.getNews().pipe(ge(r=>{this.news=r}))}getDigitalVisionDataFromIndexedDb(){return this.indexedDbService.getDigitalVisionData().pipe(ge(r=>{this.digitalVisionProduct=r}))}getTrsDataFromIndexedDb(){return this.indexedDbService.getTrsData().pipe(ge(r=>{this.trsProduct=r}))}getRfidDataFromIndexedDb(){return this.indexedDbService.getRfidData().pipe(ge(r=>{this.rfidProduct=r}))}getNewsDetail(r){return y(this,null,function*(){let s=this.news.find(i=>i.id===r);if(s)return s;{let i=yield this.getNewsFromCloud(r);return i||this.news[0]}})}getNewsFromCloud(r){return new Promise(s=>{this.db.doc(`${ye}/news/data/${r}`).get().subscribe({next:i=>y(this,null,function*(){s(i.data())})})})}};e.\u0275fac=function(s){return new(s||e)(L(BM),L(VM))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var be="primary",Ou=Symbol("RouteTitle"),Rw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function cc(t){return new Rw(t)}function P$(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let s={};for(let i=0;i<r.length;i++){let o=r[i],a=t[i];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:s}}function N$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fr(t[n],e[n]))return!1;return!0}function Fr(t,e){let n=t?Dw(t):void 0,r=e?Dw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!WM(t[s],e[s]))return!1;return!0}function Dw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function WM(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((s,i)=>r[i]===s)}else return t===e}function QM(t){return t.length>0?t[t.length-1]:null}function li(t){return qp(t)?t:_d(t)?Ve(Promise.resolve(t)):J(t)}var O$={exact:XM,subset:ZM},YM={exact:M$,subset:F$,ignored:()=>!0};function UM(t,e,n){return O$[n.paths](t.root,e.root,n.matrixParams)&&YM[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function M$(t,e){return Fr(t,e)}function XM(t,e,n){if(!_o(t.segments,e.segments)||!Zm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!XM(t.children[r],e.children[r],n))return!1;return!0}function F$(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>WM(t[n],e[n]))}function ZM(t,e,n){return JM(t,e,e.segments,n)}function JM(t,e,n,r){if(t.segments.length>n.length){let s=t.segments.slice(0,n.length);return!(!_o(s,n)||e.hasChildren()||!Zm(s,n,r))}else if(t.segments.length===n.length){if(!_o(t.segments,n)||!Zm(t.segments,n,r))return!1;for(let s in e.children)if(!t.children[s]||!ZM(t.children[s],e.children[s],r))return!1;return!0}else{let s=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!_o(t.segments,s)||!Zm(t.segments,s,r)||!t.children[be]?!1:JM(t.children[be],e,i,r)}}function Zm(t,e,n){return e.every((r,s)=>YM[n](t[s].parameters,r.parameters))}var ii=class{constructor(e=new Fe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=cc(this.queryParams),this._queryParamMap}toString(){return V$.serialize(this)}},Fe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jm(this)}},yo=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=cc(this.parameters),this._parameterMap}toString(){return t1(this)}};function L$(t,e){return _o(t,e)&&t.every((n,r)=>Fr(n.parameters,e[r].parameters))}function _o(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function B$(t,e){let n=[];return Object.entries(t.children).forEach(([r,s])=>{r===be&&(n=n.concat(e(s,r)))}),Object.entries(t.children).forEach(([r,s])=>{r!==be&&(n=n.concat(e(s,r)))}),n}var Mu=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:()=>new Cu,providedIn:"root"});let t=e;return t})(),Cu=class{parse(e){let n=new Pw(e);return new ii(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Eu(e.root,!0)}`,r=q$(e.queryParams),s=typeof e.fragment=="string"?`#${U$(e.fragment)}`:"";return`${n}${r}${s}`}},V$=new Cu;function Jm(t){return t.segments.map(e=>t1(e)).join("/")}function Eu(t,e){if(!t.hasChildren())return Jm(t);if(e){let n=t.children[be]?Eu(t.children[be],!1):"",r=[];return Object.entries(t.children).forEach(([s,i])=>{s!==be&&r.push(`${s}:${Eu(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=B$(t,(r,s)=>s===be?[Eu(t.children[be],!1)]:[`${s}:${Eu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[be]!=null?`${Jm(t)}/${n[0]}`:`${Jm(t)}/(${n.join("//")})`}}function e1(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ym(t){return e1(t).replace(/%3B/gi,";")}function U$(t){return encodeURI(t)}function kw(t){return e1(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ep(t){return decodeURIComponent(t)}function jM(t){return ep(t.replace(/\+/g,"%20"))}function t1(t){return`${kw(t.path)}${j$(t.parameters)}`}function j$(t){return Object.entries(t).map(([e,n])=>`;${kw(e)}=${kw(n)}`).join("")}function q$(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(s=>`${Ym(n)}=${Ym(s)}`).join("&"):`${Ym(n)}=${Ym(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var $$=/^[^\/()?;#]+/;function Aw(t){let e=t.match($$);return e?e[0]:""}var z$=/^[^\/()?;=#]+/;function G$(t){let e=t.match(z$);return e?e[0]:""}var K$=/^[^=?&#]+/;function H$(t){let e=t.match(K$);return e?e[0]:""}var W$=/^[^&#]+/;function Q$(t){let e=t.match(W$);return e?e[0]:""}var Pw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fe([],{}):new Fe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[be]=new Fe(e,n)),r}parseSegment(){let e=Aw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new He(4009,!1);return this.capture(e),new yo(ep(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=G$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Aw(this.remaining);s&&(r=s,this.capture(r))}e[ep(n)]=ep(r)}parseQueryParam(e){let n=H$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Q$(this.remaining);o&&(r=o,this.capture(r))}let s=jM(n),i=jM(r);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(i)}else e[s]=i}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Aw(this.remaining),s=this.remaining[r.length];if(s!=="/"&&s!==")"&&s!==";")throw new He(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=be);let o=this.parseChildren();n[i]=Object.keys(o).length===1?o[be]:new Fe([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new He(4011,!1)}};function n1(t){return t.segments.length>0?new Fe([],{[be]:t}):t}function r1(t){let e={};for(let[r,s]of Object.entries(t.children)){let i=r1(s);if(r===be&&i.segments.length===0&&i.hasChildren())for(let[o,a]of Object.entries(i.children))e[o]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let n=new Fe(t.segments,e);return Y$(n)}function Y$(t){if(t.numberOfChildren===1&&t.children[be]){let e=t.children[be];return new Fe(t.segments.concat(e.segments),e.children)}return t}function lc(t){return t instanceof ii}function X$(t,e,n=null,r=null){let s=s1(t);return i1(s,e,n,r)}function s1(t){let e;function n(i){let o={};for(let c of i.children){let l=n(c);o[c.outlet]=l}let a=new Fe(i.url,o);return i===t&&(e=a),a}let r=n(t.root),s=n1(r);return e??s}function i1(t,e,n,r){let s=t;for(;s.parent;)s=s.parent;if(e.length===0)return Cw(s,s,s,n,r);let i=Z$(e);if(i.toRoot())return Cw(s,s,new Fe([],{}),n,r);let o=J$(i,s,t),a=o.processChildren?xu(o.segmentGroup,o.index,i.commands):a1(o.segmentGroup,o.index,i.commands);return Cw(s,o.segmentGroup,a,n,r)}function tp(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Tu(t){return typeof t=="object"&&t!=null&&t.outlets}function Cw(t,e,n,r,s){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=o1(t,e,n);let a=n1(r1(o));return new ii(a,i,s)}function o1(t,e,n){let r={};return Object.entries(t.children).forEach(([s,i])=>{i===e?r[s]=n:r[s]=o1(i,e,n)}),new Fe(t.segments,r)}var np=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&tp(r[0]))throw new He(4003,!1);let s=r.find(Tu);if(s&&s!==QM(r))throw new He(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Z$(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new np(!0,0,t);let e=0,n=!1,r=t.reduce((s,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return typeof i!="string"?[...s,i]:o===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&s.push(a))}),s):[...s,i]},[]);return new np(n,e,r)}var oc=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function J$(t,e,n){if(t.isAbsolute)return new oc(e,!0,0);if(!n)return new oc(e,!1,NaN);if(n.parent===null)return new oc(n,!0,0);let r=tp(t.commands[0])?0:1,s=n.segments.length-1+r;return e6(n,s,t.numberOfDoubleDots)}function e6(t,e,n){let r=t,s=e,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new He(4005,!1);s=r.segments.length}return new oc(r,!1,s-i)}function t6(t){return Tu(t[0])?t[0].outlets:{[be]:t}}function a1(t,e,n){if(t??=new Fe([],{}),t.segments.length===0&&t.hasChildren())return xu(t,e,n);let r=n6(t,e,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new Fe(t.segments.slice(0,r.pathIndex),{});return i.children[be]=new Fe(t.segments.slice(r.pathIndex),t.children),xu(i,0,s)}else return r.match&&s.length===0?new Fe(t.segments,{}):r.match&&!t.hasChildren()?Nw(t,e,n):r.match?xu(t,0,s):Nw(t,e,n)}function xu(t,e,n){if(n.length===0)return new Fe(t.segments,{});{let r=t6(n),s={};if(Object.keys(r).some(i=>i!==be)&&t.children[be]&&t.numberOfChildren===1&&t.children[be].segments.length===0){let i=xu(t.children[be],e,n);return new Fe(t.segments,i.children)}return Object.entries(r).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[i]=a1(t.children[i],e,o))}),Object.entries(t.children).forEach(([i,o])=>{r[i]===void 0&&(s[i]=o)}),new Fe(t.segments,s)}}function n6(t,e,n){let r=0,s=e,i={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(r>=n.length)return i;let o=t.segments[s],a=n[r];if(Tu(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(s>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!$M(c,l,o))return i;r+=2}else{if(!$M(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}function Nw(t,e,n){let r=t.segments.slice(0,e),s=0;for(;s<n.length;){let i=n[s];if(Tu(i)){let c=r6(i.outlets);return new Fe(r,c)}if(s===0&&tp(n[0])){let c=t.segments[e];r.push(new yo(c.path,qM(n[0]))),s++;continue}let o=Tu(i)?i.outlets[be]:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&tp(a)?(r.push(new yo(o,qM(a))),s+=2):(r.push(new yo(o,{})),s++)}return new Fe(r,{})}function r6(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Nw(new Fe([],{}),0,r))}),e}function qM(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function $M(t,e,n){return t==n.path&&Fr(e,n.parameters)}var Su="imperative",Lt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Lt||{}),Qn=class{constructor(e,n){this.id=e,this.url=n}},uc=class extends Qn{constructor(e,n,r="imperative",s=null){super(e,n),this.type=Lt.NavigationStart,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lr=class extends Qn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Lt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Fn||{}),rp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(rp||{}),oi=class extends Qn{constructor(e,n,r,s){super(e,n),this.reason=r,this.code=s,this.type=Lt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ai=class extends Qn{constructor(e,n,r,s){super(e,n),this.reason=r,this.code=s,this.type=Lt.NavigationSkipped}},Iu=class extends Qn{constructor(e,n,r,s){super(e,n),this.error=r,this.target=s,this.type=Lt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sp=class extends Qn{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Lt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ow=class extends Qn{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Lt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mw=class extends Qn{constructor(e,n,r,s,i){super(e,n),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i,this.type=Lt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fw=class extends Qn{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Lt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lw=class extends Qn{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Lt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bw=class{constructor(e){this.route=e,this.type=Lt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vw=class{constructor(e){this.route=e,this.type=Lt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Uw=class{constructor(e){this.snapshot=e,this.type=Lt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jw=class{constructor(e){this.snapshot=e,this.type=Lt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qw=class{constructor(e){this.snapshot=e,this.type=Lt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$w=class{constructor(e){this.snapshot=e,this.type=Lt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ip=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Lt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ru=class{},Du=class{constructor(e){this.url=e}};var zw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Fu,this.attachRef=null}},Fu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,s){let i=this.getOrCreateContext(r);i.outlet=s,this.contexts.set(r,i)}onChildOutletDestroyed(r){let s=this.getContext(r);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let s=this.getContext(r);return s||(s=new zw,this.contexts.set(r,s)),s}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),op=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Gw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Gw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Kw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Kw(e,this._root).map(n=>n.value)}};function Gw(t,e){if(t===e.value)return e;for(let n of e.children){let r=Gw(t,n);if(r)return r}return null}function Kw(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Kw(t,n);if(r.length)return r.unshift(e),r}return[]}var Mn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ic(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ap=class extends op{constructor(e,n){super(e),this.snapshot=n,n0(this,e)}toString(){return this.snapshot.toString()}};function c1(t){let e=s6(t),n=new Wt([new yo("",{})]),r=new Wt({}),s=new Wt({}),i=new Wt({}),o=new Wt(""),a=new bo(n,r,i,o,s,be,t,e.root);return a.snapshot=e.root,new ap(new Mn(a,[]),e)}function s6(t){let e={},n={},r={},s="",i=new ku([],e,r,s,n,be,t,null,{});return new cp("",new Mn(i,[]))}var bo=class{constructor(e,n,r,s,i,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ie(l=>l[Ou]))??J(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>cc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>cc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function t0(t,e,n="emptyOnly"){let r,{routeConfig:s}=t;return e!==null&&(n==="always"||s?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:E(E({},e.params),t.params),data:E(E({},e.data),t.data),resolve:E(E(E(E({},t.data),e.data),s?.data),t._resolvedData)}:r={params:E({},t.params),data:E({},t.data),resolve:E(E({},t.data),t._resolvedData??{})},s&&u1(s)&&(r.resolve[Ou]=s.title),r}var ku=class{get title(){return this.data?.[Ou]}constructor(e,n,r,s,i,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=cc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=cc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},cp=class extends op{constructor(e,n){super(n),this.url=e,n0(this,n)}toString(){return l1(this._root)}};function n0(t,e){e.value._routerState=t,e.children.forEach(n=>n0(t,n))}function l1(t){let e=t.children.length>0?` { ${t.children.map(l1).join(", ")} } `:"";return`${t.value}${e}`}function Tw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Fr(e.params,n.params)||t.paramsSubject.next(n.params),N$(e.url,n.url)||t.urlSubject.next(n.url),Fr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Hw(t,e){let n=Fr(t.params,e.params)&&L$(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Hw(t.parent,e.parent))}function u1(t){return typeof t.title=="string"||t.title===null}var i6=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=be,this.activateEvents=new ht,this.deactivateEvents=new ht,this.attachEvents=new ht,this.detachEvents=new ht,this.parentContexts=Y(Fu),this.location=Y(Fo),this.changeDetector=Y(yr),this.environmentInjector=Y(bs),this.inputBinder=Y(fp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:s,previousValue:i}=r.name;if(s)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new He(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new He(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new He(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new He(4013,!1);this._activatedRoute=r;let i=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Ww(r,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:s??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275dir=Qt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zr]});let t=e;return t})(),Ww=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===bo?this.route:e===Fu?this.childContexts:this.parent.get(e,n)}},fp=new se(""),zM=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:s}=r,i=lr([s.queryParams,s.params,s.data]).pipe(xe(([o,a,c],l)=>(c=E(E(E({},o),a),c),l===0?J(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==s||s.component===null){this.unsubscribeFromRouteData(r);return}let a=Wx(s.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,i)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function o6(t,e,n){let r=Pu(t,e._root,n?n._root:void 0);return new ap(r,e)}function Pu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let s=a6(t,e,n);return new Mn(r,s)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Pu(t,a)),o}}let r=c6(e.value),s=e.children.map(i=>Pu(t,i));return new Mn(r,s)}}function a6(t,e,n){return e.children.map(r=>{for(let s of n.children)if(t.shouldReuseRoute(r.value,s.value.snapshot))return Pu(t,r,s);return Pu(t,r)})}function c6(t){return new bo(new Wt(t.url),new Wt(t.params),new Wt(t.queryParams),new Wt(t.fragment),new Wt(t.data),t.outlet,t.component,t)}var d1="ngNavigationCancelingError";function h1(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=lc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=f1(!1,Fn.Redirect);return s.url=n,s.navigationBehaviorOptions=r,s}function f1(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[d1]=!0,n.cancellationCode=e,n}function l6(t){return m1(t)&&lc(t.url)}function m1(t){return!!t&&t[d1]}var u6=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=Ln({type:e,selectors:[["ng-component"]],standalone:!0,features:[Vn],decls:1,vars:0,template:function(s,i){s&1&&gr(0,"router-outlet")},dependencies:[i6],encapsulation:2});let t=e;return t})();function d6(t,e){return t.providers&&!t._injector&&(t._injector=eg(t.providers,e,`Route: ${t.path}`)),t._injector??e}function r0(t){let e=t.children&&t.children.map(r0),n=e?z(E({},t),{children:e}):E({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==be&&(n.component=u6),n}function Br(t){return t.outlet||be}function h6(t,e){let n=t.filter(r=>Br(r)===e);return n.push(...t.filter(r=>Br(r)!==e)),n}function Lu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var f6=(t,e,n,r)=>ie(s=>(new Qw(e,s.targetRouterState,s.currentRouterState,n,r).activate(t),s)),Qw=class{constructor(e,n,r,s,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=i}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Tw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let s=ic(n);e.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){let s=e.value,i=n?n.value:null;if(s===i)if(s.component){let o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),s=r&&e.value.component?r.children:n,i=ic(e);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),s=r&&e.value.component?r.children:n,i=ic(e);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let s=ic(n);e.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new $w(i.value.snapshot))}),e.children.length&&this.forwardEvent(new jw(e.value.snapshot))}activateRoutes(e,n,r){let s=e.value,i=n?n.value:null;if(Tw(s),s===i)if(s.component){let o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(s.component){let o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Tw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Lu(s.snapshot);o.attachRef=null,o.route=s,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},lp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ac=class{constructor(e,n){this.component=e,this.route=n}};function m6(t,e,n){let r=t._root,s=e?e._root:null;return vu(r,s,n,[r.value])}function p6(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function hc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!gx(t)?t:e.get(t):r}function vu(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=ic(e);return t.children.forEach(o=>{g6(o,i[o.value.outlet],n,r.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>Au(a,n.getContext(o),s)),s}function g6(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let c=y6(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new lp(r)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?vu(t,e,a?a.children:null,r,s):vu(t,e,n,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new ac(a.outlet.component,o))}else o&&Au(e,a,s),s.canActivateChecks.push(new lp(r)),i.component?vu(t,null,a?a.children:null,r,s):vu(t,null,n,r,s);return s}function y6(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!_o(t.url,e.url);case"pathParamsOrQueryParamsChange":return!_o(t.url,e.url)||!Fr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hw(t,e)||!Fr(t.queryParams,e.queryParams);case"paramsChange":default:return!Hw(t,e)}}function Au(t,e,n){let r=ic(t),s=t.value;Object.entries(r).forEach(([i,o])=>{s.component?e?Au(o,e.children.getContext(i),n):Au(o,null,n):Au(o,e,n)}),s.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ac(e.outlet.component,s)):n.canDeactivateChecks.push(new ac(null,s)):n.canDeactivateChecks.push(new ac(null,s))}function Bu(t){return typeof t=="function"}function _6(t){return typeof t=="boolean"}function b6(t){return t&&Bu(t.canLoad)}function E6(t){return t&&Bu(t.canActivate)}function v6(t){return t&&Bu(t.canActivateChild)}function w6(t){return t&&Bu(t.canDeactivate)}function x6(t){return t&&Bu(t.canMatch)}function p1(t){return t instanceof hx||t?.name==="EmptyError"}var Xm=Symbol("INITIAL_VALUE");function dc(){return xe(t=>lr(t.map(e=>e.pipe(Vt(1),dr(Xm)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===Xm)return Xm;if(n===!1||n instanceof ii)return n}return!0}),Ye(e=>e!==Xm),Vt(1)))}function S6(t,e){return on(n=>{let{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return o.length===0&&i.length===0?J(z(E({},n),{guardsResult:!0})):A6(o,r,s,t).pipe(on(a=>a&&_6(a)?C6(r,i,t,e):J(a)),ie(a=>z(E({},n),{guardsResult:a})))})}function A6(t,e,n,r){return Ve(t).pipe(on(s=>k6(s.component,s.route,n,e,r)),ur(s=>s!==!0,!0))}function C6(t,e,n,r){return Ve(e).pipe(gs(s=>od(I6(s.route.parent,r),T6(s.route,r),D6(t,s.path,n),R6(t,s.route,n))),ur(s=>s!==!0,!0))}function T6(t,e){return t!==null&&e&&e(new qw(t)),J(!0)}function I6(t,e){return t!==null&&e&&e(new Uw(t)),J(!0)}function R6(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let s=r.map(i=>Oc(()=>{let o=Lu(e)??n,a=hc(i,o),c=E6(a)?a.canActivate(e,t):hr(o,()=>a(e,t));return li(c).pipe(ur())}));return J(s).pipe(dc())}function D6(t,e,n){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>p6(o)).filter(o=>o!==null).map(o=>Oc(()=>{let a=o.guards.map(c=>{let l=Lu(o.node)??n,d=hc(c,l),f=v6(d)?d.canActivateChild(r,t):hr(l,()=>d(r,t));return li(f).pipe(ur())});return J(a).pipe(dc())}));return J(i).pipe(dc())}function k6(t,e,n,r,s){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return J(!0);let o=i.map(a=>{let c=Lu(e)??s,l=hc(a,c),d=w6(l)?l.canDeactivate(t,e,n,r):hr(c,()=>l(t,e,n,r));return li(d).pipe(ur())});return J(o).pipe(dc())}function P6(t,e,n,r){let s=e.canLoad;if(s===void 0||s.length===0)return J(!0);let i=s.map(o=>{let a=hc(o,t),c=b6(a)?a.canLoad(e,n):hr(t,()=>a(e,n));return li(c)});return J(i).pipe(dc(),g1(r))}function g1(t){return ux(ge(e=>{if(lc(e))throw h1(t,e)}),ie(e=>e===!0))}function N6(t,e,n,r){let s=e.canMatch;if(!s||s.length===0)return J(!0);let i=s.map(o=>{let a=hc(o,t),c=x6(a)?a.canMatch(e,n):hr(t,()=>a(e,n));return li(c)});return J(i).pipe(dc(),g1(r))}var Nu=class{constructor(e){this.segmentGroup=e||null}},up=class extends Error{constructor(e){super(),this.urlTree=e}};function sc(t){return pi(new Nu(t))}function O6(t){return pi(new He(4e3,!1))}function M6(t){return pi(f1(!1,Fn.GuardRejected))}var Yw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],s=n.root;for(;;){if(r=r.concat(s.segments),s.numberOfChildren===0)return J(r);if(s.numberOfChildren>1||!s.children[be])return O6(e.redirectTo);s=s.children[be]}}applyRedirectCommands(e,n,r){let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new up(s);return s}applyRedirectCreateUrlTree(e,n,r,s){let i=this.createSegmentGroup(e,n.root,r,s);return new ii(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([s,i])=>{if(typeof i=="string"&&i.startsWith(":")){let a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(e,n,r,s){let i=this.createSegments(e,n.segments,r,s),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,s)}),new Fe(i,o)}createSegments(e,n,r,s){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,s):this.findOrReturn(i,r))}findPosParam(e,n,r){let s=r[n.path.substring(1)];if(!s)throw new He(4001,!1);return s}findOrReturn(e,n){let r=0;for(let s of n){if(s.path===e.path)return n.splice(r),s;r++}return e}},Xw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function F6(t,e,n,r,s){let i=s0(t,e,n);return i.matched?(r=d6(e,r),N6(r,e,n,s).pipe(ie(o=>o===!0?i:E({},Xw)))):J(i)}function s0(t,e,n){if(e.path==="**")return L6(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?E({},Xw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(e.matcher||P$)(n,t,e);if(!s)return E({},Xw);let i={};Object.entries(s.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let o=s.consumed.length>0?E(E({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function L6(t){return{matched:!0,parameters:t.length>0?QM(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function GM(t,e,n,r){return n.length>0&&U6(t,n,r)?{segmentGroup:new Fe(e,V6(r,new Fe(n,t.children))),slicedSegments:[]}:n.length===0&&j6(t,n,r)?{segmentGroup:new Fe(t.segments,B6(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Fe(t.segments,t.children),slicedSegments:n}}function B6(t,e,n,r){let s={};for(let i of n)if(mp(t,e,i)&&!r[Br(i)]){let o=new Fe([],{});s[Br(i)]=o}return E(E({},r),s)}function V6(t,e){let n={};n[be]=e;for(let r of t)if(r.path===""&&Br(r)!==be){let s=new Fe([],{});n[Br(r)]=s}return n}function U6(t,e,n){return n.some(r=>mp(t,e,r)&&Br(r)!==be)}function j6(t,e,n){return n.some(r=>mp(t,e,r))}function mp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function q6(t,e,n,r){return Br(t)!==r&&(r===be||!mp(e,n,t))?!1:s0(e,t,n).matched}function $6(t,e,n){return e.length===0&&!t.children[n]}var Zw=class{};function z6(t,e,n,r,s,i,o="emptyOnly"){return new Jw(t,e,n,r,s,o,i).recognize()}var G6=31,Jw=class{constructor(e,n,r,s,i,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Yw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new He(4002,`'${e.segmentGroup}'`)}recognize(){let e=GM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(n=>{let r=new ku([],Object.freeze({}),Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,{},be,this.rootComponentType,null,{}),s=new Mn(r,n),i=new cp("",s),o=X$(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(i._root,null),{state:i,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,be).pipe(ps(r=>{if(r instanceof up)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Nu?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,s=t0(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),e.children.forEach(i=>this.inheritParamsAndData(i,r))}processSegmentGroup(e,n,r,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,s,!0).pipe(ie(i=>i instanceof Mn?[i]:[]))}processChildren(e,n,r){let s=[];for(let i of Object.keys(r.children))i==="primary"?s.unshift(i):s.push(i);return Ve(s).pipe(gs(i=>{let o=r.children[i],a=h6(n,i);return this.processSegmentGroup(e,a,o,i)}),Io((i,o)=>(i.push(...o),i)),zp(null),mx(),on(i=>{if(i===null)return sc(r);let o=y1(i);return K6(o),J(o)}))}processSegment(e,n,r,s,i,o){return Ve(n).pipe(gs(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,s,i,o).pipe(ps(c=>{if(c instanceof Nu)return J(null);throw c}))),ur(a=>!!a),ps(a=>{if(p1(a))return $6(r,s,i)?J(new Zw):sc(r);throw a}))}processSegmentAgainstRoute(e,n,r,s,i,o,a){return q6(r,s,i,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,s,r,i,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,s,n,r,i,o):sc(s):sc(s)}expandSegmentAgainstRouteUsingRedirect(e,n,r,s,i,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=s0(n,s,i);if(!a)return sc(n);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>G6&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,s.redirectTo,l);return this.applyRedirects.lineralizeSegments(s,f).pipe(on(m=>this.processSegment(e,r,n,m.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,s,i){let o=F6(n,r,s,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(xe(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,s).pipe(xe(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:m}=a,g=new ku(d,m,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,W6(r),Br(r),r.component??r._loadedComponent??null,r,Q6(r)),{segmentGroup:b,slicedSegments:C}=GM(n,d,f,c);if(C.length===0&&b.hasChildren())return this.processChildren(l,c,b).pipe(ie(N=>N===null?null:new Mn(g,N)));if(c.length===0&&C.length===0)return J(new Mn(g,[]));let x=Br(r)===i;return this.processSegment(l,c,b,C,x?be:i,!0).pipe(ie(N=>new Mn(g,N instanceof Mn?[N]:[])))}))):sc(n)))}getChildConfig(e,n,r){return n.children?J({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?J({routes:n._loadedRoutes,injector:n._loadedInjector}):P6(e,n,r,this.urlSerializer).pipe(on(s=>s?this.configLoader.loadChildren(e,n).pipe(ge(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):M6(n))):J({routes:[],injector:e})}};function K6(t){t.sort((e,n)=>e.value.outlet===be?-1:n.value.outlet===be?1:e.value.outlet.localeCompare(n.value.outlet))}function H6(t){let e=t.value.routeConfig;return e&&e.path===""}function y1(t){let e=[],n=new Set;for(let r of t){if(!H6(r)){e.push(r);continue}let s=e.find(i=>r.value.routeConfig===i.value.routeConfig);s!==void 0?(s.children.push(...r.children),n.add(s)):e.push(r)}for(let r of n){let s=y1(r.children);e.push(new Mn(r.value,s))}return e.filter(r=>!n.has(r))}function W6(t){return t.data||{}}function Q6(t){return t.resolve||{}}function Y6(t,e,n,r,s,i){return on(o=>z6(t,e,n,r,o.extractedUrl,s,i).pipe(ie(({state:a,tree:c})=>z(E({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function X6(t,e){return on(n=>{let{targetSnapshot:r,guards:{canActivateChecks:s}}=n;if(!s.length)return J(n);let i=new Set(s.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let l of _1(c))o.add(l);let a=0;return Ve(o).pipe(gs(c=>i.has(c)?Z6(c,r,t,e):(c.data=t0(c,c.parent,t).resolve,J(void 0))),ge(()=>a++),Gp(1),on(c=>a===o.size?J(n):cr))})}function _1(t){let e=t.children.map(n=>_1(n)).flat();return[t,...e]}function Z6(t,e,n,r){let s=t.routeConfig,i=t._resolve;return s?.title!==void 0&&!u1(s)&&(i[Ou]=s.title),J6(i,t,e,r).pipe(ie(o=>(t._resolvedData=o,t.data=t0(t,t.parent,n).resolve,null)))}function J6(t,e,n,r){let s=Dw(t);if(s.length===0)return J({});let i={};return Ve(s).pipe(on(o=>ez(t[o],e,n,r).pipe(ur(),ge(a=>{i[o]=a}))),Gp(1),fx(i),ps(o=>p1(o)?cr:pi(o)))}function ez(t,e,n,r){let s=Lu(e)??r,i=hc(t,s),o=i.resolve?i.resolve(e,n):hr(s,()=>i(e,n));return li(o)}function Iw(t){return xe(e=>{let n=t(e);return n?Ve(n).pipe(ie(()=>e)):J(e)})}var b1=(()=>{let e=class e{buildTitle(r){let s,i=r.root;for(;i!==void 0;)s=this.getResolvedTitleForRoute(i)??s,i=i.children.find(o=>o.outlet===be);return s}getResolvedTitleForRoute(r){return r.data[Ou]}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:()=>Y(tz),providedIn:"root"});let t=e;return t})(),tz=(()=>{let e=class e extends b1{constructor(r){super(),this.title=r}updateTitle(r){let s=this.buildTitle(r);s!==void 0&&this.title.setTitle(s)}};e.\u0275fac=function(s){return new(s||e)(L(RS))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vu=new se("",{providedIn:"root",factory:()=>({})}),dp=new se(""),i0=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Y(Ed)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return J(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let s=li(r.loadComponent()).pipe(ie(E1),ge(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),$r(()=>{this.componentLoaders.delete(r)})),i=new Nc(s,()=>new Le).pipe(jp());return this.componentLoaders.set(r,i),i}loadChildren(r,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return J({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let o=nz(s,this.compiler,r,this.onLoadEndListener).pipe($r(()=>{this.childrenLoaders.delete(s)})),a=new Nc(o,()=>new Le).pipe(jp());return this.childrenLoaders.set(s,a),a}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nz(t,e,n,r){return li(t.loadChildren()).pipe(ie(E1),on(s=>s instanceof Fx||Array.isArray(s)?J(s):Ve(e.compileModuleAsync(s))),ie(s=>{r&&r(t);let i,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(i=s.create(n).injector,o=i.get(dp,[],{optional:!0,self:!0}).flat()),{routes:o.map(r0),injector:i}}))}function rz(t){return t&&typeof t=="object"&&"default"in t}function E1(t){return rz(t)?t.default:t}var o0=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:()=>Y(sz),providedIn:"root"});let t=e;return t})(),sz=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,s){return r}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),v1=new se(""),w1=new se("");function iz(t,e,n){let r=t.get(w1),s=t.get(De);return t.get(we).runOutsideAngular(()=>{if(!s.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i,o=new Promise(l=>{i=l}),a=s.startViewTransition(()=>(i(),oz(t))),{onViewTransitionCreated:c}=r;return c&&hr(t,()=>c({transition:a,from:e,to:n})),o})}function oz(t){return new Promise(e=>{Zp(e,{injector:t})})}var a0=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=Y(i0),this.environmentInjector=Y(bs),this.urlSerializer=Y(Mu),this.rootContexts=Y(Fu),this.location=Y($c),this.inputBindingEnabled=Y(fp,{optional:!0})!==null,this.titleStrategy=Y(b1),this.options=Y(Vu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Y(o0),this.createViewTransition=Y(v1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let r=i=>this.events.next(new Bw(i)),s=i=>this.events.next(new Vw(i));this.configLoader.onLoadEndListener=s,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let s=++this.navigationId;this.transitions?.next(z(E(E({},this.transitions.value),r),{id:s}))}setupNavigations(r,s,i){return this.transitions=new Wt({id:0,currentUrlTree:s,currentRawUrl:s,extractedUrl:this.urlHandlingStrategy.extract(s),urlAfterRedirects:this.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Su,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ye(o=>o.id!==0),ie(o=>z(E({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xe(o=>{let a=!1,c=!1;return J(o).pipe(xe(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Fn.SupersededByNewNavigation),cr;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?z(E({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new ai(l.id,this.urlSerializer.serialize(l.rawUrl),m,rp.IgnoredSameUrlNavigation)),l.resolve(null),cr}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return J(l).pipe(xe(m=>{let g=this.transitions?.getValue();return this.events.next(new uc(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),g!==this.transitions?.getValue()?cr:Promise.resolve(m)}),Y6(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ge(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=z(E({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let g=new sp(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(g)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:g,source:b,restoredState:C,extras:x}=l,N=new uc(m,this.urlSerializer.serialize(g),b,C);this.events.next(N);let U=c1(this.rootComponentType).snapshot;return this.currentTransition=o=z(E({},l),{targetSnapshot:U,urlAfterRedirects:g,extras:z(E({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,J(o)}else{let m="";return this.events.next(new ai(l.id,this.urlSerializer.serialize(l.extractedUrl),m,rp.IgnoredByUrlHandlingStrategy)),l.resolve(null),cr}}),ge(l=>{let d=new Ow(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ie(l=>(this.currentTransition=o=z(E({},l),{guards:m6(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),S6(this.environmentInjector,l=>this.events.next(l)),ge(l=>{if(o.guardsResult=l.guardsResult,lc(l.guardsResult))throw h1(this.urlSerializer,l.guardsResult);let d=new Mw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Ye(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Fn.GuardRejected),!1)),Iw(l=>{if(l.guards.canActivateChecks.length)return J(l).pipe(ge(d=>{let f=new Fw(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),xe(d=>{let f=!1;return J(d).pipe(X6(this.paramsInheritanceStrategy,this.environmentInjector),ge({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Fn.NoDataFromResolver)}}))}),ge(d=>{let f=new Lw(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),Iw(l=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(ge(g=>{f.component=g}),ie(()=>{})));for(let g of f.children)m.push(...d(g));return m};return lr(d(l.targetSnapshot.root)).pipe(zp(null),Vt(1))}),Iw(()=>this.afterPreactivation()),xe(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?Ve(f).pipe(ie(()=>o)):J(o)}),ie(l=>{let d=o6(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=z(E({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),ge(()=>{this.events.next(new Ru)}),f6(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Vt(1),ge({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ys(this.transitionAbortSubject.pipe(ge(l=>{throw l}))),$r(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Fn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ps(l=>{if(c=!0,m1(l))this.events.next(new oi(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),l6(l)?this.events.next(new Du(l.url)):o.resolve(!1);else{this.events.next(new Iu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return cr}))}))}cancelNavigationTransition(r,s,i){let o=new oi(r.id,this.urlSerializer.serialize(r.extractedUrl),s,i);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function az(t){return t!==Su}var cz=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:()=>Y(lz),providedIn:"root"});let t=e;return t})(),e0=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},lz=(()=>{let e=class e extends e0{};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=gi(e)))(i||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),x1=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:()=>Y(uz),providedIn:"root"});let t=e;return t})(),uz=(()=>{let e=class e extends x1{constructor(){super(...arguments),this.location=Y($c),this.urlSerializer=Y(Mu),this.options=Y(Vu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Y(o0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=c1(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(s=>{s.type==="popstate"&&r(s.url,s.state)})}handleRouterEvent(r,s){if(r instanceof uc)this.stateMemento=this.createStateMemento();else if(r instanceof ai)this.rawUrlTree=s.initialUrl;else if(r instanceof sp){if(this.urlUpdateStrategy==="eager"&&!s.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl);this.setBrowserUrl(i,s)}}else r instanceof Ru?(this.currentUrlTree=s.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl),this.routerState=s.targetRouterState,this.urlUpdateStrategy==="deferred"&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s))):r instanceof oi&&(r.code===Fn.GuardRejected||r.code===Fn.NoDataFromResolver)?this.restoreHistory(s):r instanceof Iu?this.restoreHistory(s,!0):r instanceof Lr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,s){let i=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(i)||s.extras.replaceUrl){let o=this.browserPageId,a=E(E({},s.extras.state),this.generateNgRouterState(s.id,o));this.location.replaceState(i,"",a)}else{let o=E(E({},s.extras.state),this.generateNgRouterState(s.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(r,s=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,s){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=gi(e)))(i||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(wu||{});function S1(t,e){t.events.pipe(Ye(n=>n instanceof Lr||n instanceof oi||n instanceof Iu||n instanceof ai),ie(n=>n instanceof Lr||n instanceof ai?wu.COMPLETE:(n instanceof oi?n.code===Fn.Redirect||n.code===Fn.SupersededByNewNavigation:!1)?wu.REDIRECTING:wu.FAILED),Ye(n=>n!==wu.REDIRECTING),Vt(1)).subscribe(()=>{e()})}function dz(t){throw t}var hz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ci=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Y(pd),this.stateManager=Y(x1),this.options=Y(Vu,{optional:!0})||{},this.pendingTasks=Y(Vc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Y(a0),this.urlSerializer=Y(Mu),this.location=Y($c),this.urlHandlingStrategy=Y(o0),this._events=new Le,this.errorHandler=this.options.errorHandler||dz,this.navigated=!1,this.routeReuseStrategy=Y(cz),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Y(dp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Y(fp,{optional:!0}),this.eventsSubscription=new ar,this.isNgZoneEnabled=Y(we)instanceof we&&we.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(s=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(s,o),s instanceof oi&&s.code!==Fn.Redirect&&s.code!==Fn.SupersededByNewNavigation)this.navigated=!0;else if(s instanceof Lr)this.navigated=!0;else if(s instanceof Du){let a=this.urlHandlingStrategy.merge(s.url,i.currentRawUrl),c={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||az(i.source)};this.scheduleNavigation(a,Su,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}pz(s)&&this._events.next(s)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Su,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,s)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",s)},0)})}navigateToSyncWithBrowser(r,s,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=E({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,s,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(r0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,s={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=s,d=l?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=E(E({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let g=i?i.snapshot:this.routerState.snapshot.root;m=s1(g)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return i1(m,r,f,d??null)}navigateByUrl(r,s={skipLocationChange:!1}){let i=lc(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Su,null,s)}navigate(r,s={skipLocationChange:!1}){return mz(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,s){let i;if(s===!0?i=E({},hz):s===!1?i=E({},fz):i=s,lc(r))return UM(this.currentUrlTree,r,i);let o=this.parseUrl(r);return UM(this.currentUrlTree,o,i)}removeEmptyProps(r){return Object.entries(r).reduce((s,[i,o])=>(o!=null&&(s[i]=o),s),{})}scheduleNavigation(r,s,i,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((m,g)=>{c=m,l=g});let f=this.pendingTasks.add();return S1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mz(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new He(4008,!1)}function pz(t){return!(t instanceof Ru)&&!(t instanceof Du)}var Fge=(()=>{let e=class e{constructor(r,s,i,o,a,c){this.router=r,this.route=s,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Le,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof Lr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,s,i,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||s||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let s=this.href===null?null:kx(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",s)}applyAttributeValue(r,s){let i=this.renderer,o=this.el.nativeElement;s!==null?i.setAttribute(o,r,s):i.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(s){return new(s||e)(de(ci),de(bo),Do("tabindex"),de(Mx),de(Tt),de(qc))},e.\u0275dir=Qt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(s,i){s&1&&bi("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),s&2&&fr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Me.HasDecoratorInputTransform,"preserveFragment","preserveFragment",gn],skipLocationChange:[Me.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",gn],replaceUrl:[Me.HasDecoratorInputTransform,"replaceUrl","replaceUrl",gn],routerLink:"routerLink"},standalone:!0,features:[Cn,zr]});let t=e;return t})();var hp=class{};var gz=(()=>{let e=class e{constructor(r,s,i,o,a){this.router=r,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ye(r=>r instanceof Lr),gs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,s){let i=[];for(let o of s){o.providers&&!o._injector&&(o._injector=eg(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Ve(i).pipe($p())}preloadConfig(r,s){return this.preloadingStrategy.preload(s,()=>{let i;s.loadChildren&&s.canLoad===void 0?i=this.loader.loadChildren(r,s):i=J(null);let o=i.pipe(on(a=>a===null?J(void 0):(s._loadedRoutes=a.routes,s._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(s.loadComponent&&!s._loadedComponent){let a=this.loader.loadComponent(s);return Ve([o,a]).pipe($p())}else return o})}};e.\u0275fac=function(s){return new(s||e)(L(ci),L(Ed),L(bs),L(hp),L(i0))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),A1=new se(""),yz=(()=>{let e=class e{constructor(r,s,i,o,a={}){this.urlSerializer=r,this.transitions=s,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=Y(bs),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof uc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Lr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof ai&&r.code===rp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ip&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,s){this.zone.runOutsideAngular(()=>y(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Zp(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new ip(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,s))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(s){Px()},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function _z(t){return t.routerState.root}function Uu(t,e){return{\u0275kind:t,\u0275providers:e}}function bz(){let t=Y(ko);return e=>{let n=t.get(bd);if(e!==n.components[0])return;let r=t.get(ci),s=t.get(C1);t.get(c0)===1&&r.initialNavigation(),t.get(T1,null,Hp.Optional)?.setUpPreloading(),t.get(A1,null,Hp.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var C1=new se("",{factory:()=>new Le}),c0=new se("",{providedIn:"root",factory:()=>1});function Ez(){return Uu(2,[{provide:c0,useValue:0},{provide:rg,multi:!0,deps:[ko],useFactory:e=>{let n=e.get(Xx,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let s=e.get(ci),i=e.get(C1);S1(s,()=>{r(!0)}),e.get(a0).afterPreactivation=()=>(r(!0),i.closed?J(void 0):i),s.initialNavigation()}))}}])}function vz(){return Uu(3,[{provide:rg,multi:!0,useFactory:()=>{let e=Y(ci);return()=>{e.setUpLocationChangeListener()}}},{provide:c0,useValue:2}])}var T1=new se("");function wz(t){return Uu(0,[{provide:T1,useExisting:gz},{provide:hp,useExisting:t}])}function xz(){return Uu(8,[zM,{provide:fp,useExisting:zM}])}function Sz(t){let e=[{provide:v1,useValue:iz},{provide:w1,useValue:E({skipNextTransition:!!t?.skipInitialTransition},t)}];return Uu(9,e)}var KM=new se("ROUTER_FORROOT_GUARD"),Az=[$c,{provide:Mu,useClass:Cu},ci,Fu,{provide:bo,useFactory:_z,deps:[ci]},i0,[]],Lge=(()=>{let e=class e{constructor(r){}static forRoot(r,s){return{ngModule:e,providers:[Az,[],{provide:dp,multi:!0,useValue:r},{provide:KM,useFactory:Rz,deps:[[ci,new Ro,new Wp]]},{provide:Vu,useValue:s||{}},s?.useHash?Tz():Iz(),Cz(),s?.preloadingStrategy?wz(s.preloadingStrategy).\u0275providers:[],s?.initialNavigation?Dz(s):[],s?.bindToComponentInputs?xz().\u0275providers:[],s?.enableViewTransitions?Sz().\u0275providers:[],kz()]}}static forChild(r){return{ngModule:e,providers:[{provide:dp,multi:!0,useValue:r}]}}};e.\u0275fac=function(s){return new(s||e)(L(KM,8))},e.\u0275mod=Te({type:e}),e.\u0275inj=Ce({});let t=e;return t})();function Cz(){return{provide:A1,useFactory:()=>{let t=Y(rS),e=Y(we),n=Y(Vu),r=Y(a0),s=Y(Mu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new yz(s,r,t,e,n)}}}function Tz(){return{provide:qc,useClass:Jx}}function Iz(){return{provide:qc,useClass:Zx}}function Rz(t){return"guarded"}function Dz(t){return[t.initialNavigation==="disabled"?vz().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Ez().\u0275providers:[]]}var HM=new se("");function kz(){return[{provide:HM,useFactory:bz},{provide:sg,multi:!0,useExisting:HM}]}export{yg as a,$z as b,wS as c,t9 as d,n9 as e,r9 as f,el as g,SG as h,AG as i,TG as j,IG as k,RG as l,br as m,HG as n,fy as o,kK as p,NK as q,qK as r,gge as s,bo as t,i6 as u,ci as v,Fge as w,Lge as x,C9 as y,T9 as z,uL as A,dL as B,hL as C,Pg as D,B9 as E,Ai as F,Tn as G,Go as H,M9 as I,lL as J,Cs as K,PS as L,C5 as M,jg as N,uA as O,D8 as P,Ud as Q,k8 as R,dA as S,hA as T,Yg as U,il as V,qd as W,yA as X,_A as Y,bA as Z,Ko as _,NS as $,ML as aa,FL as ba,h5 as ca,BS as da,LL as ea,f5 as fa,m5 as ga,KS as ha,p5 as ia,W5 as ja,Q5 as ka,Hr as la,WS as ma,Y5 as na,gB as oa,_B as pa,bB as qa,EB as ra,X5 as sa,Z5 as ta,J5 as ua,e8 as va,t8 as wa,y8 as xa,_8 as ya,E8 as za,A8 as Aa,qB as Ba,vG as Ca,wG as Da};
